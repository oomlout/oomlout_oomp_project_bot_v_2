<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive BOM for KiCAD</title>
  <style type="text/css">
:root {
  --pcb-edge-color: black;
  --pad-color: #878787;
  --pad-hole-color: #CCCCCC;
  --pad-color-highlight: #D04040;
  --pad-color-highlight-both: #D0D040;
  --pad-color-highlight-marked: #44a344;
  --pin1-outline-color: #ffb629;
  --pin1-outline-color-highlight: #ffb629;
  --pin1-outline-color-highlight-both: #fcbb39;
  --pin1-outline-color-highlight-marked: #fdbe41;
  --silkscreen-edge-color: #aa4;
  --silkscreen-polygon-color: #4aa;
  --silkscreen-text-color: #4aa;
  --fabrication-edge-color: #907651;
  --fabrication-polygon-color: #907651;
  --fabrication-text-color: #a27c24;
  --track-color: #def5f1;
  --track-color-highlight: #D04040;
  --zone-color: #def5f1;
  --zone-color-highlight: #d0404080;
}

html,
body {
  margin: 0px;
  height: 100%;
  font-family: Verdana, sans-serif;
}

.dark.topmostdiv {
  --pcb-edge-color: #eee;
  --pad-color: #808080;
  --pin1-outline-color: #ffa800;
  --pin1-outline-color-highlight: #ccff00;
  --track-color: #42524f;
  --zone-color: #42524f;
  background-color: #252c30;
  color: #eee;
}

button {
  background-color: #eee;
  border: 1px solid #888;
  color: black;
  height: 44px;
  width: 44px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 14px;
  font-weight: bolder;
}

.dark button {
  /* This will be inverted */
  background-color: #c3b7b5;
}

button.depressed {
  background-color: #0a0;
  color: white;
}

.dark button.depressed {
  /* This will be inverted */
  background-color: #b3b;
}

button:focus {
  outline: 0;
}

button#tb-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' fill='none' stroke='%23000' stroke-width='.4' stroke-linejoin='round'/%3E%3Cpath d='M1.32 290.12h5.82M1.32 291.45h5.82' fill='none' stroke='%23000' stroke-width='.4'/%3E%3Cpath d='M4.37 292.5v4.23M.26 292.63H8.2' fill='none' stroke='%23000' stroke-width='.3'/%3E%3Ctext font-weight='700' font-size='3.17' font-family='sans-serif'%3E%3Ctspan x='1.35' y='295.73'%3EF%3C/tspan%3E%3Ctspan x='5.03' y='295.68'%3EB%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E%0A");
}

button#lr-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' fill='none' stroke='%23000' stroke-width='.4' stroke-linejoin='round'/%3E%3Cpath d='M1.06 290.12H3.7m-2.64 1.33H3.7m-2.64 1.32H3.7m-2.64 1.3H3.7m-2.64 1.33H3.7' fill='none' stroke='%23000' stroke-width='.4'/%3E%3Cpath d='M4.37 288.8v7.94m0-4.11h3.96' fill='none' stroke='%23000' stroke-width='.3'/%3E%3Ctext font-weight='700' font-size='3.17' font-family='sans-serif'%3E%3Ctspan x='5.11' y='291.96'%3EF%3C/tspan%3E%3Ctspan x='5.03' y='295.68'%3EB%3C/tspan%3E%3C/text%3E%3C/g%3E%3C/svg%3E%0A");
}

button#bom-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8.47 8.47'%3E%3Crect transform='translate(0 -288.53)' ry='1.17' y='288.8' x='.27' height='7.94' width='7.94' fill='%23f9f9f9'/%3E%3Cg transform='translate(0 -288.53)' fill='none' stroke='%23000' stroke-width='.4'%3E%3Crect width='7.94' height='7.94' x='.27' y='288.8' ry='1.17' stroke-linejoin='round'/%3E%3Cpath d='M1.59 290.12h5.29M1.59 291.45h5.33M1.59 292.75h5.33M1.59 294.09h5.33M1.59 295.41h5.33'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-grouped-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg stroke='%23000' stroke-linejoin='round' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-linecap='square' stroke-width='2' d='M6 10h4m4 0h5m4 0h3M6.1 22h3m3.9 0h5m4 0h4m-16-8h4m4 0h4'/%3E%3Cpath stroke-linecap='null' d='M5 17.5h22M5 26.6h22M5 5.5h22'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-ungrouped-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg stroke='%23000' stroke-linejoin='round' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-linecap='square' stroke-width='2' d='M6 10h4m-4 8h3m-3 8h4'/%3E%3Cpath stroke-linecap='null' d='M5 13.5h22m-22 8h22M5 5.5h22'/%3E%3C/g%3E%3C/svg%3E");
}

button#bom-netlist-btn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='32' height='32'%3E%3Cg fill='none' stroke='%23000' class='layer'%3E%3Crect width='29' height='29' x='1.5' y='1.5' stroke-width='2' fill='%23fff' rx='5' ry='5'/%3E%3Cpath stroke-width='2' d='M6 26l6-6v-8m13.8-6.3l-6 6v8'/%3E%3Ccircle cx='11.8' cy='9.5' r='2.8' stroke-width='2'/%3E%3Ccircle cx='19.8' cy='22.8' r='2.8' stroke-width='2'/%3E%3C/g%3E%3C/svg%3E");
}

button#copy {
  background-image: url("data:image/svg+xml,%3Csvg height='48' viewBox='0 0 48 48' width='48' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h48v48h-48z' fill='none'/%3E%3Cpath d='M32 2h-24c-2.21 0-4 1.79-4 4v28h4v-28h24v-4zm6 8h-22c-2.21 0-4 1.79-4 4v28c0 2.21 1.79 4 4 4h22c2.21 0 4-1.79 4-4v-28c0-2.21-1.79-4-4-4zm0 32h-22v-28h22v28z'/%3E%3C/svg%3E");
  background-position: 6px 6px;
  background-repeat: no-repeat;
  background-size: 26px 26px;
  border-radius: 6px;
  height: 40px;
  width: 40px;
  margin: 10px 5px;
}

button#copy:active {
  box-shadow: inset 0px 0px 5px #6c6c6c;
}

textarea.clipboard-temp {
  position: fixed;
  top: 0;
  left: 0;
  width: 2em;
  height: 2em;
  padding: 0;
  border: None;
  outline: None;
  box-shadow: None;
  background: transparent;
}

.left-most-button {
  border-right: 0;
  border-top-left-radius: 6px;
  border-bottom-left-radius: 6px;
}

.middle-button {
  border-right: 0;
}

.right-most-button {
  border-top-right-radius: 6px;
  border-bottom-right-radius: 6px;
}

.button-container {
  font-size: 0;
  margin: 10px 10px 10px 0px;
}

.dark .button-container {
  filter: invert(1);
}

.button-container button {
  background-size: 32px 32px;
  background-position: 5px 5px;
  background-repeat: no-repeat;
}

@media print {
  .hideonprint {
    display: none;
  }
}

canvas {
  cursor: crosshair;
}

canvas:active {
  cursor: grabbing;
}

.fileinfo {
  width: 100%;
  max-width: 1000px;
  border: none;
  padding: 5px;
}

.fileinfo .title {
  font-size: 20pt;
  font-weight: bold;
}

.fileinfo td {
  overflow: hidden;
  white-space: nowrap;
  max-width: 1px;
  width: 50%;
  text-overflow: ellipsis;
}

.bom {
  border-collapse: collapse;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 10pt;
  table-layout: fixed;
  width: 100%;
  margin-top: 1px;
  position: relative;
}

.bom th,
.bom td {
  border: 1px solid black;
  padding: 5px;
  word-wrap: break-word;
  text-align: center;
  position: relative;
}

.dark .bom th,
.dark .bom td {
  border: 1px solid #777;
}

.bom th {
  background-color: #CCCCCC;
  background-clip: padding-box;
}

.dark .bom th {
  background-color: #3b4749;
}

.bom tr.highlighted:nth-child(n) {
  background-color: #cfc;
}

.dark .bom tr.highlighted:nth-child(n) {
  background-color: #226022;
}

.bom tr:nth-child(even) {
  background-color: #f2f2f2;
}

.dark .bom tr:nth-child(even) {
  background-color: #313b40;
}

.bom tr.checked {
  color: #1cb53d;
}

.dark .bom tr.checked {
  color: #2cce54;
}

.bom tr {
  transition: background-color 0.2s;
}

.bom .numCol {
  width: 30px;
}

.bom .value {
  width: 15%;
}

.bom .quantity {
  width: 65px;
}

.bom th .sortmark {
  position: absolute;
  right: 1px;
  top: 1px;
  margin-top: -5px;
  border-width: 5px;
  border-style: solid;
  border-color: transparent transparent #221 transparent;
  transform-origin: 50% 85%;
  transition: opacity 0.2s, transform 0.4s;
}

.dark .bom th .sortmark {
  filter: invert(1);
}

.bom th .sortmark.none {
  opacity: 0;
}

.bom th .sortmark.desc {
  transform: rotate(180deg);
}

.bom th:hover .sortmark.none {
  opacity: 0.5;
}

.bom .bom-checkbox {
  width: 30px;
  position: relative;
  user-select: none;
  -moz-user-select: none;
}

.bom .bom-checkbox:before {
  content: "";
  position: absolute;
  border-width: 15px;
  border-style: solid;
  border-color: #51829f transparent transparent transparent;
  visibility: hidden;
  top: -15px;
}

.bom .bom-checkbox:after {
  content: "Double click to set/unset all";
  position: absolute;
  color: white;
  top: -35px;
  left: -26px;
  background: #51829f;
  padding: 5px 15px;
  border-radius: 8px;
  white-space: nowrap;
  visibility: hidden;
}

.bom .bom-checkbox:hover:before,
.bom .bom-checkbox:hover:after {
  visibility: visible;
  transition: visibility 0.2s linear 1s;
}

.split {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  overflow-y: auto;
  overflow-x: hidden;
  background-color: inherit;
}

.split.split-horizontal,
.gutter.gutter-horizontal {
  height: 100%;
  float: left;
}

.gutter {
  background-color: #ddd;
  background-repeat: no-repeat;
  background-position: 50%;
  transition: background-color 0.3s;
}

.dark .gutter {
  background-color: #777;
}

.gutter.gutter-horizontal {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
  cursor: ew-resize;
  width: 5px;
}

.gutter.gutter-vertical {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAFAQMAAABo7865AAAABlBMVEVHcEzMzMzyAv2sAAAAAXRSTlMAQObYZgAAABBJREFUeF5jOAMEEAIEEFwAn3kMwcB6I2AAAAAASUVORK5CYII=');
  cursor: ns-resize;
  height: 5px;
}

.searchbox {
  float: left;
  height: 40px;
  margin: 10px 5px;
  padding: 12px 32px;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 18px;
  box-sizing: border-box;
  border: 1px solid #888;
  border-radius: 6px;
  outline: none;
  background-color: #eee;
  transition: background-color 0.2s, border 0.2s;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABNklEQVQ4T8XSMUvDQBQH8P/LElFa/AIZHcTBQSz0I/gFstTBRR2KUC4ldDxw7h0Bl3RRUATxi4iiODgoiLNrbQYp5J6cpJJqomkX33Z37/14d/dIa33MzDuYI4johOI4XhyNRteO46zNYjDzAxE1yBZprVeZ+QbAUhXEGJMA2Ox2u4+fQIa0mPmsCgCgJYQ4t7lfgF0opQYAdv9ABkKI/UnOFCClXKjX61cA1osQY8x9kiRNKeV7IWA3oyhaSdP0FkAtjxhj3hzH2RBCPOf3pzqYHCilfAAX+URm9oMguPzeWSGQvUcMYC8rOBJCHBRdqxTo9/vbRHRqi8bj8XKv1xvODbiuW2u32/bvf0SlDv4XYOY7z/Mavu+nM1+BmQ+NMc0wDF/LprP0DbTWW0T00ul0nn4b7Q87+X4Qmfiq2wAAAABJRU5ErkJggg==');
  background-position: 10px 10px;
  background-repeat: no-repeat;
}

.dark .searchbox {
  background-color: #111;
  color: #eee;
}

.searchbox::placeholder {
  color: #ccc;
}

.dark .searchbox::placeholder {
  color: #666;
}

.filter {
  width: calc(60% - 64px);
}

.reflookup {
  width: calc(40% - 10px);
}

input[type=text]:focus {
  background-color: white;
  border: 1px solid #333;
}

.dark input[type=text]:focus {
  background-color: #333;
  border: 1px solid #ccc;
}

mark.highlight {
  background-color: #5050ff;
  color: #fff;
  padding: 2px;
  border-radius: 6px;
}

.dark mark.highlight {
  background-color: #76a6da;
  color: #111;
}

.menubtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36' viewBox='0 0 20 20'%3E%3Cpath fill='none' d='M0 0h20v20H0V0z'/%3E%3Cpath d='M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z'/%3E%3C/svg%3E%0A");
  background-position: center;
  background-repeat: no-repeat;
}

.statsbtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg width='36' height='36' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 6h28v24H4V6zm0 8h28v8H4m9-16v24h10V5.8' fill='none' stroke='%23000' stroke-width='2'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
}

.iobtn {
  background-color: white;
  border: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='36' height='36'%3E%3Cpath fill='none' stroke='%23000' stroke-width='2' d='M3 33v-7l6.8-7h16.5l6.7 7v7H3zM3.2 26H33M21 9l5-5.9 5 6h-2.5V15h-5V9H21zm-4.9 0l-5 6-5-6h2.5V3h5v6h2.5z'/%3E%3Cpath fill='none' stroke='%23000' d='M6.1 29.5H10'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
}

.visbtn {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24'%3E%3Cpath fill='none' stroke='%23333' d='M2.5 4.5h5v15h-5zM9.5 4.5h5v15h-5zM16.5 4.5h5v15h-5z'/%3E%3C/svg%3E");
  background-position: center;
  background-repeat: no-repeat;
  padding: 15px;
}

#vismenu-content {
  left: 0px;
  font-family: Verdana, sans-serif;
}

.dark .statsbtn,
.dark .savebtn,
.dark .menubtn,
.dark .iobtn,
.dark .visbtn {
  filter: invert(1);
}

.flexbox {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
}

.savebtn {
  background-color: #d6d6d6;
  width: auto;
  height: 30px;
  flex-grow: 1;
  margin: 5px;
  border-radius: 4px;
}

.savebtn:active {
  background-color: #0a0;
  color: white;
}

.dark .savebtn:active {
  /* This will be inverted */
  background-color: #b3b;
}

.stats {
  border-collapse: collapse;
  font-size: 12pt;
  table-layout: fixed;
  width: 100%;
  min-width: 450px;
}

.dark .stats td {
  border: 1px solid #bbb;
}

.stats td {
  border: 1px solid black;
  padding: 5px;
  word-wrap: break-word;
  text-align: center;
  position: relative;
}

#checkbox-stats div {
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

#checkbox-stats .bar {
  background-color: rgba(28, 251, 0, 0.6);
}

.menu {
  position: relative;
  display: inline-block;
  margin: 10px 10px 10px 0px;
}

.menu-content {
  font-size: 12pt !important;
  text-align: left !important;
  font-weight: normal !important;
  display: none;
  position: absolute;
  background-color: white;
  right: 0;
  min-width: 300px;
  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
  z-index: 100;
  padding: 8px;
}

.dark .menu-content {
  background-color: #111;
}

.menu:hover .menu-content {
  display: block;
}

.menu:hover .menubtn,
.menu:hover .iobtn,
.menu:hover .statsbtn {
  background-color: #eee;
}

.menu-label {
  display: inline-block;
  padding: 8px;
  border: 1px solid #ccc;
  border-top: 0;
  width: calc(100% - 18px);
}

.menu-label-top {
  border-top: 1px solid #ccc;
}

.menu-textbox {
  float: left;
  height: 24px;
  margin: 10px 5px;
  padding: 5px 5px;
  font-family: Consolas, "DejaVu Sans Mono", Monaco, monospace;
  font-size: 14px;
  box-sizing: border-box;
  border: 1px solid #888;
  border-radius: 4px;
  outline: none;
  background-color: #eee;
  transition: background-color 0.2s, border 0.2s;
  width: calc(100% - 10px);
}

.menu-textbox.invalid,
.dark .menu-textbox.invalid {
  color: red;
}

.dark .menu-textbox {
  background-color: #222;
  color: #eee;
}

.radio-container {
  margin: 4px;
}

.topmostdiv {
  width: 100%;
  height: 100%;
  background-color: white;
  transition: background-color 0.3s;
}

#top {
  height: 78px;
  border-bottom: 2px solid black;
}

.dark #top {
  border-bottom: 2px solid #ccc;
}

#dbg {
  display: block;
}

::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: #aaa;
}

::-webkit-scrollbar-thumb {
  background: #666;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555;
}

.slider {
  -webkit-appearance: none;
  width: 100%;
  margin: 3px 0;
  padding: 0;
  outline: none;
  opacity: 0.7;
  -webkit-transition: .2s;
  transition: opacity .2s;
  border-radius: 3px;
}

.slider:hover {
  opacity: 1;
}

.slider:focus {
  outline: none;
}

.slider::-webkit-slider-runnable-track {
  -webkit-appearance: none;
  width: 100%;
  height: 8px;
  background: #d3d3d3;
  border-radius: 3px;
  border: none;
}

.slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
  margin-top: -4px;
}

.dark .slider::-webkit-slider-thumb {
  background: #3d3;
}

.slider::-moz-range-thumb {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
}

.slider::-moz-range-track {
  height: 8px;
  background: #d3d3d3;
  border-radius: 3px;
}

.dark .slider::-moz-range-thumb {
  background: #3d3;
}

.slider::-ms-track {
  width: 100%;
  height: 8px;
  border-width: 3px 0;
  background: transparent;
  border-color: transparent;
  color: transparent;
  transition: opacity .2s;
}

.slider::-ms-fill-lower {
  background: #d3d3d3;
  border: none;
  border-radius: 3px;
}

.slider::-ms-fill-upper {
  background: #d3d3d3;
  border: none;
  border-radius: 3px;
}

.slider::-ms-thumb {
  width: 15px;
  height: 15px;
  border-radius: 50%;
  background: #0a0;
  cursor: pointer;
  margin: 0;
}

.shameless-plug {
  font-size: 0.8em;
  text-align: center;
  display: block;
}

a {
  color: #0278a4;
}

.dark a {
  color: #00b9fd;
}

#frontcanvas,
#backcanvas {
  touch-action: none;
}

.placeholder {
  border: 1px dashed #9f9fda !important;
  background-color: #edf2f7 !important;
}

.dragging {
  z-index: 999;
}

.dark .dragging>table>tbody>tr {
  background-color: #252c30;
}

.dark .placeholder {
  filter: invert(1);
}

.column-spacer {
  top: 0;
  left: 0;
  width: calc(100% - 4px);
  position: absolute;
  cursor: pointer;
  user-select: none;
  height: 100%;
}

.column-width-handle {
  top: 0;
  right: 0;
  width: 4px;
  position: absolute;
  cursor: col-resize;
  user-select: none;
  height: 100%;
}

.column-width-handle:hover {
  background-color: #4f99bd;
}

.help-link {
  border: 1px solid #0278a4;
  padding-inline: 0.3rem;
  border-radius: 3px;
  cursor: pointer;
}

.dark .help-link {
  border: 1px solid #00b9fd;
}

.bom-color {
  width: 20%;
}

.color-column input {
  width: 1.6rem;
  height: 1rem;
  border: 1px solid black;
  cursor: pointer;
  padding: 0;
}

/* removes default styling from input color element */
::-webkit-color-swatch {
  border: none;
}

::-webkit-color-swatch-wrapper {
  padding: 0;
}

::-moz-color-swatch,
::-moz-focus-inner {
  border: none;
}

::-moz-focus-inner {
  padding: 0;
}

  </style>
  <script type="text/javascript" >
///////////////////////////////////////////////
/*
  Split.js - v1.3.5
  MIT License
  https://github.com/nathancahill/Split.js
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Split=t()}(this,function(){"use strict";var e=window,t=e.document,n="addEventListener",i="removeEventListener",r="getBoundingClientRect",s=function(){return!1},o=e.attachEvent&&!e[n],a=["","-webkit-","-moz-","-o-"].filter(function(e){var n=t.createElement("div");return n.style.cssText="width:"+e+"calc(9px)",!!n.style.length}).shift()+"calc",l=function(e){return"string"==typeof e||e instanceof String?t.querySelector(e):e};return function(u,c){function z(e,t,n){var i=A(y,t,n);Object.keys(i).forEach(function(t){return e.style[t]=i[t]})}function h(e,t){var n=B(y,t);Object.keys(n).forEach(function(t){return e.style[t]=n[t]})}function f(e){var t=E[this.a],n=E[this.b],i=t.size+n.size;t.size=e/this.size*i,n.size=i-e/this.size*i,z(t.element,t.size,this.aGutterSize),z(n.element,n.size,this.bGutterSize)}function m(e){var t;this.dragging&&((t="touches"in e?e.touches[0][b]-this.start:e[b]-this.start)<=E[this.a].minSize+M+this.aGutterSize?t=E[this.a].minSize+this.aGutterSize:t>=this.size-(E[this.b].minSize+M+this.bGutterSize)&&(t=this.size-(E[this.b].minSize+this.bGutterSize)),f.call(this,t),c.onDrag&&c.onDrag())}function g(){var e=E[this.a].element,t=E[this.b].element;this.size=e[r]()[y]+t[r]()[y]+this.aGutterSize+this.bGutterSize,this.start=e[r]()[G]}function d(){var t=this,n=E[t.a].element,r=E[t.b].element;t.dragging&&c.onDragEnd&&c.onDragEnd(),t.dragging=!1,e[i]("mouseup",t.stop),e[i]("touchend",t.stop),e[i]("touchcancel",t.stop),t.parent[i]("mousemove",t.move),t.parent[i]("touchmove",t.move),delete t.stop,delete t.move,n[i]("selectstart",s),n[i]("dragstart",s),r[i]("selectstart",s),r[i]("dragstart",s),n.style.userSelect="",n.style.webkitUserSelect="",n.style.MozUserSelect="",n.style.pointerEvents="",r.style.userSelect="",r.style.webkitUserSelect="",r.style.MozUserSelect="",r.style.pointerEvents="",t.gutter.style.cursor="",t.parent.style.cursor=""}function S(t){var i=this,r=E[i.a].element,o=E[i.b].element;!i.dragging&&c.onDragStart&&c.onDragStart(),t.preventDefault(),i.dragging=!0,i.move=m.bind(i),i.stop=d.bind(i),e[n]("mouseup",i.stop),e[n]("touchend",i.stop),e[n]("touchcancel",i.stop),i.parent[n]("mousemove",i.move),i.parent[n]("touchmove",i.move),r[n]("selectstart",s),r[n]("dragstart",s),o[n]("selectstart",s),o[n]("dragstart",s),r.style.userSelect="none",r.style.webkitUserSelect="none",r.style.MozUserSelect="none",r.style.pointerEvents="none",o.style.userSelect="none",o.style.webkitUserSelect="none",o.style.MozUserSelect="none",o.style.pointerEvents="none",i.gutter.style.cursor=j,i.parent.style.cursor=j,g.call(i)}function v(e){e.forEach(function(t,n){if(n>0){var i=F[n-1],r=E[i.a],s=E[i.b];r.size=e[n-1],s.size=t,z(r.element,r.size,i.aGutterSize),z(s.element,s.size,i.bGutterSize)}})}function p(){F.forEach(function(e){e.parent.removeChild(e.gutter),E[e.a].element.style[y]="",E[e.b].element.style[y]=""})}void 0===c&&(c={});var y,b,G,E,w=l(u[0]).parentNode,D=e.getComputedStyle(w).flexDirection,U=c.sizes||u.map(function(){return 100/u.length}),k=void 0!==c.minSize?c.minSize:100,x=Array.isArray(k)?k:u.map(function(){return k}),L=void 0!==c.gutterSize?c.gutterSize:10,M=void 0!==c.snapOffset?c.snapOffset:30,O=c.direction||"horizontal",j=c.cursor||("horizontal"===O?"ew-resize":"ns-resize"),C=c.gutter||function(e,n){var i=t.createElement("div");return i.className="gutter gutter-"+n,i},A=c.elementStyle||function(e,t,n){var i={};return"string"==typeof t||t instanceof String?i[e]=t:i[e]=o?t+"%":a+"("+t+"% - "+n+"px)",i},B=c.gutterStyle||function(e,t){return n={},n[e]=t+"px",n;var n};"horizontal"===O?(y="width","clientWidth",b="clientX",G="left","paddingLeft"):"vertical"===O&&(y="height","clientHeight",b="clientY",G="top","paddingTop");var F=[];return E=u.map(function(e,t){var i,s={element:l(e),size:U[t],minSize:x[t]};if(t>0&&(i={a:t-1,b:t,dragging:!1,isFirst:1===t,isLast:t===u.length-1,direction:O,parent:w},i.aGutterSize=L,i.bGutterSize=L,i.isFirst&&(i.aGutterSize=L/2),i.isLast&&(i.bGutterSize=L/2),"row-reverse"===D||"column-reverse"===D)){var a=i.a;i.a=i.b,i.b=a}if(!o&&t>0){var c=C(t,O);h(c,L),c[n]("mousedown",S.bind(i)),c[n]("touchstart",S.bind(i)),w.insertBefore(c,s.element),i.gutter=c}0===t||t===u.length-1?z(s.element,s.size,L/2):z(s.element,s.size,L);var f=s.element[r]()[y];return f<s.minSize&&(s.minSize=f),t>0&&F.push(i),s}),o?{setSizes:v,destroy:p}:{setSizes:v,getSizes:function(){return E.map(function(e){return e.size})},collapse:function(e){if(e===F.length){var t=F[e-1];g.call(t),o||f.call(t,t.size-t.bGutterSize)}else{var n=F[e];g.call(n),o||f.call(n,n.aGutterSize)}},destroy:p}}});

///////////////////////////////////////////////

///////////////////////////////////////////////

///////////////////////////////////////////////

///////////////////////////////////////////////
/*!
 * PEP v0.4.3 | https://github.com/jquery/PEP
 * Copyright jQuery Foundation and other contributors | http://jquery.org/license
 */
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.PointerEventsPolyfill=b()}(this,function(){"use strict";function a(a,b){b=b||Object.create(null);var c=document.createEvent("Event");c.initEvent(a,b.bubbles||!1,b.cancelable||!1);
for(var d,e=2;e<m.length;e++)d=m[e],c[d]=b[d]||n[e];c.buttons=b.buttons||0;
var f=0;return f=b.pressure&&c.buttons?b.pressure:c.buttons?.5:0,c.x=c.clientX,c.y=c.clientY,c.pointerId=b.pointerId||0,c.width=b.width||0,c.height=b.height||0,c.pressure=f,c.tiltX=b.tiltX||0,c.tiltY=b.tiltY||0,c.twist=b.twist||0,c.tangentialPressure=b.tangentialPressure||0,c.pointerType=b.pointerType||"",c.hwTimestamp=b.hwTimestamp||0,c.isPrimary=b.isPrimary||!1,c}function b(){this.array=[],this.size=0}function c(a,b,c,d){this.addCallback=a.bind(d),this.removeCallback=b.bind(d),this.changedCallback=c.bind(d),A&&(this.observer=new A(this.mutationWatcher.bind(this)))}function d(a){return"body /shadow-deep/ "+e(a)}function e(a){return'[touch-action="'+a+'"]'}function f(a){return"{ -ms-touch-action: "+a+"; touch-action: "+a+"; }"}function g(){if(F){D.forEach(function(a){String(a)===a?(E+=e(a)+f(a)+"\n",G&&(E+=d(a)+f(a)+"\n")):(E+=a.selectors.map(e)+f(a.rule)+"\n",G&&(E+=a.selectors.map(d)+f(a.rule)+"\n"))});var a=document.createElement("style");a.textContent=E,document.head.appendChild(a)}}function h(){if(!window.PointerEvent){if(window.PointerEvent=a,window.navigator.msPointerEnabled){var b=window.navigator.msMaxTouchPoints;Object.defineProperty(window.navigator,"maxTouchPoints",{value:b,enumerable:!0}),u.registerSource("ms",_)}else Object.defineProperty(window.navigator,"maxTouchPoints",{value:0,enumerable:!0}),u.registerSource("mouse",N),void 0!==window.ontouchstart&&u.registerSource("touch",V);u.register(document)}}function i(a){if(!u.pointermap.has(a)){var b=new Error("InvalidPointerId");throw b.name="InvalidPointerId",b}}function j(a){for(var b=a.parentNode;b&&b!==a.ownerDocument;)b=b.parentNode;if(!b){var c=new Error("InvalidStateError");throw c.name="InvalidStateError",c}}function k(a){var b=u.pointermap.get(a);return 0!==b.buttons}function l(){window.Element&&!Element.prototype.setPointerCapture&&Object.defineProperties(Element.prototype,{setPointerCapture:{value:W},releasePointerCapture:{value:X},hasPointerCapture:{value:Y}})}
var m=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],n=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],o=window.Map&&window.Map.prototype.forEach,p=o?Map:b;b.prototype={set:function(a,b){return void 0===b?this["delete"](a):(this.has(a)||this.size++,void(this.array[a]=b))},has:function(a){return void 0!==this.array[a]},"delete":function(a){this.has(a)&&(delete this.array[a],this.size--)},get:function(a){return this.array[a]},clear:function(){this.array.length=0,this.size=0},forEach:function(a,b){return this.array.forEach(function(c,d){a.call(b,c,d,this)},this)}};var q=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp"],r=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0],s={pointerover:1,pointerout:1,pointerenter:1,pointerleave:1},t="undefined"!=typeof SVGElementInstance,u={pointermap:new p,eventMap:Object.create(null),captureInfo:Object.create(null),eventSources:Object.create(null),eventSourceList:[],registerSource:function(a,b){var c=b,d=c.events;d&&(d.forEach(function(a){c[a]&&(this.eventMap[a]=c[a].bind(c))},this),this.eventSources[a]=c,this.eventSourceList.push(c))},register:function(a){for(var b,c=this.eventSourceList.length,d=0;d<c&&(b=this.eventSourceList[d]);d++)
b.register.call(b,a)},unregister:function(a){for(var b,c=this.eventSourceList.length,d=0;d<c&&(b=this.eventSourceList[d]);d++)
b.unregister.call(b,a)},contains:function(a,b){try{return a.contains(b)}catch(c){return!1}},down:function(a){a.bubbles=!0,this.fireEvent("pointerdown",a)},move:function(a){a.bubbles=!0,this.fireEvent("pointermove",a)},up:function(a){a.bubbles=!0,this.fireEvent("pointerup",a)},enter:function(a){a.bubbles=!1,this.fireEvent("pointerenter",a)},leave:function(a){a.bubbles=!1,this.fireEvent("pointerleave",a)},over:function(a){a.bubbles=!0,this.fireEvent("pointerover",a)},out:function(a){a.bubbles=!0,this.fireEvent("pointerout",a)},cancel:function(a){a.bubbles=!0,this.fireEvent("pointercancel",a)},leaveOut:function(a){this.out(a),this.propagate(a,this.leave,!1)},enterOver:function(a){this.over(a),this.propagate(a,this.enter,!0)},eventHandler:function(a){if(!a._handledByPE){var b=a.type,c=this.eventMap&&this.eventMap[b];c&&c(a),a._handledByPE=!0}},listen:function(a,b){b.forEach(function(b){this.addEvent(a,b)},this)},unlisten:function(a,b){b.forEach(function(b){this.removeEvent(a,b)},this)},addEvent:function(a,b){a.addEventListener(b,this.boundHandler)},removeEvent:function(a,b){a.removeEventListener(b,this.boundHandler)},makeEvent:function(b,c){this.captureInfo[c.pointerId]&&(c.relatedTarget=null);var d=new a(b,c);return c.preventDefault&&(d.preventDefault=c.preventDefault),d._target=d._target||c.target,d},fireEvent:function(a,b){var c=this.makeEvent(a,b);return this.dispatchEvent(c)},cloneEvent:function(a){for(var b,c=Object.create(null),d=0;d<q.length;d++)b=q[d],c[b]=a[b]||r[d],!t||"target"!==b&&"relatedTarget"!==b||c[b]instanceof SVGElementInstance&&(c[b]=c[b].correspondingUseElement);return a.preventDefault&&(c.preventDefault=function(){a.preventDefault()}),c},getTarget:function(a){var b=this.captureInfo[a.pointerId];return b?a._target!==b&&a.type in s?void 0:b:a._target},propagate:function(a,b,c){for(var d=a.target,e=[];d!==document&&!d.contains(a.relatedTarget);) if(e.push(d),d=d.parentNode,!d)return;c&&e.reverse(),e.forEach(function(c){a.target=c,b.call(this,a)},this)},setCapture:function(b,c,d){this.captureInfo[b]&&this.releaseCapture(b,d),this.captureInfo[b]=c,this.implicitRelease=this.releaseCapture.bind(this,b,d),document.addEventListener("pointerup",this.implicitRelease),document.addEventListener("pointercancel",this.implicitRelease);var e=new a("gotpointercapture");e.pointerId=b,e._target=c,d||this.asyncDispatchEvent(e)},releaseCapture:function(b,c){var d=this.captureInfo[b];if(d){this.captureInfo[b]=void 0,document.removeEventListener("pointerup",this.implicitRelease),document.removeEventListener("pointercancel",this.implicitRelease);var e=new a("lostpointercapture");e.pointerId=b,e._target=d,c||this.asyncDispatchEvent(e)}},dispatchEvent:/*scope.external.dispatchEvent || */function(a){var b=this.getTarget(a);if(b)return b.dispatchEvent(a)},asyncDispatchEvent:function(a){requestAnimationFrame(this.dispatchEvent.bind(this,a))}};u.boundHandler=u.eventHandler.bind(u);var v={shadow:function(a){if(a)return a.shadowRoot||a.webkitShadowRoot},canTarget:function(a){return a&&Boolean(a.elementFromPoint)},targetingShadow:function(a){var b=this.shadow(a);if(this.canTarget(b))return b},olderShadow:function(a){var b=a.olderShadowRoot;if(!b){var c=a.querySelector("shadow");c&&(b=c.olderShadowRoot)}return b},allShadows:function(a){for(var b=[],c=this.shadow(a);c;)b.push(c),c=this.olderShadow(c);return b},searchRoot:function(a,b,c){if(a){var d,e,f=a.elementFromPoint(b,c);for(e=this.targetingShadow(f);e;){if(d=e.elementFromPoint(b,c)){var g=this.targetingShadow(d);return this.searchRoot(g,b,c)||d} e=this.olderShadow(e)} return f}},owner:function(a){
for(var b=a;b.parentNode;)b=b.parentNode;
return b.nodeType!==Node.DOCUMENT_NODE&&b.nodeType!==Node.DOCUMENT_FRAGMENT_NODE&&(b=document),b},findTarget:function(a){var b=a.clientX,c=a.clientY,d=this.owner(a.target);
return d.elementFromPoint(b,c)||(d=document),this.searchRoot(d,b,c)}},w=Array.prototype.forEach.call.bind(Array.prototype.forEach),x=Array.prototype.map.call.bind(Array.prototype.map),y=Array.prototype.slice.call.bind(Array.prototype.slice),z=Array.prototype.filter.call.bind(Array.prototype.filter),A=window.MutationObserver||window.WebKitMutationObserver,B="[touch-action]",C={subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0,attributeFilter:["touch-action"]};c.prototype={watchSubtree:function(a){
//
this.observer&&v.canTarget(a)&&this.observer.observe(a,C)},enableOnSubtree:function(a){this.watchSubtree(a),a===document&&"complete"!==document.readyState?this.installOnLoad():this.installNewSubtree(a)},installNewSubtree:function(a){w(this.findElements(a),this.addElement,this)},findElements:function(a){return a.querySelectorAll?a.querySelectorAll(B):[]},removeElement:function(a){this.removeCallback(a)},addElement:function(a){this.addCallback(a)},elementChanged:function(a,b){this.changedCallback(a,b)},concatLists:function(a,b){return a.concat(y(b))},
installOnLoad:function(){document.addEventListener("readystatechange",function(){"complete"===document.readyState&&this.installNewSubtree(document)}.bind(this))},isElement:function(a){return a.nodeType===Node.ELEMENT_NODE},flattenMutationTree:function(a){
var b=x(a,this.findElements,this);
return b.push(z(a,this.isElement)),b.reduce(this.concatLists,[])},mutationWatcher:function(a){a.forEach(this.mutationHandler,this)},mutationHandler:function(a){if("childList"===a.type){var b=this.flattenMutationTree(a.addedNodes);b.forEach(this.addElement,this);var c=this.flattenMutationTree(a.removedNodes);c.forEach(this.removeElement,this)}else"attributes"===a.type&&this.elementChanged(a.target,a.oldValue)}};var D=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]}],E="",F=window.PointerEvent||window.MSPointerEvent,G=!window.ShadowDOMPolyfill&&document.head.createShadowRoot,H=u.pointermap,I=25,J=[1,4,2,8,16],K=!1;try{K=1===new MouseEvent("test",{buttons:1}).buttons}catch(L){}
var M,N={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup","mouseover","mouseout"],register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},lastTouches:[],
isEventSimulatedFromTouch:function(a){for(var b,c=this.lastTouches,d=a.clientX,e=a.clientY,f=0,g=c.length;f<g&&(b=c[f]);f++){
var h=Math.abs(d-b.x),i=Math.abs(e-b.y);if(h<=I&&i<=I)return!0}},prepareEvent:function(a){var b=u.cloneEvent(a),c=b.preventDefault;return b.preventDefault=function(){a.preventDefault(),c()},b.pointerId=this.POINTER_ID,b.isPrimary=!0,b.pointerType=this.POINTER_TYPE,b},prepareButtonsForMove:function(a,b){var c=H.get(this.POINTER_ID);
0!==b.which&&c?a.buttons=c.buttons:a.buttons=0,b.buttons=a.buttons},mousedown:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=H.get(this.POINTER_ID),c=this.prepareEvent(a);K||(c.buttons=J[c.button],b&&(c.buttons|=b.buttons),a.buttons=c.buttons),H.set(this.POINTER_ID,a),b&&0!==b.buttons?u.move(c):u.down(c)}},mousemove:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);K||this.prepareButtonsForMove(b,a),b.button=-1,H.set(this.POINTER_ID,a),u.move(b)}},mouseup:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=H.get(this.POINTER_ID),c=this.prepareEvent(a);if(!K){var d=J[c.button];
c.buttons=b?b.buttons&~d:0,a.buttons=c.buttons}H.set(this.POINTER_ID,a),
c.buttons&=~J[c.button],0===c.buttons?u.up(c):u.move(c)}},mouseover:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);K||this.prepareButtonsForMove(b,a),b.button=-1,H.set(this.POINTER_ID,a),u.enterOver(b)}},mouseout:function(a){if(!this.isEventSimulatedFromTouch(a)){var b=this.prepareEvent(a);K||this.prepareButtonsForMove(b,a),b.button=-1,u.leaveOut(b)}},cancel:function(a){var b=this.prepareEvent(a);u.cancel(b),this.deactivateMouse()},deactivateMouse:function(){H["delete"](this.POINTER_ID)}},O=u.captureInfo,P=v.findTarget.bind(v),Q=v.allShadows.bind(v),R=u.pointermap,S=2500,T=200,U="touch-action",V={events:["touchstart","touchmove","touchend","touchcancel"],register:function(a){M.enableOnSubtree(a)},unregister:function(){},elementAdded:function(a){var b=a.getAttribute(U),c=this.touchActionToScrollType(b);c&&(a._scrollType=c,u.listen(a,this.events),
Q(a).forEach(function(a){a._scrollType=c,u.listen(a,this.events)},this))},elementRemoved:function(a){a._scrollType=void 0,u.unlisten(a,this.events),
Q(a).forEach(function(a){a._scrollType=void 0,u.unlisten(a,this.events)},this)},elementChanged:function(a,b){var c=a.getAttribute(U),d=this.touchActionToScrollType(c),e=this.touchActionToScrollType(b);
d&&e?(a._scrollType=d,Q(a).forEach(function(a){a._scrollType=d},this)):e?this.elementRemoved(a):d&&this.elementAdded(a)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y",SCROLLER:/^(?:pan-x pan-y)|(?:pan-y pan-x)|auto$/},touchActionToScrollType:function(a){var b=a,c=this.scrollTypes;return"none"===b?"none":b===c.XSCROLLER?"X":b===c.YSCROLLER?"Y":c.SCROLLER.exec(b)?"XY":void 0},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(a){return this.firstTouch===a.identifier},setPrimaryTouch:function(a){
(0===R.size||1===R.size&&R.has(1))&&(this.firstTouch=a.identifier,this.firstXY={X:a.clientX,Y:a.clientY},this.scrolling=!1,this.cancelResetClickCount())},removePrimaryPointer:function(a){a.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var a=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(a,T)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(a){var b=0;return"touchstart"!==a&&"touchmove"!==a||(b=1),b},touchToPointer:function(a){var b=this.currentTouchEvent,c=u.cloneEvent(a),d=c.pointerId=a.identifier+2;c.target=O[d]||P(c),c.bubbles=!0,c.cancelable=!0,c.detail=this.clickCount,c.button=0,c.buttons=this.typeToButtons(b.type),c.width=2*(a.radiusX||a.webkitRadiusX||0),c.height=2*(a.radiusY||a.webkitRadiusY||0),c.pressure=a.force||a.webkitForce||.5,c.isPrimary=this.isPrimaryTouch(a),c.pointerType=this.POINTER_TYPE,
c.altKey=b.altKey,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey;
var e=this;return c.preventDefault=function(){e.scrolling=!1,e.firstXY=null,b.preventDefault()},c},processTouches:function(a,b){var c=a.changedTouches;this.currentTouchEvent=a;for(var d,e=0;e<c.length;e++)d=c[e],b.call(this,this.touchToPointer(d))},
shouldScroll:function(a){if(this.firstXY){var b,c=a.currentTarget._scrollType;if("none"===c)
b=!1;else if("XY"===c)
b=!0;else{var d=a.changedTouches[0],e=c,f="Y"===c?"X":"Y",g=Math.abs(d["client"+e]-this.firstXY[e]),h=Math.abs(d["client"+f]-this.firstXY[f]);
b=g>=h}return this.firstXY=null,b}},findTouch:function(a,b){for(var c,d=0,e=a.length;d<e&&(c=a[d]);d++)if(c.identifier===b)return!0},
vacuumTouches:function(a){var b=a.touches;
if(R.size>=b.length){var c=[];R.forEach(function(a,d){
if(1!==d&&!this.findTouch(b,d-2)){var e=a.out;c.push(e)}},this),c.forEach(this.cancelOut,this)}},touchstart:function(a){this.vacuumTouches(a),this.setPrimaryTouch(a.changedTouches[0]),this.dedupSynthMouse(a),this.scrolling||(this.clickCount++,this.processTouches(a,this.overDown))},overDown:function(a){R.set(a.pointerId,{target:a.target,out:a,outTarget:a.target}),u.enterOver(a),u.down(a)},touchmove:function(a){this.scrolling||(this.shouldScroll(a)?(this.scrolling=!0,this.touchcancel(a)):(a.preventDefault(),this.processTouches(a,this.moveOverOut)))},moveOverOut:function(a){var b=a,c=R.get(b.pointerId);
if(c){var d=c.out,e=c.outTarget;u.move(b),d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,
d.target=e,b.target?(u.leaveOut(d),u.enterOver(b)):(
b.target=e,b.relatedTarget=null,this.cancelOut(b))),c.out=b,c.outTarget=b.target}},touchend:function(a){this.dedupSynthMouse(a),this.processTouches(a,this.upOut)},upOut:function(a){this.scrolling||(u.up(a),u.leaveOut(a)),this.cleanUpPointer(a)},touchcancel:function(a){this.processTouches(a,this.cancelOut)},cancelOut:function(a){u.cancel(a),u.leaveOut(a),this.cleanUpPointer(a)},cleanUpPointer:function(a){R["delete"](a.pointerId),this.removePrimaryPointer(a)},
dedupSynthMouse:function(a){var b=N.lastTouches,c=a.changedTouches[0];
if(this.isPrimaryTouch(c)){
var d={x:c.clientX,y:c.clientY};b.push(d);var e=function(a,b){var c=a.indexOf(b);c>-1&&a.splice(c,1)}.bind(null,b,d);setTimeout(e,S)}}};M=new c(V.elementAdded,V.elementRemoved,V.elementChanged,V);var W,X,Y,Z=u.pointermap,$=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,_={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture"],register:function(a){u.listen(a,this.events)},unregister:function(a){u.unlisten(a,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(a){var b=a;return $&&(b=u.cloneEvent(a),b.pointerType=this.POINTER_TYPES[a.pointerType]),b},cleanup:function(a){Z["delete"](a)},MSPointerDown:function(a){Z.set(a.pointerId,a);var b=this.prepareEvent(a);u.down(b)},MSPointerMove:function(a){var b=this.prepareEvent(a);u.move(b)},MSPointerUp:function(a){var b=this.prepareEvent(a);u.up(b),this.cleanup(a.pointerId)},MSPointerOut:function(a){var b=this.prepareEvent(a);u.leaveOut(b)},MSPointerOver:function(a){var b=this.prepareEvent(a);u.enterOver(b)},MSPointerCancel:function(a){var b=this.prepareEvent(a);u.cancel(b),this.cleanup(a.pointerId)},MSLostPointerCapture:function(a){var b=u.makeEvent("lostpointercapture",a);u.dispatchEvent(b)},MSGotPointerCapture:function(a){var b=u.makeEvent("gotpointercapture",a);u.dispatchEvent(b)}},aa=window.navigator;aa.msPointerEnabled?(W=function(a){i(a),j(this),k(a)&&(u.setCapture(a,this,!0),this.msSetPointerCapture(a))},X=function(a){i(a),u.releaseCapture(a,!0),this.msReleasePointerCapture(a)}):(W=function(a){i(a),j(this),k(a)&&u.setCapture(a,this)},X=function(a){i(a),u.releaseCapture(a)}),Y=function(a){return!!u.captureInfo[a]},g(),h(),l();var ba={dispatcher:u,Installer:c,PointerEvent:a,PointerMap:p,targetFinding:v};return ba});

///////////////////////////////////////////////

///////////////////////////////////////////////
var config = {"dark_mode": false, "show_pads": true, "show_fabrication": false, "show_silkscreen": true, "highlight_pin1": "none", "redraw_on_drag": true, "board_rotation": 0, "checkboxes": "Sourced,Placed", "bom_view": "left-right", "layer_view": "FB", "offset_back_rotation": false, "kicad_text_formatting": true, "fields": ["Value", "Footprint"]}
///////////////////////////////////////////////

///////////////////////////////////////////////
var pcbdata = {"edges_bbox": {"minx": 71.355122, "miny": 91.326995, "maxx": 124.110478, "maxy": 149.459017}, "edges": [{"type": "arc", "start": [97.7328, 140.459], "radius": 8.975017, "startangle": 60.0, "endangle": 120.0, "width": 0.05}, {"type": "segment", "start": [75.867624, 138.198593], "end": [93.2453, 148.231598], "width": 0.05}, {"type": "arc", "start": [115.1105, 110.36], "radius": 8.974989, "startangle": -60.0, "endangle": 0.0, "width": 0.05}, {"type": "segment", "start": [124.085478, 130.426011], "end": [124.085478, 110.36], "width": 0.05}, {"type": "segment", "start": [119.597976, 102.587421], "end": [102.2203, 92.554416], "width": 0.05}, {"type": "arc", "start": [97.7328, 100.327], "radius": 8.975005, "startangle": -120.0, "endangle": -60.0, "width": 0.05}, {"type": "segment", "start": [102.220302, 148.231597], "end": [119.597978, 138.19859], "width": 0.05}, {"type": "arc", "start": [115.1105, 130.426], "radius": 8.974978, "startangle": 0.0, "endangle": 60.0, "width": 0.05}, {"type": "arc", "start": [80.3551, 110.36], "radius": 8.974978, "startangle": 180.0, "endangle": 240.0, "width": 0.05}, {"type": "segment", "start": [93.245298, 92.554417], "end": [75.867622, 102.587423], "width": 0.05}, {"type": "segment", "start": [71.380122, 110.360003], "end": [71.380122, 130.426014], "width": 0.05}, {"type": "arc", "start": [80.3551, 130.426], "radius": 8.975001, "startangle": 120.0, "endangle": 180.0, "width": 0.05}], "drawings": {"silkscreen": {"F": [{"type": "segment", "start": [77.957628, 118.438408], "end": [75.310161, 118.44664], "width": 0.12}, {"type": "segment", "start": [78.223894, 122.821601], "end": [75.290818, 122.83118], "width": 0.12}, {"type": "arc", "start": [75.35584, 120.63915], "radius": 2.192987, "startangle": 91.7, "endangle": 268.81, "width": 0.12}, {"type": "circle", "start": [73.946157, 119.639], "radius": 0.223604, "width": 0.12}, {"thickness": 0.15, "svgpath": "M90.983801,122.813776L90.626658,123.432365L90.51399,123.532274L90.383892,123.567133L90.236365,123.536944L90.153886,123.489325M91.308587,124.155992L90.896194,123.917896L91.396194,123.051871M92.139753,124.525894L92.074704,124.543324L91.927177,124.513135L91.844698,124.465516L91.74479,124.352848L91.70993,124.22275L91.71631,124.116462L91.770309,123.927695L91.841737,123.803977L91.978215,123.66283L92.067073,123.604161L92.197171,123.569301L92.344698,123.59949L92.427177,123.647109L92.527085,123.759777L92.544515,123.824826M93.210723,124.09949L92.853581,124.71808L92.740913,124.817988L92.610815,124.852848L92.463288,124.822658L92.380809,124.775039M93.53551,125.441706L93.123117,125.203611L93.623117,124.337586M94.366676,125.811609L94.301627,125.829038L94.1541,125.798849L94.071621,125.75123L93.971713,125.638562L93.936853,125.508465L93.943233,125.402176L93.997232,125.21341L94.06866,125.089692L94.205137,124.948544L94.293996,124.889875L94.424093,124.855015L94.571621,124.885205L94.6541,124.932824L94.754008,125.045492L94.771438,125.11054M95.437646,125.385205L95.080503,126.003794L94.967836,126.103703L94.837738,126.138562L94.690211,126.108373L94.607732,126.060754M95.762433,126.727421L95.35004,126.489325L95.85004,125.6233M96.593599,127.097323L96.52855,127.114753L96.381022,127.084564L96.298544,127.036945L96.198635,126.924277L96.163776,126.794179L96.170156,126.687891L96.224154,126.499124L96.295583,126.375406L96.43206,126.234259L96.520919,126.17559L96.651016,126.14073L96.798544,126.170919L96.881022,126.218538L96.980931,126.331206L96.998361,126.396255M97.664569,126.670919L97.307426,127.289509L97.194758,127.389417L97.064661,127.424277L96.917133,127.394087L96.834655,127.346468M97.989355,128.013135L97.576962,127.77504L98.076962,126.909015M98.820521,128.383038L98.755473,128.400467L98.607945,128.370278L98.525467,128.322659L98.425558,128.209991L98.390699,128.079894L98.397078,127.973605L98.451077,127.784839L98.522506,127.661121L98.658983,127.519973L98.747842,127.461304L98.877939,127.426444L99.025467,127.456634L99.107945,127.504253L99.207854,127.616921L99.225283,127.681969"}, {"thickness": 0.3, "svgpath": "M74.68654,115.579726L74.68654,114.151155M75.543683,115.86544L72.543683,114.86544L75.543683,113.86544"}, {"thickness": 0.3, "svgpath": "M121.743683,106.741155L118.743683,106.741155L118.743683,106.026869L118.88654,105.598298L119.172254,105.312583L119.457968,105.169726L120.029397,105.026869L120.457968,105.026869L121.029397,105.169726L121.315111,105.312583L121.600826,105.598298L121.743683,106.026869L121.743683,106.741155"}, {"thickness": 0.3, "svgpath": "M74.507415,108.825811L74.949997,108.735243L75.145143,108.787533L75.411719,108.96354L75.626004,109.334694L75.645143,109.653558L75.592854,109.848705L75.416847,110.11528L74.427104,110.686708L72.927104,108.088632L73.793129,107.588632L74.111993,107.569493L74.30714,107.621782L74.573715,107.797789L74.716572,108.045225L74.735711,108.36409L74.683422,108.559236L74.507415,108.825811L73.641389,109.325811"}, {"thickness": 0.3, "svgpath": "M99.552163,146.777239L98.686138,146.277239M97.900424,147.638136L99.400424,145.04006L100.637603,145.754345"}, {"thickness": 0.3, "svgpath": "M106.64232,105.840702L106.447173,105.892991L106.004591,105.802423L105.757155,105.659566L105.45743,105.321563L105.352851,104.93127L105.37199,104.612405L105.533987,104.046105L105.748272,103.674951L106.157705,103.251508L106.42428,103.075501L106.814573,102.970922L107.257155,103.06149L107.504591,103.204347L107.804316,103.542351L107.856605,103.737497"}, {"thickness": 0.3, "svgpath": "M119.255107,135.264382L120.121132,134.764382M121.278,135.910993L120.040821,136.625279L118.540821,134.027202L119.778,133.312917"}, {"thickness": 0.15, "svgpath": "M103.390272,95.597702L103.448941,95.686561L103.613898,95.781799L103.720186,95.788178L103.809045,95.729509L103.832854,95.68827L103.839234,95.581982L103.780565,95.493124L103.656847,95.421695L103.598178,95.332837L103.604557,95.226548L103.628367,95.185309L103.717225,95.12664L103.823513,95.13302L103.947231,95.204448L104.0059,95.293307M104.479924,96.281799L104.979924,95.415773M104.503733,96.240559L104.397445,96.23418L104.232488,96.138942L104.173819,96.050083L104.156389,95.985034L104.162769,95.878746L104.305626,95.63131L104.394484,95.572641L104.459533,95.555212L104.565821,95.561591L104.730778,95.656829L104.789447,95.745688M105.22565,95.942544L104.72565,96.808569M105.201841,95.983783L105.308129,95.990163L105.473086,96.085401L105.531755,96.174259L105.549185,96.239308L105.542805,96.345596L105.399948,96.593032L105.31109,96.651701L105.246041,96.669131L105.139753,96.662751L104.974795,96.567513L104.916126,96.478655M106.085296,96.548832L106.026627,96.459974L106.009197,96.394925L106.015577,96.288637L106.039386,96.247397L106.128245,96.188728L106.193293,96.171298L106.299582,96.177678L106.464539,96.272916L106.523208,96.361775L106.540638,96.426823L106.534258,96.533112L106.510448,96.574351L106.42159,96.63302L106.356541,96.65045L106.250253,96.64407L106.085296,96.548832L105.979008,96.542452L105.913959,96.559882L105.825101,96.618551L105.729862,96.783508L105.723483,96.889796L105.740912,96.954845L105.799582,97.043704L105.964539,97.138942L106.070827,97.145321L106.135876,97.127892L106.224734,97.069223L106.319972,96.904265L106.326352,96.797977L106.308922,96.732928L106.250253,96.64407M106.418171,97.400846L107.205137,97.085401M106.751504,96.823496L106.871804,97.662751M107.11924,97.805608L107.906205,97.490163M107.452573,97.228258L107.572872,98.067513M108.093263,97.928075L108.753092,98.309027M109.346162,99.091323L109.608067,98.63769L109.614446,98.531402L109.555777,98.442544L109.39082,98.347306L109.284532,98.340926M109.369971,99.050083L109.263683,99.043704L109.057487,98.924656L108.998818,98.835798L109.005197,98.72951L109.052817,98.647031L109.141675,98.588362L109.247963,98.594742L109.45416,98.713789L109.560448,98.720169M110.091888,98.752068L109.758555,99.329418M110.044269,98.834546L110.109318,98.817117L110.215606,98.823496L110.339324,98.894925L110.397993,98.983783L110.391614,99.090071L110.129709,99.543704M110.895826,99.931036L110.789538,99.924656L110.624581,99.829418L110.565911,99.74056L110.572291,99.634272L110.762767,99.304357L110.851626,99.245688L110.957914,99.252068L111.122871,99.347306L111.18154,99.436164L111.17516,99.542452L111.127541,99.624931L110.667529,99.469314M111.28441,100.210371L111.617743,99.63302M111.570124,99.715499L111.635173,99.698069L111.741461,99.704449L111.865179,99.775877L111.923848,99.864736L111.917468,99.971024L111.655563,100.424656M111.917468,99.971024L112.006326,99.912355L112.112615,99.918735L112.236332,99.990163L112.295002,100.079021L112.288622,100.18531L112.026717,100.638942M112.562828,100.948466L112.504159,100.859607L112.486729,100.794558L112.493109,100.68827L112.635966,100.440834L112.724824,100.382165L112.789873,100.364736L112.896161,100.371115L113.019879,100.442544L113.078548,100.531402L113.095978,100.596451L113.089598,100.702739L112.946741,100.950175L112.857883,101.008844L112.792834,101.026274L112.686546,101.019894L112.562828,100.948466M113.222657,101.329418L113.55599,100.752068M113.508371,100.834546L113.57342,100.817117L113.679708,100.823496L113.803426,100.894925L113.862095,100.983783L113.855715,101.090071L113.59381,101.543704M113.855715,101.090071L113.944574,101.031402L114.050862,101.037782L114.17458,101.109211L114.233249,101.198069L114.226869,101.304357L113.964964,101.757989M114.731081,102.145321L114.624793,102.138942L114.459836,102.043704L114.401166,101.954845L114.407546,101.848557L114.598022,101.518643L114.686881,101.459974L114.793169,101.466353L114.958126,101.561591L115.016795,101.65045L115.010415,101.756738L114.962796,101.839216L114.502784,101.6836M115.32928,101.775877L115.659194,101.966353M115.619665,101.558631L115.191093,102.300938L115.184713,102.407226L115.243382,102.496085L115.325861,102.543704M115.968261,102.859607L115.861972,102.853228L115.697015,102.75799L115.638346,102.669131L115.644726,102.562843L115.835202,102.232929L115.92406,102.17426L116.030349,102.180639L116.195306,102.275877L116.253975,102.364736L116.247595,102.471024L116.199976,102.553502L115.739964,102.397886M116.356844,103.138942L116.690178,102.561592M116.594939,102.726549L116.683798,102.66788L116.748847,102.65045L116.855135,102.65683L116.937613,102.704449M106.087423,99.068957L106.420757,98.491607M106.325518,98.656564L106.414377,98.597895L106.479426,98.580465L106.585714,98.586845L106.668192,98.634464M106.977258,99.527718L106.87097,99.521338L106.706013,99.4261L106.647344,99.337242L106.653724,99.230953L106.8442,98.901039L106.933058,98.84237L107.039346,98.84875L107.204304,98.943988L107.262973,99.032846L107.256593,99.139134L107.208974,99.221613L106.748962,99.065996M107.616697,99.182083L107.48956,99.878481L108.02909,99.420178M108.025671,100.188005L108.359005,99.610655M108.525671,99.32198L108.460622,99.339409L108.478052,99.404458L108.543101,99.387028L108.525671,99.32198L108.478052,99.404458M108.420634,100.361051L108.479303,100.449909L108.64426,100.545148L108.750548,100.551527L108.839407,100.492858L108.863216,100.451619L108.869596,100.345331L108.810927,100.256472L108.687209,100.185044L108.62854,100.096185L108.63492,99.989897L108.658729,99.948658L108.747588,99.889989L108.853876,99.896369L108.977594,99.967797L109.036263,100.056656M109.139132,100.830862L109.472466,100.253512M109.639132,99.964837L109.574083,99.982266L109.591513,100.047315L109.656562,100.029885L109.639132,99.964837L109.591513,100.047315M109.675243,101.140385L109.616574,101.051527L109.599144,100.986478L109.605524,100.88019L109.748381,100.632754L109.837239,100.574085L109.902288,100.556655L110.008576,100.563035L110.132294,100.634464L110.190963,100.723322L110.208393,100.788371L110.202013,100.894659L110.059156,101.142095L109.970298,101.200764L109.905249,101.218194L109.798961,101.211814L109.675243,101.140385M110.668405,100.943988L110.335072,101.521338M110.620786,101.026466L110.685835,101.009036L110.792123,101.015416L110.915841,101.086845L110.97451,101.175703L110.96813,101.281991L110.706225,101.735624M112.189589,101.547315L112.254638,101.529885L112.360926,101.536265L112.567123,101.655313L112.625792,101.744171L112.643222,101.80922L112.636842,101.915508L112.589223,101.997987L112.476555,102.097895L111.695969,102.307052L112.23208,102.616576"}, {"thickness": 0.06, "svgpath": "M100.369639,97.216812L100.126782,97.637453L100.073467,97.672655L100.034437,97.683112L99.970664,97.679285L99.896434,97.636427L99.861232,97.583112M100.183924,97.538479L100.120152,97.534651L100.021177,97.477508L99.985976,97.424193L99.975518,97.385164L99.979346,97.321391L100.06506,97.172929L100.118375,97.137728L100.157404,97.12727L100.221177,97.131098L100.320152,97.188241L100.355353,97.241556M100.417074,97.706079L100.617074,97.359669M100.717074,97.186464L100.678045,97.196922L100.688503,97.235951L100.727532,97.225494L100.717074,97.186464L100.688503,97.235951M100.790279,97.459669L100.988228,97.573955M100.96451,97.329321L100.707367,97.774706L100.703539,97.838479L100.738741,97.891794L100.788228,97.920365M100.961433,98.020365L101.261433,97.50075M101.184125,98.148936L101.341268,97.876757L101.345096,97.812984L101.309894,97.759669L101.235664,97.716812L101.171891,97.712984L101.132861,97.723442M101.854253,98.073955L101.654253,98.420365M101.631561,97.945383L101.474418,98.217563L101.47059,98.281336L101.505792,98.334651L101.580022,98.377508L101.643795,98.381336L101.682825,98.370878M101.901689,98.563222L102.201689,98.043607M102.087403,98.241555L102.151176,98.245383L102.25015,98.302526L102.285352,98.355841L102.29581,98.39487L102.291982,98.458643L102.206267,98.607105L102.152952,98.642306L102.113923,98.652764L102.05015,98.648936L101.951176,98.591793L101.915975,98.538478M102.400388,98.785163L102.410846,98.824193L102.371817,98.83465L102.361359,98.795621L102.400388,98.785163L102.371817,98.83465M102.85623,99.081335L102.792457,99.077507L102.693483,99.020365L102.658282,98.96705L102.647824,98.92802L102.651652,98.864247L102.737366,98.715786L102.790681,98.680584L102.82971,98.670127L102.893483,98.673954L102.992457,98.731097L103.027659,98.784412M103.138868,99.277508L103.103666,99.224193L103.093208,99.185163L103.097036,99.12139L103.182751,98.972929L103.236066,98.937727L103.275095,98.92727L103.338868,98.931097L103.413099,98.973955L103.4483,99.02727L103.458758,99.066299L103.45493,99.130072L103.369216,99.278533L103.315901,99.313735L103.276871,99.324193L103.213099,99.320365L103.138868,99.277508M103.534765,99.506079L103.734765,99.159669M103.706194,99.209156L103.745223,99.198698L103.808996,99.202526L103.883227,99.245383L103.918428,99.298698L103.9146,99.362471L103.757457,99.63465M103.9146,99.362471L103.967915,99.32727L104.031688,99.331097L104.105919,99.373955L104.14112,99.42727L104.137292,99.491042L103.98015,99.763222M104.913025,99.576006L104.081926,99.98694M104.771944,100.220364L105.071944,99.700749M104.957658,99.898698L105.021431,99.902526L105.120405,99.959669L105.155607,100.012984L105.166065,100.052013L105.162237,100.115786L105.076522,100.264247L105.023207,100.299449L104.984178,100.309907L104.920405,100.306079L104.821431,100.248936L104.78623,100.195621M105.464764,100.620364L105.621907,100.348185L105.625735,100.284412L105.590533,100.231097L105.491559,100.173954L105.427786,100.170126M105.47905,100.595621L105.415277,100.591793L105.291559,100.520364L105.256357,100.467049L105.260185,100.403277L105.288757,100.353789L105.342072,100.318588L105.405845,100.322416L105.529563,100.393844L105.593335,100.397672M105.7122,100.763221L105.9122,100.416811M105.855057,100.515786L105.908372,100.480584L105.947401,100.470126L106.011174,100.473954L106.060661,100.502526M106.256559,101.077507L106.413702,100.805328L106.41753,100.741555L106.382328,100.68824L106.283354,100.631097L106.219581,100.627269M106.270845,101.052764L106.207072,101.048936L106.083354,100.977507L106.048152,100.924192L106.05198,100.86042L106.080552,100.810932L106.133867,100.775731L106.19764,100.779559L106.321357,100.850987L106.38513,100.854815M106.629764,100.831097L106.827713,100.945383M106.503995,101.220364L106.761137,100.77498L106.814452,100.739779L106.878225,100.743606L106.927713,100.772178M107.02361,101.520364L107.180753,101.248185L107.18458,101.184412L107.149379,101.131097L107.050405,101.073954L106.986632,101.070126M107.037895,101.495621L106.974123,101.491793L106.850405,101.420364L106.815203,101.367049L106.819031,101.303277L106.847602,101.253789L106.900917,101.218588L106.96469,101.222416L107.088408,101.293844L107.152181,101.297672M107.48328,101.752764L107.419507,101.748936L107.320533,101.691793L107.285331,101.638478L107.289159,101.574705L107.403445,101.376756L107.45676,101.341555L107.520533,101.345383L107.619507,101.402526L107.654708,101.455841L107.650881,101.519613L107.622309,101.569101L107.346302,101.475731M107.790661,101.963222L107.755459,101.909907L107.759287,101.846134L108.01643,101.400749M108.674049,101.747434L107.842951,102.158368M108.52251,102.352764L108.557712,102.406079L108.656686,102.463222L108.720459,102.467049L108.773774,102.431848L108.78806,102.407104L108.791888,102.343331L108.756686,102.290016L108.682455,102.247159L108.647254,102.193844L108.651082,102.130071L108.665368,102.105328L108.718683,102.070126L108.782455,102.073954L108.856686,102.116811L108.891888,102.170126M109.176301,102.763221L109.476301,102.243606M109.190587,102.738478L109.126814,102.73465L109.02784,102.677507L108.992638,102.624192L108.98218,102.585163L108.986008,102.52139L109.071723,102.372928L109.125038,102.337727L109.164067,102.327269L109.22784,102.331097L109.326814,102.38824L109.362015,102.441555M109.623737,102.559668L109.323737,103.079284M109.609451,102.584412L109.673224,102.58824L109.772198,102.645383L109.8074,102.698698L109.817858,102.737727L109.81403,102.8015L109.728316,102.949961L109.675001,102.985163L109.635971,102.995621L109.572198,102.991793L109.473224,102.93465L109.438023,102.881335M110.139524,102.923441L110.104323,102.870126L110.093865,102.831097L110.097693,102.767324L110.111978,102.74258L110.165293,102.707379L110.204323,102.696921L110.268096,102.700749L110.36707,102.757892L110.402271,102.811207L110.412729,102.850236L110.408901,102.914009L110.394616,102.938753L110.341301,102.973954L110.302271,102.984412L110.238499,102.980584L110.139524,102.923441L110.075751,102.919613L110.036722,102.930071L109.983407,102.965273L109.926264,103.064247L109.922436,103.12802L109.932894,103.167049L109.968096,103.220364L110.06707,103.277507L110.130843,103.281335L110.169872,103.270877L110.223187,103.235676L110.28033,103.136701L110.284158,103.072928L110.2737,103.033899L110.238499,102.980584M110.33925,103.43465L110.811429,103.245383M110.53925,103.08824L110.611429,103.591793M110.75989,103.677507L111.23207,103.48824M110.95989,103.331097L111.03207,103.83465M111.344304,103.750987L111.740201,103.979558M112.096043,104.448935L112.253186,104.176756L112.257014,104.112983L112.221813,104.059668L112.122838,104.002525L112.059066,103.998697M112.110329,104.424192L112.046556,104.420364L111.922838,104.348935L111.887637,104.29562L111.891465,104.231848L111.920036,104.18236L111.973351,104.147159L112.037124,104.150987L112.160842,104.222415L112.224615,104.226243M112.543479,104.245382L112.343479,104.591792M112.514908,104.294869L112.553937,104.284412L112.61771,104.288239L112.691941,104.331097L112.727142,104.384412L112.723314,104.448184L112.566171,104.720364M113.025842,104.952763L112.962069,104.948935L112.863094,104.891792L112.827893,104.838477L112.831721,104.774705L112.946006,104.576756L112.999321,104.541554L113.063094,104.545382L113.162069,104.602525L113.19727,104.65584L113.193442,104.719613L113.164871,104.7691L112.888864,104.67573M113.258992,105.120364L113.458992,104.773954M113.43042,104.823441L113.46945,104.812983L113.533223,104.816811L113.607453,104.859668L113.642655,104.912983L113.638827,104.976756L113.481684,105.248935M113.638827,104.976756L113.692142,104.941555L113.755915,104.945382L113.830146,104.98824L113.865347,105.041555L113.861519,105.105327L113.704376,105.377507M114.026043,105.563221L113.990842,105.509906L113.980384,105.470877L113.984211,105.407104L114.069926,105.258642L114.123241,105.223441L114.16227,105.212983L114.226043,105.216811L114.300274,105.259668L114.335475,105.312983L114.345933,105.352012L114.342105,105.415785L114.256391,105.564247L114.203076,105.599448L114.164047,105.609906L114.100274,105.606078L114.026043,105.563221M114.42194,105.791792L114.62194,105.445382M114.593369,105.494869L114.632398,105.484412L114.696171,105.488239L114.770402,105.531097L114.805603,105.584412L114.801775,105.648184L114.644632,105.920364M114.801775,105.648184L114.85509,105.612983L114.918863,105.616811L114.993094,105.659668L115.028295,105.712983L115.024468,105.776756L114.867325,106.048935M115.326995,106.281335L115.263222,106.277507L115.164248,106.220364L115.129046,106.167049L115.132874,106.103276L115.24716,105.905327L115.300475,105.870126L115.364248,105.873954L115.463222,105.931097L115.498423,105.984412L115.494596,106.048184L115.466024,106.097672L115.190017,106.004302M115.685914,106.059668L115.883863,106.173954M115.860145,105.92932L115.603002,106.374705L115.599175,106.438478L115.634376,106.491793L115.683863,106.520364M116.069302,106.709906L116.00553,106.706078L115.906555,106.648935L115.871354,106.59562L115.875182,106.531848L115.989467,106.333899L116.042782,106.298697L116.106555,106.302525L116.20553,106.359668L116.240731,106.412983L116.236903,106.476756L116.208332,106.526243L115.932325,106.432873M116.302453,106.877507L116.502453,106.531097M116.44531,106.630071L116.498625,106.59487L116.537654,106.584412L116.601427,106.58824L116.650914,106.616811"}, {"thickness": 0.15, "svgpath": "M108.470063,142.914855L109.101003,143.474342L108.931943,142.648188M109.562883,143.207675L109.296217,142.745795M109.162883,142.514855L109.148939,142.566894L109.200978,142.580838L109.214922,142.528799L109.162883,142.514855L109.200978,142.580838M109.626131,142.555319L109.892797,143.017199M109.664226,142.621302L109.67817,142.569263L109.725105,142.498176L109.824079,142.441033L109.90911,142.43593L109.980197,142.482865L110.18972,142.845771"}, {"thickness": 0.15, "svgpath": "M110.850287,142.420405L110.968309,142.396254L111.133266,142.301015L111.180202,142.229929L111.194145,142.17789L111.189042,142.092859L111.150946,142.026876L111.07986,141.979941L111.027821,141.965997L110.94279,141.971101L110.791777,142.0143L110.706746,142.019404L110.654707,142.00546L110.58362,141.958525L110.545525,141.892542L110.540421,141.807511L110.554365,141.755472L110.601301,141.684386L110.766258,141.589148L110.88428,141.564996M111.562155,142.053396L111.162155,141.360576L111.327113,141.265338L111.445134,141.241186L111.549213,141.269074L111.620299,141.316009L111.729481,141.428928L111.786624,141.527902L111.829823,141.678915L111.834927,141.763946L111.807039,141.868024L111.727113,141.958158L111.562155,142.053396M112.107698,141.474495L112.437613,141.284019M112.156001,141.710539L111.986941,140.884385L112.617881,141.443872"}, {"thickness": 0.15, "svgpath": "M113.179475,141.07565L113.297497,141.051499L113.462454,140.956261L113.50939,140.885174L113.523334,140.833135L113.51823,140.748105L113.480135,140.682122L113.409048,140.635187L113.357009,140.621243L113.271978,140.626347L113.120965,140.669546L113.035934,140.674649L112.983895,140.660706L112.912809,140.61377L112.874713,140.547787L112.86961,140.462757L112.883553,140.410718L112.930489,140.339631L113.095446,140.244393L113.213468,140.220242M114.249146,140.414087L114.235202,140.466127L114.155275,140.556261L114.089292,140.594356L113.97127,140.618507L113.867192,140.59062L113.796105,140.543685L113.686923,140.430766L113.629781,140.331792L113.586582,140.180779L113.581478,140.095748L113.609365,139.99167L113.689292,139.901536L113.755275,139.863441L113.873297,139.839289L113.925336,139.853233M114.914078,140.118166L114.584164,140.308642L114.184164,139.615821"}, {"thickness": 0.15, "svgpath": "M106.456845,144.121176L106.371815,144.12628L106.27284,144.183423L106.192914,144.273557L106.165026,144.377635L106.17013,144.462666L106.213329,144.613679L106.270472,144.712653L106.379654,144.825572L106.45074,144.872507L106.554818,144.900394L106.67284,144.876243L106.738823,144.838148L106.81875,144.748014L106.832694,144.695974L106.69936,144.465034L106.567395,144.541225M107.167712,144.590529L106.767712,143.897708L107.563609,144.361957L107.163609,143.669137M107.893524,144.171481L107.493524,143.478661L107.658481,143.383423L107.776503,143.359271L107.880581,143.387159L107.951668,143.434094L108.060849,143.547013L108.117992,143.645987L108.161191,143.797L108.166295,143.882031L108.138407,143.986109L108.058481,144.076243L107.893524,144.171481"}, {"thickness": 0.15, "svgpath": "M102.097763,111.537569L102.356582,110.571643M102.233335,111.031607L102.785293,111.179504M102.649721,111.685465L102.90854,110.719539M103.276512,110.818137L103.874466,110.978358L103.453893,111.260057L103.591882,111.297031L103.67155,111.367677L103.705222,111.425998L103.726569,111.530316L103.664945,111.760298L103.5943,111.839966L103.535978,111.873638L103.431661,111.894985L103.155682,111.821037L103.076014,111.750391L103.042342,111.69207", "ref": 1}, {"thickness": 0.15, "svgpath": "M102.529519,130.52026L102.529519,129.52026M102.529519,129.99645L103.100947,129.99645M103.100947,130.52026L103.100947,129.52026M104.100947,130.52026L103.529519,130.52026M103.815233,130.52026L103.815233,129.52026L103.719995,129.663117L103.624757,129.758355L103.529519,129.805974", "ref": 1}, {"thickness": 0.15, "svgpath": "M87.586242,120.497347L86.586242,120.497347M87.062432,120.497347L87.062432,119.925919M87.586242,119.925919L86.586242,119.925919M86.68148,119.497347L86.633861,119.449728L86.586242,119.35449L86.586242,119.116395L86.633861,119.021157L86.68148,118.973538L86.776718,118.925919L86.871956,118.925919L87.014813,118.973538L87.586242,119.544966L87.586242,118.925919", "ref": 1}, {"thickness": 0.15, "svgpath": "M89.26748,131.29084L89.367389,131.403508L89.573585,131.522555L89.679873,131.528935L89.744922,131.511505L89.83378,131.452836L89.881399,131.370357L89.887779,131.264069L89.870349,131.19902L89.81168,131.110162L89.670533,130.973685L89.611864,130.884826L89.594434,130.819778L89.600814,130.713489L89.648433,130.631011L89.737291,130.572342L89.80234,130.554912L89.908628,130.561292L90.114824,130.680339L90.214733,130.793007M90.109696,131.832079L90.609696,130.966054L90.815893,131.085101L90.915801,131.197769L90.950661,131.327867L90.944281,131.434155L90.890282,131.622922L90.818853,131.74664L90.682376,131.887787L90.593518,131.946456L90.46342,131.981316L90.315893,131.951127L90.109696,131.832079M90.975722,132.332079L91.475722,131.466054L91.805636,131.65653L91.864305,131.745388L91.881735,131.810437L91.875355,131.916725L91.803926,132.040443L91.715068,132.099112L91.650019,132.116542L91.543731,132.110162L91.213817,131.919686M92.259268,131.918435L92.795379,132.227958L92.316228,132.391206L92.439946,132.462635L92.498615,132.551493L92.516045,132.616542L92.509665,132.72283L92.390617,132.929027L92.301759,132.987696L92.23671,133.005125L92.130422,132.998746L91.882986,132.855888L91.824317,132.76703L91.806887,132.701981", "ref": 1}, {"thickness": 0.15, "svgpath": "M87.751526,134.704404L88.784219,134.915729L88.08486,134.127054M89.117552,134.338379L88.251527,133.838379L88.370574,133.632182L88.483242,133.532274L88.61334,133.497414L88.719628,133.503794L88.908395,133.557793L89.032113,133.629221L89.17326,133.765699L89.231929,133.854557L89.266789,133.984655L89.2366,134.132182L89.117552,134.338379M89.617552,133.472353L88.751527,132.972353L88.870574,132.766157L88.983242,132.666248L89.11334,132.631389L89.219628,132.637769L89.408395,132.691767L89.532113,132.763196L89.67326,132.899673L89.731929,132.988532L89.766789,133.118629L89.7366,133.266157L89.617552,133.472353"}, {"thickness": 0.15, "svgpath": "M89.858149,135.150864L89.769291,135.209533L89.697862,135.333251L89.667673,135.480778L89.702533,135.610876L89.761202,135.699734L89.902349,135.836212L90.026067,135.90764L90.214834,135.961639L90.321122,135.968019L90.45122,135.933159L90.563888,135.833251L90.611507,135.750772L90.641696,135.603245L90.624266,135.538196L90.335591,135.371529L90.240353,135.536487M90.92103,135.214661L90.055005,134.714661L91.206745,134.71979L90.340719,134.21979M91.44484,134.307397L90.578815,133.807397L90.697862,133.6012L90.81053,133.501292L90.940628,133.466432L91.046916,133.472812L91.235683,133.526811L91.359401,133.598239L91.500548,133.734717L91.559217,133.823575L91.594077,133.953673L91.563888,134.1012L91.44484,134.307397"}, {"thickness": 0.15, "svgpath": "M92.088032,137.098117L92.2007,136.998208L92.319748,136.792012L92.326127,136.685724L92.308698,136.620675L92.250029,136.531817L92.16755,136.484198L92.061262,136.477818L91.996213,136.495248L91.907355,136.553917L91.770877,136.695064L91.682019,136.753733L91.61697,136.771163L91.510682,136.764784L91.428203,136.717164L91.369534,136.628306L91.352104,136.563257L91.358484,136.456969L91.477532,136.250773L91.5902,136.150864M92.629271,136.255901L91.763246,135.755901L91.882294,135.549704L91.994962,135.449796L92.125059,135.414936L92.231347,135.421316L92.420114,135.475315L92.543832,135.546744L92.68498,135.683221L92.743649,135.772079L92.778508,135.902177L92.748319,136.049704L92.629271,136.255901M92.858026,135.288258L93.096121,134.875865M93.057843,135.513593L92.358484,134.724918L93.391176,134.936243"}, {"thickness": 0.15, "svgpath": "M86.89188,134.098117L87.004548,133.998208L87.123596,133.792012L87.129975,133.685724L87.112546,133.620675L87.053877,133.531817L86.971398,133.484198L86.86511,133.477818L86.800061,133.495248L86.711203,133.553917L86.574725,133.695064L86.485867,133.753733L86.420818,133.771163L86.31453,133.764783L86.232051,133.717164L86.173382,133.628306L86.155952,133.563257L86.162332,133.456969L86.28138,133.250773L86.394048,133.150864M87.636355,132.71341L87.653785,132.778459L87.623596,132.925986L87.575977,133.008465L87.463309,133.108373L87.333211,133.143233L87.226923,133.136853L87.038156,133.082854L86.914438,133.011426L86.773291,132.874948L86.714622,132.78609L86.679762,132.655992L86.709951,132.508465L86.75757,132.425986L86.870238,132.326078L86.935287,132.308648M88.171215,131.977482L87.933119,132.389875L87.067094,131.889875"}, {"type": "segment", "start": [83.793283, 120.530646], "end": [74.793283, 136.119103], "width": 0.12}, {"type": "segment", "start": [83.793283, 120.530646], "end": [104.577893, 132.530646], "width": 0.12}, {"type": "segment", "start": [104.577893, 132.530646], "end": [95.577893, 148.119103], "width": 0.12}, {"type": "segment", "start": [95.577893, 148.119103], "end": [74.793283, 136.119103], "width": 0.12}, {"thickness": 0.15, "svgpath": "M121.24591,122.454544L120.769719,122.787877M121.24591,123.025972L120.24591,123.025972L120.24591,122.64502L120.293529,122.549782L120.341148,122.502163L120.436386,122.454544L120.579243,122.454544L120.674481,122.502163L120.7221,122.549782L120.769719,122.64502L120.769719,123.025972M120.24591,122.12121L120.24591,121.454544L121.24591,121.883115", "ref": 1}, {"type": "segment", "start": [118.475773, 122.525195], "end": [118.475773, 122.071067], "width": 0.12}, {"type": "segment", "start": [119.945773, 122.525195], "end": [119.945773, 122.071067], "width": 0.12}, {"thickness": 0.15, "svgpath": "M102.986686,137.250894L102.921637,137.233464L102.808969,137.133556L102.76135,137.051077L102.731161,136.90355L102.766021,136.773452L102.82469,136.684594L102.965837,136.548116L103.089555,136.476688L103.278322,136.422689L103.38461,136.416309L103.514708,136.451169L103.627376,136.551077L103.674995,136.633556L103.705184,136.781083L103.687754,136.846132M103.9369,137.087188L104.270233,137.664538L103.189922,137.793385", "ref": 1}, {"type": "segment", "start": [104.943363, 138.943201], "end": [105.08963, 139.196543], "width": 0.12}, {"type": "segment", "start": [104.060018, 139.453201], "end": [104.206285, 139.706543], "width": 0.12}, {"thickness": 0.15, "svgpath": "M121.248083,118.534265L120.771892,118.867598M121.248083,119.105693L120.248083,119.105693L120.248083,118.724741L120.295702,118.629503L120.343321,118.581884L120.438559,118.534265L120.581416,118.534265L120.676654,118.581884L120.724273,118.629503L120.771892,118.724741L120.771892,119.105693M120.676654,117.962836L120.629035,118.058074L120.581416,118.105693L120.486178,118.153312L120.438559,118.153312L120.343321,118.105693L120.295702,118.058074L120.248083,117.962836L120.248083,117.77236L120.295702,117.677122L120.343321,117.629503L120.438559,117.581884L120.486178,117.581884L120.581416,117.629503L120.629035,117.677122L120.676654,117.77236L120.676654,117.962836L120.724273,118.058074L120.771892,118.105693L120.86713,118.153312L121.057606,118.153312L121.152844,118.105693L121.200464,118.058074L121.248083,117.962836L121.248083,117.77236L121.200464,117.677122L121.152844,117.629503L121.057606,117.581884L120.86713,117.581884L120.771892,117.629503L120.724273,117.677122L120.676654,117.77236", "ref": 1}, {"type": "segment", "start": [119.946809, 118.139695], "end": [119.946809, 118.593823], "width": 0.12}, {"type": "segment", "start": [118.476809, 118.139695], "end": [118.476809, 118.593823], "width": 0.12}, {"thickness": 0.15, "svgpath": "M102.02934,123.777303L102.730408,124.182065L102.836696,124.188445L102.901745,124.171015L102.990603,124.112346L103.085841,123.947388L103.092221,123.8411L103.074791,123.776052L103.016122,123.687193L102.315054,123.282431M103.681079,122.916406L103.395365,123.411278M103.538222,123.163842L102.672197,122.663842L102.748296,122.817749L102.783155,122.947847L102.776775,123.054135", "ref": 1}, {"type": "segment", "start": [102.176622, 122.982565], "end": [103.976622, 119.864874], "width": 0.12}, {"type": "segment", "start": [102.176622, 122.982565], "end": [101.076622, 124.887821], "width": 0.12}, {"type": "segment", "start": [96.31363, 119.597565], "end": [97.41363, 117.692309], "width": 0.12}, {"type": "segment", "start": [96.31363, 119.597565], "end": [95.21363, 121.502821], "width": 0.12}, {"thickness": 0.15, "svgpath": "M93.054316,120.922021L93.071745,120.98707L93.041556,121.134597L92.993937,121.217076L92.881269,121.316984L92.751172,121.351844L92.644883,121.345464L92.456117,121.291465L92.332399,121.220037L92.191251,121.083559L92.132582,120.994701L92.097722,120.864603L92.127912,120.717076L92.175531,120.634597L92.288199,120.534689L92.353247,120.517259M92.437436,120.180965L92.746959,119.644854L92.910207,120.124005L92.981636,120.000287L93.070494,119.941618L93.135543,119.924189L93.241831,119.930568L93.448028,120.049616L93.506697,120.138474L93.524126,120.203523L93.517747,120.309811L93.374889,120.557247L93.286031,120.615916L93.220982,120.633346", "ref": 1}, {"type": "segment", "start": [94.667879, 118.438086], "end": [94.521612, 118.691428], "width": 0.12}, {"type": "segment", "start": [93.784534, 117.928086], "end": [93.638267, 118.181428], "width": 0.12}, {"thickness": 0.15, "svgpath": "M89.481649,102.438457L88.954878,102.192731M88.986777,102.724172L88.486777,101.858146L88.816692,101.66767L88.92298,101.66129L88.988029,101.67872L89.076887,101.737389L89.148316,101.861107L89.154695,101.967395L89.137265,102.032444L89.078596,102.121302L88.748682,102.311779M89.765196,101.120051L89.352803,101.358146L89.549659,101.794349L89.567088,101.7293L89.625757,101.640442L89.831954,101.521394L89.938242,101.515014L90.003291,101.532444L90.092149,101.591113L90.211197,101.79731L90.217577,101.903598L90.200147,101.968647L90.141478,102.057505L89.935281,102.176553L89.828993,102.182932L89.763944,102.165503", "ref": 1}, {"type": "segment", "start": [89.13772, 101.055295], "end": [88.744434, 101.282359], "width": 0.12}, {"type": "segment", "start": [88.40272, 99.782237], "end": [88.009434, 100.009301], "width": 0.12}, {"thickness": 0.15, "svgpath": "M84.278286,139.380066L84.227706,138.801007M83.783414,139.094352L84.283414,138.228327L84.613329,138.418803L84.671998,138.507661L84.689427,138.57271L84.683048,138.678998L84.611619,138.802716L84.522761,138.861385L84.457712,138.878815L84.351424,138.872435L84.021509,138.681959M85.066961,138.680708L85.603072,138.990231L85.123921,139.153479L85.247639,139.224908L85.306308,139.313766L85.323737,139.378815L85.317358,139.485103L85.19831,139.6913L85.109452,139.749969L85.044403,139.767398L84.938115,139.761019L84.690679,139.618161L84.63201,139.529303L84.61458,139.464254", "ref": 1}, {"type": "segment", "start": [85.64406, 136.883681], "end": [86.037346, 137.110745], "width": 0.12}, {"type": "segment", "start": [84.90906, 138.156739], "end": [85.302346, 138.383803], "width": 0.12}, {"thickness": 0.15, "svgpath": "M94.400992,121.699521L94.418421,121.76457L94.388232,121.912097L94.340613,121.994576L94.227945,122.094484L94.097848,122.129344L93.991559,122.122964L93.802793,122.068965L93.679075,121.997537L93.537927,121.861059L93.479258,121.772201L93.444398,121.642103L93.474588,121.494576L93.522207,121.412097L93.634875,121.312189L93.699923,121.294759M94.959661,120.922354L94.673946,121.417226M94.816804,121.16979L93.950778,120.66979L94.026877,120.823697L94.061737,120.953795L94.055357,121.060083", "ref": 1}, {"type": "segment", "start": [96.018886, 119.218085], "end": [95.872619, 119.471427], "width": 0.12}, {"type": "segment", "start": [95.135541, 118.708085], "end": [94.989274, 118.961427], "width": 0.12}, {"thickness": 0.15, "svgpath": "M87.742385,141.380067L87.691805,140.801008M87.247513,141.094353L87.747513,140.228328L88.077428,140.418804L88.136097,140.507662L88.153526,140.572711L88.147147,140.678999L88.075718,140.802717L87.98686,140.861386L87.921811,140.878816L87.815523,140.872436L87.485608,140.68196M88.818026,141.231288L88.484692,141.808639M88.802305,140.782326L88.238966,141.281868L88.775077,141.591392", "ref": 1}, {"type": "segment", "start": [88.766445, 140.383805], "end": [88.373159, 140.156741], "width": 0.12}, {"type": "segment", "start": [89.501445, 139.110747], "end": [89.108159, 138.883683], "width": 0.12}, {"thickness": 0.15, "svgpath": "M79.471882,122.062752L79.471882,121.062752L79.709977,121.062752L79.852834,121.110371L79.948072,121.205609L79.995691,121.300847L80.04331,121.491323L80.04331,121.63418L79.995691,121.824656L79.948072,121.919894L79.852834,122.015133L79.709977,122.062752L79.471882,122.062752M80.424263,121.15799L80.471882,121.110371L80.56712,121.062752L80.805215,121.062752L80.900453,121.110371L80.948072,121.15799L80.995691,121.253228L80.995691,121.348466L80.948072,121.491323L80.376644,122.062752L80.995691,122.062752", "ref": 1}, {"type": "segment", "start": [79.062244, 122.629456], "end": [79.062244, 120.709456], "width": 0.12}, {"type": "segment", "start": [79.062244, 120.709456], "end": [76.202244, 120.709456], "width": 0.12}, {"type": "segment", "start": [76.202244, 122.629456], "end": [79.062244, 122.629456], "width": 0.12}, {"thickness": 0.15, "svgpath": "M96.348928,115.482253L96.283879,115.499682L96.136352,115.469493L96.053873,115.421874L95.953965,115.309206L95.919105,115.179109L95.925485,115.07282L95.979484,114.884054L96.050912,114.760336L96.18739,114.619188L96.276248,114.560519L96.406346,114.525659L96.553873,114.555849L96.636352,114.603468L96.73626,114.716136L96.75369,114.781184M97.083604,114.971661L97.148653,114.954231L97.254941,114.960611L97.461138,115.079658L97.519807,115.168517L97.537237,115.233565L97.530857,115.339854L97.483238,115.422332L97.37057,115.522241L96.589984,115.731398L97.126095,116.040922", "ref": 1}, {"type": "segment", "start": [95.811063, 117.005335], "end": [95.557721, 116.859068], "width": 0.12}, {"type": "segment", "start": [96.321063, 116.12199], "end": [96.067721, 115.975723], "width": 0.12}, {"thickness": 0.15, "svgpath": "M104.835094,134.161771L105.239856,134.86284L105.328714,134.921509L105.393763,134.938938L105.500051,134.932559L105.665009,134.837321L105.723678,134.748462L105.741107,134.683413L105.734728,134.577125L105.329966,133.876057M105.748739,133.74425L105.766168,133.679201L105.824837,133.590343L106.031034,133.471295L106.137322,133.464915L106.202371,133.482345L106.291229,133.541014L106.338848,133.623493L106.369038,133.77102L106.15988,134.551606L106.695991,134.242082", "ref": 1}, {"type": "segment", "start": [106.85002, 139.732298], "end": [109.967711, 137.932298], "width": 0.12}, {"type": "arc", "start": [107.483865, 137.230151], "radius": 2.600001, "startangle": 105.0, "endangle": 240.0, "width": 0.12}, {"type": "arc", "start": [107.483865, 137.230151], "radius": 2.6, "startangle": -120.0, "endangle": 15.0, "width": 0.12}, {"thickness": 0.15, "svgpath": "M102.097916,141.600634L102.032867,141.583204L101.920199,141.483296L101.87258,141.400817L101.842391,141.25329L101.877251,141.123192L101.93592,141.034334L102.077067,140.897856L102.200785,140.826428L102.389552,140.772429L102.49584,140.766049L102.625938,140.800909L102.738606,140.900817L102.786225,140.983296L102.816414,141.130823L102.798984,141.195872M103.310034,141.89056L103.214796,141.725603L103.125938,141.666934L103.060889,141.649504L102.889552,141.638454L102.700785,141.692453L102.370871,141.882929L102.312202,141.971788L102.294772,142.036836L102.301152,142.143125L102.39639,142.308082L102.485248,142.366751L102.550297,142.384181L102.656585,142.377801L102.862782,142.258753L102.921451,142.169895L102.938881,142.104846L102.932501,141.998558L102.837263,141.833601L102.748404,141.774932L102.683356,141.757502L102.577067,141.763882", "ref": 1}, {"type": "segment", "start": [103.589592, 139.721888], "end": [103.735859, 139.97523], "width": 0.12}, {"type": "segment", "start": [102.706247, 140.231888], "end": [102.852514, 140.48523], "width": 0.12}, {"thickness": 0.15, "svgpath": "M112.053548,122.192426L112.101167,122.049569L112.101167,121.811474L112.053548,121.716236L112.005928,121.668617L111.91069,121.620998L111.815452,121.620998L111.720214,121.668617L111.672595,121.716236L111.624976,121.811474L111.577357,122.00195L111.529738,122.097188L111.482119,122.144807L111.386881,122.192426L111.291643,122.192426L111.196405,122.144807L111.148786,122.097188L111.101167,122.00195L111.101167,121.763855L111.148786,121.620998M112.101167,121.192426L111.101167,121.192426L111.101167,120.954331L111.148786,120.811474L111.244024,120.716236L111.339262,120.668617L111.529738,120.620998L111.672595,120.620998L111.863071,120.668617L111.958309,120.716236L112.053548,120.811474L112.101167,120.954331L112.101167,121.192426M112.101167,120.192426L111.101167,120.192426L111.101167,119.811474L111.148786,119.716236L111.196405,119.668617L111.291643,119.620998L111.4345,119.620998L111.529738,119.668617L111.577357,119.716236L111.624976,119.811474L111.624976,120.192426M112.101167,118.668617L112.101167,119.240045M112.101167,118.954331L111.101167,118.954331L111.244024,119.049569L111.339262,119.144807L111.386881,119.240045", "ref": 1}, {"thickness": 0.15, "svgpath": "M112.751754,117.850639L112.894611,117.898258L113.132706,117.898258L113.227944,117.850639L113.275563,117.803019L113.323182,117.707781L113.323182,117.612543L113.275563,117.517305L113.227944,117.469686L113.132706,117.422067L112.94223,117.374448L112.846992,117.326829L112.799373,117.27921L112.751754,117.183972L112.751754,117.088734L112.799373,116.993496L112.846992,116.945877L112.94223,116.898258L113.180325,116.898258L113.323182,116.945877M113.751754,117.898258L113.751754,116.898258L113.989849,116.898258L114.132706,116.945877L114.227944,117.041115L114.275563,117.136353L114.323182,117.326829L114.323182,117.469686L114.275563,117.660162L114.227944,117.7554L114.132706,117.850639L113.989849,117.898258L113.751754,117.898258M114.704135,117.612543L115.180325,117.612543M114.608897,117.898258L114.94223,116.898258L115.275563,117.898258"}, {"thickness": 0.15, "svgpath": "M112.751754,123.850638L112.894611,123.898257L113.132706,123.898257L113.227944,123.850638L113.275563,123.803018L113.323182,123.70778L113.323182,123.612542L113.275563,123.517304L113.227944,123.469685L113.132706,123.422066L112.94223,123.374447L112.846992,123.326828L112.799373,123.279209L112.751754,123.183971L112.751754,123.088733L112.799373,122.993495L112.846992,122.945876L112.94223,122.898257L113.180325,122.898257L113.323182,122.945876M114.323182,123.803018L114.275563,123.850638L114.132706,123.898257L114.037468,123.898257L113.894611,123.850638L113.799373,123.755399L113.751754,123.660161L113.704135,123.469685L113.704135,123.326828L113.751754,123.136352L113.799373,123.041114L113.894611,122.945876L114.037468,122.898257L114.132706,122.898257L114.275563,122.945876L114.323182,122.993495M115.227944,123.898257L114.751754,123.898257L114.751754,122.898257"}, {"thickness": 0.15, "svgpath": "M113.323182,118.945877L113.227944,118.898258L113.085087,118.898258L112.94223,118.945877L112.846992,119.041115L112.799373,119.136353L112.751754,119.326829L112.751754,119.469686L112.799373,119.660162L112.846992,119.7554L112.94223,119.850639L113.085087,119.898258L113.180325,119.898258L113.323182,119.850639L113.370801,119.803019L113.370801,119.469686L113.180325,119.469686M113.799373,119.898258L113.799373,118.898258L114.370801,119.898258L114.370801,118.898258M114.846992,119.898258L114.846992,118.898258L115.085087,118.898258L115.227944,118.945877L115.323182,119.041115L115.370801,119.136353L115.41842,119.326829L115.41842,119.469686L115.370801,119.660162L115.323182,119.7554L115.227944,119.850639L115.085087,119.898258L114.846992,119.898258"}, {"thickness": 0.15, "svgpath": "M112.656516,120.898257L112.989849,121.898257L113.323182,120.898257M113.656516,121.898257L113.656516,120.898257L113.894611,120.898257L114.037468,120.945876L114.132706,121.041114L114.180325,121.136352L114.227944,121.326828L114.227944,121.469685L114.180325,121.660161L114.132706,121.755399L114.037468,121.850638L113.894611,121.898257L113.656516,121.898257M114.656516,121.898257L114.656516,120.898257L114.894611,120.898257L115.037468,120.945876L115.132706,121.041114L115.180325,121.136352L115.227944,121.326828L115.227944,121.469685L115.180325,121.660161L115.132706,121.755399L115.037468,121.850638L114.894611,121.898257L114.656516,121.898257"}, {"type": "segment", "start": [104.917094, 132.307683], "end": [122.917094, 132.307683], "width": 0.12}, {"type": "segment", "start": [104.917094, 132.307683], "end": [104.917094, 108.307683], "width": 0.12}, {"type": "segment", "start": [104.917094, 108.307683], "end": [122.917094, 108.307683], "width": 0.12}, {"type": "segment", "start": [122.917094, 108.307683], "end": [122.917094, 132.307683], "width": 0.12}, {"thickness": 0.15, "svgpath": "M113.671901,135.678566L113.145131,135.43284M113.17703,135.96428L112.67703,135.098255L113.006944,134.907779L113.113232,134.901399L113.178281,134.918829L113.267139,134.977498L113.338568,135.101216L113.344948,135.207504L113.327518,135.272553L113.268849,135.361411L112.938934,135.551887M114.496687,135.202375L114.001816,135.48809M114.249252,135.345233L113.749252,134.479207L113.738202,134.650544L113.703342,134.780642L113.644673,134.8695M115.321474,134.726185L114.826602,135.011899M115.074038,134.869042L114.574038,134.003017L114.562988,134.174354L114.528128,134.304451L114.469459,134.39331", "ref": 1}, {"type": "segment", "start": [114.811567, 137.846486], "end": [114.584503, 137.4532], "width": 0.12}, {"type": "segment", "start": [116.084625, 137.111486], "end": [115.857561, 136.7182], "width": 0.12}, {"thickness": 0.15, "svgpath": "M117.700562,135.17622L117.946288,134.64945M117.414848,134.681349L118.280873,134.181349L118.471349,134.511263L118.477729,134.617551L118.460299,134.6826L118.40163,134.771458L118.277912,134.842887L118.171624,134.849267L118.106575,134.831837L118.017717,134.773168L117.827241,134.443253M118.176753,136.001006L117.891038,135.506135M118.033895,135.753571L118.899921,135.253571L118.728584,135.242521L118.598486,135.207661L118.509628,135.148992M119.352302,136.037117L119.399921,136.119596L119.406301,136.225884L119.388871,136.290933L119.330202,136.379791L119.189054,136.516269L118.982857,136.635316L118.794091,136.689315L118.687803,136.695695L118.622754,136.678265L118.533895,136.619596L118.486276,136.537117L118.479897,136.430829L118.497326,136.365781L118.555995,136.276922L118.697143,136.140445L118.90334,136.021397L119.092106,135.967398L119.198395,135.961019L119.263443,135.978448L119.352302,136.037117", "ref": 1}, {"type": "segment", "start": [116.540563, 136.840308], "end": [116.313499, 136.447022], "width": 0.12}, {"type": "segment", "start": [117.813621, 136.105308], "end": [117.586557, 135.712022], "width": 0.12}, {"thickness": 0.15, "svgpath": "M80.04331,119.987451L79.709977,119.51126M79.471882,119.987451L79.471882,118.987451L79.852834,118.987451L79.948072,119.03507L79.995691,119.082689L80.04331,119.177927L80.04331,119.320784L79.995691,119.416022L79.948072,119.463641L79.852834,119.51126L79.471882,119.51126M80.424263,119.082689L80.471882,119.03507L80.56712,118.987451L80.805215,118.987451L80.900453,119.03507L80.948072,119.082689L80.995691,119.177927L80.995691,119.273165L80.948072,119.416022L80.376644,119.987451L80.995691,119.987451", "ref": 1}, {"type": "segment", "start": [77.26705, 120.355001], "end": [76.812922, 120.355001], "width": 0.12}, {"type": "segment", "start": [77.26705, 118.885001], "end": [76.812922, 118.885001], "width": 0.12}, {"thickness": 0.15, "svgpath": "M104.536414,143.073119L103.917825,143.430262L103.770297,143.460451L103.6402,143.425591L103.527532,143.325683L103.479913,143.243204M104.668222,143.491892L104.73327,143.509322L104.822129,143.567991L104.941176,143.774187L104.947556,143.880475L104.930126,143.945524L104.871457,144.034382L104.788979,144.082002L104.641451,144.112191L103.860865,143.903033L104.170389,144.439144", "ref": 1}, {"type": "segment", "start": [105.761966, 144.286199], "end": [105.096966, 143.134385], "width": 0.12}, {"type": "segment", "start": [106.91378, 143.621199], "end": [105.761966, 144.286199], "width": 0.12}, {"type": "segment", "start": [108.013632, 142.986199], "end": [114.664707, 139.146199], "width": 0.12}, {"type": "segment", "start": [108.013632, 142.986199], "end": [106.683632, 140.682571], "width": 0.12}, {"type": "segment", "start": [114.664707, 139.146199], "end": [113.334707, 136.842571], "width": 0.12}, {"type": "segment", "start": [106.683632, 140.682571], "end": [113.334707, 136.842571], "width": 0.12}, {"thickness": 0.15, "svgpath": "M89.582784,109.797683L89.730312,109.767494L89.936508,109.648447L89.995177,109.559588L90.012607,109.494539L90.006227,109.388251L89.958608,109.305773L89.86975,109.247104L89.804701,109.229674L89.698413,109.236054L89.509646,109.290052L89.403358,109.296432L89.338309,109.279002L89.249451,109.220333L89.201832,109.137855L89.195452,109.031566L89.212882,108.966518L89.271551,108.877659L89.477747,108.758612L89.625275,108.728422M90.472619,109.338923L89.972619,108.472897L90.178816,108.35385L90.326343,108.32366L90.456441,108.35852L90.545299,108.417189L90.681777,108.558337L90.753205,108.682055L90.807204,108.870821L90.813584,108.97711L90.778724,109.107207L90.678816,109.219875L90.472619,109.338923M91.338645,108.838923L90.838645,107.972897L91.168559,107.782421L91.274847,107.776041L91.339896,107.793471L91.428754,107.85214L91.500183,107.975858L91.506563,108.082146L91.489133,108.147195L91.430464,108.236053L91.100549,108.42653M91.71105,107.579185L91.728479,107.514137L91.787149,107.425278L91.993345,107.306231L92.099633,107.299851L92.164682,107.317281L92.25354,107.37595L92.301159,107.458428L92.331349,107.605956L92.122191,108.386542L92.658302,108.077018", "ref": 1}, {"thickness": 0.15, "svgpath": "M91.340887,103.943662L91.371076,104.09119L91.490124,104.297386L91.578982,104.356055L91.644031,104.373485L91.750319,104.367105L91.832798,104.319486L91.891467,104.230628L91.908897,104.165579L91.902517,104.059291L91.848518,103.870524L91.842138,103.764236L91.859568,103.699187L91.918237,103.610329L92.000716,103.56271L92.107004,103.55633L92.172053,103.57376L92.260911,103.632429L92.379959,103.838625L92.410148,103.986153M92.167841,105.28075L92.102792,105.26332L91.990124,105.163412L91.942505,105.080933L91.912316,104.933406L91.947175,104.803308L92.005844,104.71445L92.146992,104.577972L92.27071,104.506544L92.459477,104.452545L92.565765,104.446165L92.695862,104.481025L92.80853,104.580933L92.856149,104.663412L92.886339,104.810939L92.868909,104.875988M92.537743,106.111916L92.299648,105.699523L93.165673,105.199523"}, {"thickness": 0.15, "svgpath": "M90.386003,104.384993L89.686644,105.173668L90.719336,104.962343M90.019977,105.751018L90.886003,105.251018L91.00505,105.457215L91.03524,105.604742L91.00038,105.73484L90.941711,105.823698L90.800563,105.960176L90.676845,106.031604L90.488079,106.085603L90.38179,106.091983L90.251693,106.057123L90.139025,105.957215L90.019977,105.751018M90.519977,106.617044L91.386003,106.117044L91.50505,106.32324L91.53524,106.470768L91.50038,106.600865L91.441711,106.689724L91.300563,106.826201L91.176845,106.89763L90.988079,106.951629L90.88179,106.958008L90.751693,106.923149L90.639025,106.82324L90.519977,106.617044"}, {"thickness": 0.15, "svgpath": "M88.946048,105.986152L88.939668,105.879864L88.868239,105.756146L88.755571,105.656238L88.625474,105.621378L88.519186,105.627758L88.330419,105.681757L88.206701,105.753185L88.065553,105.889663L88.006884,105.978521L87.972025,106.108619L88.002214,106.256146L88.049833,106.338625L88.162501,106.438533L88.22755,106.455963L88.516225,106.289296L88.420987,106.124339M88.359357,106.874736L89.225382,106.374736L88.645071,107.369607L89.511096,106.869607M88.883166,107.782L89.749192,107.282L89.868239,107.488197L89.898429,107.635724L89.863569,107.765822L89.8049,107.85468L89.663752,107.991158L89.540034,108.062586L89.351268,108.116585L89.244979,108.122965L89.114882,108.088105L89.002214,107.988197L88.883166,107.782"}, {"thickness": 0.15, "svgpath": "M86.144734,106.943662L86.174923,107.09119L86.293971,107.297386L86.382829,107.356055L86.447878,107.373485L86.554166,107.367105L86.636645,107.319486L86.695314,107.230628L86.712744,107.165579L86.706364,107.059291L86.652365,106.870524L86.645985,106.764236L86.663415,106.699187L86.722084,106.610329L86.804563,106.56271L86.910851,106.55633L86.9759,106.57376L87.064758,106.632429L87.183806,106.838625L87.213995,106.986153M86.603495,107.833497L87.46952,107.333497L87.588568,107.539694L87.618757,107.687221L87.583897,107.817319L87.525228,107.906177L87.384081,108.042654L87.260363,108.114083L87.071596,108.168082L86.965308,108.174462L86.83521,108.139602L86.722542,108.039694L86.603495,107.833497M87.327121,108.515426L87.565216,108.927819M87.032066,108.575805L88.064758,108.36448L87.3654,109.153155"}, {"type": "segment", "start": [104.566117, 108.075046], "end": [95.566117, 92.486589], "width": 0.12}, {"type": "segment", "start": [104.566117, 108.075046], "end": [83.781507, 120.075046], "width": 0.12}, {"type": "segment", "start": [83.781507, 120.075046], "end": [74.781507, 104.486589], "width": 0.12}, {"type": "segment", "start": [74.781507, 104.486589], "end": [95.566117, 92.486589], "width": 0.12}, {"thickness": 0.15, "svgpath": "M86.012896,104.484407L85.486125,104.238681M85.518024,104.770122L85.018024,103.904096L85.347939,103.71362L85.454227,103.70724L85.519276,103.72467L85.608134,103.783339L85.679563,103.907057L85.685942,104.013345L85.668512,104.078394L85.609843,104.167252L85.279929,104.357729M86.255203,103.189811L86.090246,103.285049L86.031577,103.373907L86.014147,103.438956L86.003097,103.610293L86.057096,103.79906L86.247572,104.128974L86.336431,104.187643L86.401479,104.205073L86.507768,104.198693L86.672725,104.103455L86.731394,104.014597L86.748824,103.949548L86.742444,103.84326L86.623396,103.637063L86.534538,103.578394L86.469489,103.560964L86.363201,103.567344L86.198244,103.662582L86.139575,103.751441L86.122145,103.816489L86.128525,103.922778", "ref": 1}, {"type": "segment", "start": [84.616197, 101.98656], "end": [85.009483, 101.759496], "width": 0.12}, {"type": "segment", "start": [85.351197, 103.259618], "end": [85.744483, 103.032554], "width": 0.12}], "B": [{"thickness": 0.15, "svgpath": "M107.77208,121.058271L107.77208,121.772556L107.819699,121.915413L107.914937,122.010652L108.057794,122.058271L108.153032,122.058271M106.77208,122.058271L107.343508,122.058271M107.057794,122.058271L107.057794,121.058271L107.153032,121.201128L107.24827,121.296366L107.343508,121.343985", "ref": 1}, {"type": "segment", "start": [109.203747, 129.073452], "end": [108.381277, 129.073452], "width": 0.12}, {"type": "segment", "start": [109.203747, 124.058452], "end": [109.203747, 129.073452], "width": 0.12}, {"type": "segment", "start": [109.203747, 124.058452], "end": [108.637218, 124.058452], "width": 0.12}, {"type": "segment", "start": [109.203747, 123.298452], "end": [109.203747, 122.538452], "width": 0.12}, {"type": "segment", "start": [109.203747, 122.538452], "end": [108.073747, 122.538452], "width": 0.12}, {"type": "segment", "start": [107.766217, 129.073452], "end": [107.111277, 129.073452], "width": 0.12}, {"type": "segment", "start": [107.510276, 124.058452], "end": [107.367218, 124.058452], "width": 0.12}, {"type": "segment", "start": [107.313747, 124.004981], "end": [107.313747, 123.861923], "width": 0.12}, {"type": "segment", "start": [107.313747, 122.734981], "end": [107.313747, 122.603452], "width": 0.12}, {"type": "segment", "start": [107.313747, 122.603452], "end": [107.111277, 122.603452], "width": 0.12}, {"type": "segment", "start": [106.496217, 129.073452], "end": [105.673747, 129.073452], "width": 0.12}, {"type": "segment", "start": [106.496217, 122.603452], "end": [105.673747, 122.603452], "width": 0.12}, {"type": "segment", "start": [105.673747, 122.603452], "end": [105.673747, 129.073452], "width": 0.12}]}, "fabrication": {"F": [{"thickness": 0.15, "svgpath": "M97.176501,117.731639L97.176501,116.731639L97.509834,117.445924L97.843167,116.731639L97.843167,117.731639M98.462215,117.731639L98.366977,117.68402L98.319358,117.6364L98.271739,117.541162L98.271739,117.255448L98.319358,117.16021L98.366977,117.112591L98.462215,117.064972L98.605072,117.064972L98.70031,117.112591L98.747929,117.16021L98.795548,117.255448L98.795548,117.541162L98.747929,117.6364L98.70031,117.68402L98.605072,117.731639L98.462215,117.731639M99.652691,117.064972L99.652691,117.731639M99.22412,117.064972L99.22412,117.588781L99.271739,117.68402L99.366977,117.731639L99.509834,117.731639L99.605072,117.68402L99.652691,117.6364M100.128882,117.064972L100.128882,117.731639M100.128882,117.16021L100.176501,117.112591L100.271739,117.064972L100.414596,117.064972L100.509834,117.112591L100.557453,117.207829L100.557453,117.731639M100.890787,117.064972L101.271739,117.064972M101.033644,116.731639L101.033644,117.588781L101.081263,117.68402L101.176501,117.731639L101.271739,117.731639M101.605073,117.731639L101.605073,117.064972M101.605073,116.731639L101.557454,116.779258L101.605073,116.826877L101.652692,116.779258L101.605073,116.731639L101.605073,116.826877M102.081263,117.064972L102.081263,117.731639M102.081263,117.16021L102.128882,117.112591L102.22412,117.064972L102.366977,117.064972L102.462215,117.112591L102.509834,117.207829L102.509834,117.731639M103.414596,117.064972L103.414596,117.874496L103.366977,117.969734L103.319358,118.017353L103.22412,118.064972L103.081263,118.064972L102.986025,118.017353M103.414596,117.68402L103.319358,117.731639L103.128882,117.731639L103.033644,117.68402L102.986025,117.6364L102.938406,117.541162L102.938406,117.255448L102.986025,117.16021L103.033644,117.112591L103.128882,117.064972L103.319358,117.064972L103.414596,117.112591M103.890787,117.731639L103.890787,116.731639M103.890787,117.207829L104.462215,117.207829M104.462215,117.731639L104.462215,116.731639M105.081263,117.731639L104.986025,117.68402L104.938406,117.6364L104.890787,117.541162L104.890787,117.255448L104.938406,117.16021L104.986025,117.112591L105.081263,117.064972L105.22412,117.064972L105.319358,117.112591L105.366977,117.16021L105.414596,117.255448L105.414596,117.541162L105.366977,117.6364L105.319358,117.68402L105.22412,117.731639L105.081263,117.731639M105.986025,117.731639L105.890787,117.68402L105.843168,117.588781L105.843168,116.731639M106.74793,117.68402L106.652692,117.731639L106.462216,117.731639L106.366978,117.68402L106.319359,117.588781L106.319359,117.207829L106.366978,117.112591L106.462216,117.064972L106.652692,117.064972L106.74793,117.112591L106.795549,117.207829L106.795549,117.303067L106.319359,117.398305", "val": 1}, {"thickness": 0.15, "svgpath": "M101.500311,114.531639L101.500311,113.531639M101.500311,114.007829L102.071739,114.007829M102.071739,114.531639L102.071739,113.531639M102.452692,113.531639L103.071739,113.531639L102.738406,113.912591L102.881263,113.912591L102.976501,113.96021L103.02412,114.007829L103.071739,114.103067L103.071739,114.341162L103.02412,114.4364L102.976501,114.48402L102.881263,114.531639L102.595549,114.531639L102.500311,114.48402L102.452692,114.4364"}, {"thickness": 0.15, "svgpath": "M97.997013,130.682187L97.997013,129.682187L98.330346,130.396472L98.663679,129.682187L98.663679,130.682187M99.282727,130.682187L99.187489,130.634568L99.13987,130.586948L99.092251,130.49171L99.092251,130.205996L99.13987,130.110758L99.187489,130.063139L99.282727,130.01552L99.425584,130.01552L99.520822,130.063139L99.568441,130.110758L99.61606,130.205996L99.61606,130.49171L99.568441,130.586948L99.520822,130.634568L99.425584,130.682187L99.282727,130.682187M100.473203,130.01552L100.473203,130.682187M100.044632,130.01552L100.044632,130.539329L100.092251,130.634568L100.187489,130.682187L100.330346,130.682187L100.425584,130.634568L100.473203,130.586948M100.949394,130.01552L100.949394,130.682187M100.949394,130.110758L100.997013,130.063139L101.092251,130.01552L101.235108,130.01552L101.330346,130.063139L101.377965,130.158377L101.377965,130.682187M101.711299,130.01552L102.092251,130.01552M101.854156,129.682187L101.854156,130.539329L101.901775,130.634568L101.997013,130.682187L102.092251,130.682187M102.425585,130.682187L102.425585,130.01552M102.425585,129.682187L102.377966,129.729806L102.425585,129.777425L102.473204,129.729806L102.425585,129.682187L102.425585,129.777425M102.901775,130.01552L102.901775,130.682187M102.901775,130.110758L102.949394,130.063139L103.044632,130.01552L103.187489,130.01552L103.282727,130.063139L103.330346,130.158377L103.330346,130.682187M104.235108,130.01552L104.235108,130.825044L104.187489,130.920282L104.13987,130.967901L104.044632,131.01552L103.901775,131.01552L103.806537,130.967901M104.235108,130.634568L104.13987,130.682187L103.949394,130.682187L103.854156,130.634568L103.806537,130.586948L103.758918,130.49171L103.758918,130.205996L103.806537,130.110758L103.854156,130.063139L103.949394,130.01552L104.13987,130.01552L104.235108,130.063139M104.711299,130.682187L104.711299,129.682187M104.711299,130.158377L105.282727,130.158377M105.282727,130.682187L105.282727,129.682187M105.901775,130.682187L105.806537,130.634568L105.758918,130.586948L105.711299,130.49171L105.711299,130.205996L105.758918,130.110758L105.806537,130.063139L105.901775,130.01552L106.044632,130.01552L106.13987,130.063139L106.187489,130.110758L106.235108,130.205996L106.235108,130.49171L106.187489,130.586948L106.13987,130.634568L106.044632,130.682187L105.901775,130.682187M106.806537,130.682187L106.711299,130.634568L106.66368,130.539329L106.66368,129.682187M107.568442,130.634568L107.473204,130.682187L107.282728,130.682187L107.18749,130.634568L107.139871,130.539329L107.139871,130.158377L107.18749,130.063139L107.282728,130.01552L107.473204,130.01552L107.568442,130.063139L107.616061,130.158377L107.616061,130.253615L107.139871,130.348853", "val": 1}, {"thickness": 0.15, "svgpath": "M102.320823,127.482187L102.320823,126.482187M102.320823,126.958377L102.892251,126.958377M102.892251,127.482187L102.892251,126.482187M103.892251,127.482187L103.320823,127.482187M103.606537,127.482187L103.606537,126.482187L103.511299,126.625044L103.416061,126.720282L103.320823,126.767901"}, {"thickness": 0.15, "svgpath": "M85.326594,123.36692L85.326594,122.36692L85.659927,123.081205L85.99326,122.36692L85.99326,123.36692M86.612308,123.36692L86.51707,123.319301L86.469451,123.271681L86.421832,123.176443L86.421832,122.890729L86.469451,122.795491L86.51707,122.747872L86.612308,122.700253L86.755165,122.700253L86.850403,122.747872L86.898022,122.795491L86.945641,122.890729L86.945641,123.176443L86.898022,123.271681L86.850403,123.319301L86.755165,123.36692L86.612308,123.36692M87.802784,122.700253L87.802784,123.36692M87.374213,122.700253L87.374213,123.224062L87.421832,123.319301L87.51707,123.36692L87.659927,123.36692L87.755165,123.319301L87.802784,123.271681M88.278975,122.700253L88.278975,123.36692M88.278975,122.795491L88.326594,122.747872L88.421832,122.700253L88.564689,122.700253L88.659927,122.747872L88.707546,122.84311L88.707546,123.36692M89.04088,122.700253L89.421832,122.700253M89.183737,122.36692L89.183737,123.224062L89.231356,123.319301L89.326594,123.36692L89.421832,123.36692M89.755166,123.36692L89.755166,122.700253M89.755166,122.36692L89.707547,122.414539L89.755166,122.462158L89.802785,122.414539L89.755166,122.36692L89.755166,122.462158M90.231356,122.700253L90.231356,123.36692M90.231356,122.795491L90.278975,122.747872L90.374213,122.700253L90.51707,122.700253L90.612308,122.747872L90.659927,122.84311L90.659927,123.36692M91.564689,122.700253L91.564689,123.509777L91.51707,123.605015L91.469451,123.652634L91.374213,123.700253L91.231356,123.700253L91.136118,123.652634M91.564689,123.319301L91.469451,123.36692L91.278975,123.36692L91.183737,123.319301L91.136118,123.271681L91.088499,123.176443L91.088499,122.890729L91.136118,122.795491L91.183737,122.747872L91.278975,122.700253L91.469451,122.700253L91.564689,122.747872M92.04088,123.36692L92.04088,122.36692M92.04088,122.84311L92.612308,122.84311M92.612308,123.36692L92.612308,122.36692M93.231356,123.36692L93.136118,123.319301L93.088499,123.271681L93.04088,123.176443L93.04088,122.890729L93.088499,122.795491L93.136118,122.747872L93.231356,122.700253L93.374213,122.700253L93.469451,122.747872L93.51707,122.795491L93.564689,122.890729L93.564689,123.176443L93.51707,123.271681L93.469451,123.319301L93.374213,123.36692L93.231356,123.36692M94.136118,123.36692L94.04088,123.319301L93.993261,123.224062L93.993261,122.36692M94.898023,123.319301L94.802785,123.36692L94.612309,123.36692L94.517071,123.319301L94.469452,123.224062L94.469452,122.84311L94.517071,122.747872L94.612309,122.700253L94.802785,122.700253L94.898023,122.747872L94.945642,122.84311L94.945642,122.938348L94.469452,123.033586", "val": 1}, {"thickness": 0.15, "svgpath": "M89.650404,120.16692L89.650404,119.16692M89.650404,119.64311L90.221832,119.64311M90.221832,120.16692L90.221832,119.16692M90.650404,119.262158L90.698023,119.214539L90.793261,119.16692L91.031356,119.16692L91.126594,119.214539L91.174213,119.262158L91.221832,119.357396L91.221832,119.452634L91.174213,119.595491L90.602785,120.16692L91.221832,120.16692"}, {"thickness": 0.15, "svgpath": "M89.824403,129.274915L89.883072,129.363773L90.048029,129.459012L90.154317,129.465391L90.243175,129.406722L90.266985,129.365483L90.273365,129.259195L90.214696,129.170336L90.090978,129.098908L90.032309,129.01005L90.038688,128.903761L90.062498,128.862522L90.151356,128.803853L90.257644,128.810233L90.381362,128.881661L90.440031,128.97052M90.914055,129.959012L91.414055,129.092986M90.937864,129.917772L90.831576,129.911393L90.666619,129.816155L90.60795,129.727296L90.59052,129.662247L90.5969,129.555959L90.739757,129.308523L90.828615,129.249854L90.893664,129.232425L90.999952,129.238804L91.164909,129.334042L91.223578,129.422901M91.659781,129.619757L91.159781,130.485782M91.635971,129.660996L91.74226,129.667376L91.907217,129.762614L91.965886,129.851472L91.983316,129.916521L91.976936,130.022809L91.834079,130.270245L91.74522,130.328914L91.680172,130.346344L91.573884,130.339964L91.408926,130.244726L91.350257,130.155868M92.519427,130.226045L92.460758,130.137187L92.443328,130.072138L92.449708,129.96585L92.473517,129.92461L92.562376,129.865941L92.627424,129.848511L92.733712,129.854891L92.89867,129.950129L92.957339,130.038988L92.974769,130.104036L92.968389,130.210325L92.944579,130.251564L92.855721,130.310233L92.790672,130.327663L92.684384,130.321283L92.519427,130.226045L92.413139,130.219665L92.34809,130.237095L92.259231,130.295764L92.163993,130.460721L92.157614,130.567009L92.175043,130.632058L92.233712,130.720917L92.39867,130.816155L92.504958,130.822534L92.570007,130.805105L92.658865,130.746436L92.754103,130.581478L92.760483,130.47519L92.743053,130.410141L92.684384,130.321283M92.852302,131.078059L93.639268,130.762614M93.185635,130.500709L93.305934,131.339964M93.55337,131.482821L94.340336,131.167376M93.886704,130.905471L94.007003,131.744726", "val": 1}, {"thickness": 0.15, "svgpath": "M120.648925,123.226702L121.315592,123.226702M120.267973,123.464797L120.982258,123.702892L120.982258,123.083845M121.220353,122.702892L121.267973,122.655273L121.315592,122.702892L121.267973,122.750511L121.220353,122.702892L121.315592,122.702892M120.315592,122.32194L120.315592,121.655274L121.315592,122.083845M121.315592,121.274321L120.315592,121.274321M120.934639,121.179083L121.315592,120.893369M120.648925,120.893369L121.029877,121.274321", "val": 1}, {"thickness": 0.08, "svgpath": "M119.437922,122.381464L119.199827,122.54813M119.437922,122.667178L118.937922,122.667178L118.937922,122.476702L118.961732,122.429083L118.985541,122.405273L119.03316,122.381464L119.104589,122.381464L119.152208,122.405273L119.176017,122.429083L119.199827,122.476702L119.199827,122.667178M118.937922,122.214797L118.937922,121.881464L119.437922,122.095749"}, {"type": "segment", "start": [118.585773, 123.298131], "end": [118.585773, 121.298131], "width": 0.1}, {"type": "segment", "start": [119.835773, 123.298131], "end": [118.585773, 123.298131], "width": 0.1}, {"type": "segment", "start": [118.585773, 121.298131], "end": [119.835773, 121.298131], "width": 0.1}, {"type": "segment", "start": [119.835773, 121.298131], "end": [119.835773, 123.298131], "width": 0.1}, {"thickness": 0.15, "svgpath": "M102.644904,139.75179L102.359189,139.256918M102.502046,139.504354L103.368072,139.004354L103.196735,138.993304L103.066637,138.958444L102.977779,138.899775M103.650825,140.160764L103.073475,140.494097M103.43654,139.78961L102.982907,140.051515L102.924238,140.140373L102.930618,140.246661L103.002046,140.370379L103.090905,140.429048L103.155954,140.446478M103.931869,140.933261L103.765203,140.644585M103.31157,140.90649L104.177596,140.40649L104.415691,140.818883", "val": 1}, {"thickness": 0.06, "svgpath": "M104.416928,139.339053L104.390908,139.332081L104.345841,139.292118L104.326793,139.259126L104.314718,139.200115L104.328662,139.148076L104.352129,139.112533L104.408588,139.057942L104.458075,139.02937L104.533582,139.007771L104.576097,139.005219L104.628136,139.019163L104.673204,139.059126L104.692251,139.092118L104.704327,139.151129L104.697355,139.177148M104.797013,139.273571L104.930346,139.504511L104.498222,139.556049"}, {"type": "segment", "start": [104.521234, 138.432052], "end": [105.321234, 139.817692], "width": 0.1}, {"type": "segment", "start": [103.828414, 138.832052], "end": [104.521234, 138.432052], "width": 0.1}, {"type": "segment", "start": [105.321234, 139.817692], "end": [104.628414, 140.217692], "width": 0.1}, {"type": "segment", "start": [104.628414, 140.217692], "end": [103.828414, 138.832052], "width": 0.1}, {"thickness": 0.15, "svgpath": "M117.349961,119.29533L118.016628,119.29533M116.969009,119.533425L117.683294,119.77152L117.683294,119.152473M117.921389,118.77152L117.969009,118.723901L118.016628,118.77152L117.969009,118.819139L117.921389,118.77152L118.016628,118.77152M117.016628,118.390568L117.016628,117.723902L118.016628,118.152473M118.016628,117.342949L117.016628,117.342949M117.635675,117.247711L118.016628,116.961997M117.349961,116.961997L117.730913,117.342949", "val": 1}, {"thickness": 0.08, "svgpath": "M119.438958,118.450092L119.200863,118.616758M119.438958,118.735806L118.938958,118.735806L118.938958,118.54533L118.962768,118.497711L118.986577,118.473901L119.034196,118.450092L119.105625,118.450092L119.153244,118.473901L119.177053,118.497711L119.200863,118.54533L119.200863,118.735806M119.153244,118.164377L119.129434,118.211996L119.105625,118.235806L119.058006,118.259615L119.034196,118.259615L118.986577,118.235806L118.962768,118.211996L118.938958,118.164377L118.938958,118.069139L118.962768,118.02152L118.986577,117.997711L119.034196,117.973901L119.058006,117.973901L119.105625,117.997711L119.129434,118.02152L119.153244,118.069139L119.153244,118.164377L119.177053,118.211996L119.200863,118.235806L119.248482,118.259615L119.34372,118.259615L119.391339,118.235806L119.415149,118.211996L119.438958,118.164377L119.438958,118.069139L119.415149,118.02152L119.391339,117.997711L119.34372,117.973901L119.248482,117.973901L119.200863,117.997711L119.177053,118.02152L119.153244,118.069139"}, {"type": "segment", "start": [119.836809, 117.366759], "end": [119.836809, 119.366759], "width": 0.1}, {"type": "segment", "start": [118.586809, 117.366759], "end": [119.836809, 117.366759], "width": 0.1}, {"type": "segment", "start": [119.836809, 119.366759], "end": [118.586809, 119.366759], "width": 0.1}, {"type": "segment", "start": [118.586809, 119.366759], "end": [118.586809, 117.366759], "width": 0.1}, {"thickness": 0.15, "svgpath": "M93.031893,124.466099L93.144561,124.366191L93.263608,124.159994L93.269988,124.053706L93.252558,123.988657L93.193889,123.899799L93.11141,123.85218L93.005122,123.8458L92.940073,123.86323L92.851215,123.921899L92.714738,124.063047L92.625879,124.121716L92.560831,124.139145L92.454542,124.132766L92.372064,124.085147L92.313395,123.996288L92.295965,123.931239L92.302345,123.824951L92.421392,123.618755L92.53406,123.518846M92.635678,123.247601L92.921392,122.752729M93.644561,123.500165L92.778535,123.000165M93.954084,122.964054L93.088059,122.464054L93.873315,122.532522L93.421392,121.886704L94.287418,122.386704M93.611869,121.556789L93.921392,121.020678L94.08464,121.49983L94.156069,121.376112L94.244927,121.317443L94.309976,121.300013L94.416264,121.306393L94.622461,121.42544L94.68113,121.514299L94.698559,121.579347L94.69218,121.685636L94.549322,121.933071L94.460464,121.991741L94.395415,122.00917M94.194347,120.738383L94.176917,120.673334L94.183297,120.567046L94.302345,120.360849L94.391203,120.30218L94.456252,120.284751L94.56254,120.29113L94.645019,120.338749L94.744927,120.451417L94.954084,121.232003L95.263608,120.695892M95.190928,119.774159L95.024262,120.062834M95.477894,120.324738L94.611869,119.824738L94.849964,119.412345M95.135678,118.917474L95.183297,118.834995L95.272156,118.776326L95.337204,118.758896L95.443493,118.765276L95.632259,118.819275L95.838456,118.938322L95.979603,119.0748L96.038273,119.163658L96.055702,119.228707L96.049323,119.334995L96.001704,119.417474L95.912845,119.476143L95.847796,119.493573L95.741508,119.487193L95.552742,119.433194L95.346545,119.314146L95.205397,119.177669L95.146728,119.088811L95.129298,119.023762L95.135678,118.917474M96.019591,118.053158L96.596942,118.386491M95.570629,118.068878L96.070171,118.632217L96.379695,118.096106M96.05149,117.521717L96.03406,117.456668L96.04044,117.35038L96.159488,117.144183L96.248346,117.085514L96.313395,117.068085L96.419683,117.074464L96.502162,117.122083L96.60207,117.234751L96.811227,118.015337L97.120751,117.479226M97.048071,116.557493L96.881405,116.846168M97.335037,117.108072L96.469012,116.608072L96.707107,116.195679M97.111869,115.494611L97.016631,115.659568L97.010251,115.765856L97.027681,115.830905L97.10378,115.984812L97.244927,116.12129L97.574842,116.311766L97.68113,116.318146L97.746179,116.300716L97.835037,116.242047L97.930275,116.07709L97.936655,115.970802L97.919225,115.905753L97.860556,115.816894L97.654359,115.697847L97.548071,115.691467L97.483023,115.708897L97.394164,115.767566L97.298926,115.932523L97.292546,116.038811L97.309976,116.10386L97.368645,116.192718M98.239799,115.540979L97.373774,115.040979L97.56425,114.711064L97.653108,114.652395L97.718157,114.634965L97.824445,114.641345L97.948163,114.712774L98.006832,114.801632L98.024262,114.866681L98.017882,114.972969L97.827406,115.302883M98.69218,114.757432L98.376734,113.970466M98.11483,114.424099L98.954085,114.3038", "val": 1}, {"thickness": 0.15, "svgpath": "M98.392033,121.677303L99.093101,122.082065L99.199389,122.088445L99.264438,122.071015L99.353296,122.012346L99.448534,121.847388L99.454914,121.7411L99.437484,121.676052L99.378815,121.587193L98.677747,121.182431M100.043772,120.816406L99.758058,121.311278M99.900915,121.063842L99.03489,120.563842L99.110989,120.717749L99.145848,120.847847L99.139468,120.954135"}, {"type": "segment", "start": [102.293683, 120.509809], "end": [102.659709, 121.875835], "width": 0.1}, {"type": "segment", "start": [97.530543, 117.759809], "end": [102.293683, 120.509809], "width": 0.1}, {"type": "segment", "start": [102.659709, 121.875835], "end": [100.959709, 124.820321], "width": 0.1}, {"type": "segment", "start": [100.959709, 124.820321], "end": [95.330543, 121.570321], "width": 0.1}, {"type": "segment", "start": [95.330543, 121.570321], "end": [97.530543, 117.759809], "width": 0.1}, {"thickness": 0.15, "svgpath": "M92.02881,118.705392L92.606161,119.038725M91.579848,118.721112L92.07939,119.284451L92.388914,118.74834M92.785587,118.537474L92.850636,118.520044L92.868065,118.585093L92.803017,118.602522L92.785587,118.537474L92.868065,118.585093M92.192516,117.755179L92.525849,117.177828L93.177589,118.048982M93.219286,116.643427L93.796637,116.97676M93.005001,117.014581L93.458633,117.276485L93.564921,117.282865L93.65378,117.224196L93.725208,117.100478L93.731588,116.99419L93.714158,116.929141M93.747766,116.013787L93.5811,116.302462M94.034732,116.564367L93.168707,116.064367L93.406802,115.651974", "val": 1}, {"thickness": 0.06, "svgpath": "M94.244302,118.439408L94.251274,118.465427L94.239198,118.524438L94.22015,118.55743L94.175083,118.597393L94.123044,118.611337L94.080529,118.608785L94.005022,118.587185L93.955535,118.558614L93.899076,118.504023L93.875608,118.46848L93.861664,118.41644L93.87374,118.35743L93.892788,118.324438L93.937855,118.284475L93.963874,118.277503M93.99755,118.142985L94.121359,117.928541L94.186658,118.120201L94.21523,118.070714L94.250773,118.047246L94.276793,118.040275L94.319308,118.042826L94.401787,118.090445L94.425254,118.125989L94.432226,118.152008L94.429674,118.194524L94.372531,118.293498L94.336988,118.316966L94.310968,118.323937"}, {"type": "segment", "start": [94.899483, 117.816937], "end": [94.099483, 119.202577], "width": 0.1}, {"type": "segment", "start": [94.206663, 117.416937], "end": [94.899483, 117.816937], "width": 0.1}, {"type": "segment", "start": [94.099483, 119.202577], "end": [93.406663, 118.802577], "width": 0.1}, {"type": "segment", "start": [93.406663, 118.802577], "end": [94.206663, 117.416937], "width": 0.1}, {"thickness": 0.15, "svgpath": "M86.838486,99.384176L87.17182,99.961526M86.441814,99.173309L86.59276,99.910946L87.128871,99.601422M87.577833,99.617143L87.642882,99.634572L87.625452,99.699621L87.560403,99.682191L87.577833,99.617143L87.625452,99.699621M87.455366,98.64312L88.032716,98.309787L88.161563,99.390098M88.862631,98.985336L88.362631,98.11931M88.754633,98.607802L89.192545,98.79486M88.859212,98.217509L88.719774,98.7379", "val": 1}, {"thickness": 0.08, "svgpath": "M88.614983,100.770681L88.351597,100.647818M88.367547,100.913538L88.117547,100.480526L88.282504,100.385288L88.335648,100.382098L88.368173,100.390813L88.412602,100.420147L88.448316,100.482006L88.451506,100.53515L88.442791,100.567675L88.413456,100.612104L88.248499,100.707342M88.756756,100.111478L88.55056,100.230526L88.648988,100.448627L88.657702,100.416103L88.687037,100.371673L88.790135,100.31215L88.843279,100.30896L88.875804,100.317675L88.920233,100.347009L88.979757,100.450107L88.982947,100.503252L88.974232,100.535776L88.944897,100.580205L88.841799,100.639729L88.788655,100.642919L88.75613,100.634204"}, {"type": "segment", "start": [89.752102, 100.573564], "end": [88.020052, 101.573564], "width": 0.1}, {"type": "segment", "start": [89.127102, 99.491032], "end": [89.752102, 100.573564], "width": 0.1}, {"type": "segment", "start": [88.020052, 101.573564], "end": [87.395052, 100.491032], "width": 0.1}, {"type": "segment", "start": [87.395052, 100.491032], "end": [89.127102, 99.491032], "width": 0.1}, {"thickness": 0.15, "svgpath": "M83.94996,138.414932L83.616627,138.992283M83.93424,137.96597L83.3709,138.465512L83.907011,138.775036M84.117878,139.171709L84.135308,139.236758L84.070259,139.254187L84.052829,139.189139L84.117878,139.171709L84.070259,139.254187M84.900173,138.578638L85.477523,138.911971L84.60637,139.563711M85.307438,139.968473L85.807438,139.102448M85.580393,139.686178L85.637352,140.158949M85.970686,139.581599L85.450295,139.721037", "val": 1}, {"thickness": 0.08, "svgpath": "M85.287459,137.788792L85.262169,137.499262M85.040023,137.645935L85.290023,137.212922L85.454981,137.30816L85.484315,137.35259L85.49303,137.385114L85.48984,137.438258L85.454126,137.500117L85.409697,137.529452L85.377172,137.538167L85.324028,137.534977L85.159071,137.439739M85.681797,137.439113L85.949852,137.593875L85.710277,137.675499L85.772136,137.711213L85.80147,137.755642L85.810185,137.788167L85.806995,137.841311L85.747471,137.944409L85.703042,137.973743L85.670518,137.982458L85.617374,137.979268L85.493656,137.90784L85.464321,137.863411L85.455606,137.830886"}, {"type": "segment", "start": [84.919678, 136.592476], "end": [86.651728, 137.592476], "width": 0.1}, {"type": "segment", "start": [84.294678, 137.675008], "end": [84.919678, 136.592476], "width": 0.1}, {"type": "segment", "start": [86.651728, 137.592476], "end": [86.026728, 138.675008], "width": 0.1}, {"type": "segment", "start": [86.026728, 138.675008], "end": [84.294678, 137.675008], "width": 0.1}, {"thickness": 0.15, "svgpath": "M93.885739,119.942443L93.600024,120.437314M93.742882,120.189878L92.876856,119.689878L92.952955,119.843786L92.987815,119.973883L92.981435,120.080171M93.329237,118.906332L93.376856,118.823853L93.465715,118.765184L93.530763,118.747754L93.637052,118.754134L93.825818,118.808133L94.032015,118.92718L94.173162,119.063658L94.231832,119.152516L94.249261,119.217565L94.242882,119.323853L94.195263,119.406332L94.106404,119.465001L94.041355,119.48243L93.935067,119.476051L93.746301,119.422052L93.540104,119.303004L93.398956,119.166527L93.340287,119.077669L93.322857,119.01262L93.329237,118.906332M93.805428,118.081545L93.853047,117.999067L93.941905,117.940398L94.006954,117.922968L94.113242,117.929348L94.302009,117.983347L94.508205,118.102394L94.649353,118.238872L94.708022,118.32773L94.725452,118.392779L94.719072,118.499067L94.671453,118.581545L94.582595,118.640215L94.517546,118.657644L94.411258,118.651265L94.222491,118.597266L94.016294,118.478218L93.875147,118.341741L93.816478,118.252882L93.799048,118.187834L93.805428,118.081545M94.475055,117.588383L95.052405,117.921717M94.557534,117.636002L94.540104,117.570953L94.546484,117.464665L94.617912,117.340947L94.706771,117.282278L94.813059,117.288658L95.266691,117.550563M95.217821,116.58759L95.051154,116.876265M95.504786,117.13817L94.638761,116.63817L94.876856,116.225777", "val": 1}, {"thickness": 0.06, "svgpath": "M95.595309,119.219407L95.602281,119.245426L95.590205,119.304437L95.571157,119.337429L95.52609,119.377392L95.474051,119.391336L95.431536,119.388784L95.356029,119.367184L95.306542,119.338613L95.250083,119.284022L95.226615,119.248479L95.212671,119.196439L95.224747,119.137429L95.243795,119.104437L95.288862,119.064474L95.314881,119.057502M95.818776,118.90854L95.704491,119.106488M95.761634,119.007514L95.415223,118.807514L95.445663,118.869077L95.459607,118.921116L95.457055,118.963631"}, {"type": "segment", "start": [96.25049, 118.596936], "end": [95.45049, 119.982576], "width": 0.1}, {"type": "segment", "start": [95.55767, 118.196936], "end": [96.25049, 118.596936], "width": 0.1}, {"type": "segment", "start": [95.45049, 119.982576], "end": [94.75767, 119.582576], "width": 0.1}, {"type": "segment", "start": [94.75767, 119.582576], "end": [95.55767, 118.196936], "width": 0.1}, {"thickness": 0.15, "svgpath": "M89.064059,137.55705L88.730726,138.134401M89.048339,137.108088L88.484999,137.60763L89.02111,137.917154M89.231977,138.313827L89.249407,138.378876L89.184358,138.396305L89.166928,138.331257L89.231977,138.313827L89.184358,138.396305M90.014272,137.720756L90.591622,138.054089L89.720469,138.705829M90.421537,139.110591L90.921537,138.244566M90.694492,138.828296L90.751451,139.301067M91.084785,138.723717L90.564394,138.863155", "val": 1}, {"thickness": 0.08, "svgpath": "M88.751558,139.788794L88.726268,139.499264M88.504122,139.645937L88.754122,139.212924L88.91908,139.308162L88.948414,139.352592L88.957129,139.385116L88.953939,139.43826L88.918225,139.500119L88.873796,139.529454L88.841271,139.538169L88.788127,139.534979L88.62317,139.439741M89.289379,139.714405L89.122712,140.00308M89.281518,139.489924L88.999849,139.739695L89.267904,139.894457"}, {"type": "segment", "start": [89.490827, 140.67501], "end": [87.758777, 139.67501], "width": 0.1}, {"type": "segment", "start": [90.115827, 139.592478], "end": [89.490827, 140.67501], "width": 0.1}, {"type": "segment", "start": [87.758777, 139.67501], "end": [88.383777, 138.592478], "width": 0.1}, {"type": "segment", "start": [88.383777, 138.592478], "end": [90.115827, 139.592478], "width": 0.1}, {"thickness": 0.15, "svgpath": "M76.559386,120.474275L76.083196,120.474275L76.083196,119.474275M76.89272,119.950465L77.226053,119.950465M77.36891,120.474275L76.89272,120.474275L76.89272,119.474275L77.36891,119.474275M77.797482,120.474275L77.797482,119.474275L78.035577,119.474275L78.178434,119.521894L78.273672,119.617132L78.321291,119.71237L78.36891,119.902846L78.36891,120.045703L78.321291,120.236179L78.273672,120.331417L78.178434,120.426656L78.035577,120.474275L77.797482,120.474275", "val": 1}, {"thickness": 0.08, "svgpath": "M76.833196,121.896605L76.833196,121.396605L76.952244,121.396605L77.023672,121.420415L77.071291,121.468034L77.095101,121.515653L77.11891,121.610891L77.11891,121.682319L77.095101,121.777557L77.071291,121.825176L77.023672,121.872796L76.952244,121.896605L76.833196,121.896605M77.309387,121.444224L77.333196,121.420415L77.380815,121.396605L77.499863,121.396605L77.547482,121.420415L77.571291,121.444224L77.595101,121.491843L77.595101,121.539462L77.571291,121.610891L77.285577,121.896605L77.595101,121.896605"}, {"type": "segment", "start": [78.202244, 121.969456], "end": [78.202244, 121.069456], "width": 0.1}, {"type": "segment", "start": [78.202244, 121.069456], "end": [76.202244, 121.069456], "width": 0.1}, {"type": "segment", "start": [77.902244, 122.269456], "end": [78.202244, 121.969456], "width": 0.1}, {"type": "segment", "start": [76.202244, 122.269456], "end": [77.902244, 122.269456], "width": 0.1}, {"type": "segment", "start": [76.202244, 121.069456], "end": [76.202244, 122.269456], "width": 0.1}, {"thickness": 0.15, "svgpath": "M95.086704,114.872188L94.591833,114.586473M94.839269,114.729331L95.339269,113.863305L95.185361,113.939404L95.055264,113.974264L94.948976,113.967884M96.122815,114.315686L96.205294,114.363305L96.263963,114.452164L96.281393,114.517212L96.275013,114.623501L96.221014,114.812267L96.101967,115.018464L95.965489,115.159611L95.876631,115.218281L95.811582,115.23571L95.705294,115.229331L95.622815,115.181712L95.564146,115.092853L95.546717,115.027804L95.553096,114.921516L95.607095,114.73275L95.726143,114.526553L95.86262,114.385405L95.951478,114.326736L96.016527,114.309306L96.122815,114.315686M96.947602,114.791877L97.03008,114.839496L97.088749,114.928354L97.106179,114.993403L97.099799,115.099691L97.0458,115.288458L96.926753,115.494654L96.790275,115.635802L96.701417,115.694471L96.636368,115.711901L96.53008,115.705521L96.447602,115.657902L96.388932,115.569044L96.371503,115.503995L96.377882,115.397707L96.431881,115.20894L96.550929,115.002743L96.687406,114.861596L96.776265,114.802927L96.841313,114.785497L96.947602,114.791877M97.440764,115.461504L97.10743,116.038854M97.393145,115.543983L97.458194,115.526553L97.564482,115.532933L97.6882,115.604361L97.746869,115.69322L97.740489,115.799508L97.478584,116.25314M98.441557,116.20427L98.152882,116.037603M97.890977,116.491235L98.390977,115.62521L98.80337,115.863305", "val": 1}, {"thickness": 0.06, "svgpath": "M95.80974,116.581758L95.783721,116.58873L95.72471,116.576654L95.691718,116.557606L95.651755,116.512539L95.637811,116.4605L95.640363,116.417985L95.661963,116.342478L95.690534,116.292991L95.745125,116.236532L95.780668,116.213064L95.832708,116.19912L95.891718,116.211196L95.92471,116.230244L95.964673,116.275311L95.971645,116.30133M96.103611,116.377521L96.129631,116.370549L96.172146,116.373101L96.254624,116.42072L96.278092,116.456263L96.285064,116.482283L96.282512,116.524798L96.263464,116.55779L96.218397,116.597753L95.906163,116.681416L96.120607,116.805225"}, {"type": "segment", "start": [96.432212, 117.236939], "end": [95.046572, 116.436939], "width": 0.1}, {"type": "segment", "start": [96.832212, 116.544119], "end": [96.432212, 117.236939], "width": 0.1}, {"type": "segment", "start": [95.046572, 116.436939], "end": [95.446572, 115.744119], "width": 0.1}, {"type": "segment", "start": [95.446572, 115.744119], "end": [96.832212, 116.544119], "width": 0.1}, {"thickness": 0.15, "svgpath": "M101.786298,144.266437L101.286298,143.400411L101.932116,143.852334L101.863648,143.067078L102.363648,143.933103M103.223293,143.326815L103.205864,143.391864L103.105955,143.504532L103.023477,143.552151L102.875949,143.58234L102.745851,143.547481L102.656993,143.488812L102.520516,143.347664L102.449087,143.223946L102.395088,143.035179L102.388709,142.928891L102.423568,142.798794L102.523477,142.686126L102.605955,142.638507L102.753483,142.608317L102.818531,142.625747M103.642066,143.195008L103.142066,142.328983L103.471981,142.138507L103.578269,142.132127L103.643318,142.149557L103.732176,142.208226L103.803604,142.331944L103.809984,142.438232L103.792554,142.503281L103.733885,142.592139L103.403971,142.782615M104.961724,142.433103L104.466852,142.718818M104.714288,142.575961L104.214288,141.709935L104.203238,141.881272L104.168378,142.01137L104.109709,142.100228M104.750399,141.400411L105.327749,141.067078L105.456596,142.147389M105.822621,140.781364L105.9051,140.733745L106.011388,140.727365L106.076437,140.744795L106.165295,140.803464L106.301772,140.944612L106.42082,141.150808L106.474819,141.339575L106.481199,141.445863L106.463769,141.510912L106.4051,141.59977L106.322621,141.647389L106.216333,141.653769L106.151284,141.636339L106.062426,141.57767L105.925948,141.436522L105.806901,141.230326L105.752902,141.041559L105.746522,140.935271L105.763952,140.870222L105.822621,140.781364M106.647407,140.305173L106.729886,140.257554L106.836174,140.251174L106.901223,140.268604L106.990081,140.327273L107.126559,140.468421L107.245606,140.674618L107.299605,140.863384L107.305985,140.969672L107.288555,141.034721L107.229886,141.12358L107.147407,141.171199L107.041119,141.177578L106.97607,141.160149L106.887212,141.10148L106.750734,140.960332L106.631687,140.754135L106.577688,140.565369L106.571308,140.45908L106.588738,140.394032L106.647407,140.305173M107.61676,140.460332L108.276589,140.079379M108.296979,139.352792L108.83309,139.043269L108.734891,139.53985L108.858609,139.468421L108.964897,139.462041L109.029946,139.479471L109.118804,139.53814L109.237852,139.744337L109.244232,139.850625L109.226802,139.915674L109.168133,140.004532L108.920697,140.147389L108.814409,140.153769L108.74936,140.136339M109.121765,138.876602L109.657876,138.567078L109.559677,139.063659L109.683395,138.992231L109.789683,138.985851L109.854732,139.003281L109.943591,139.06195L110.062638,139.268146L110.069018,139.374434L110.051588,139.439483L109.992919,139.528342L109.745483,139.671199L109.639195,139.677578L109.574146,139.660149M110.193987,138.257554L110.276466,138.209935L110.382754,138.203555L110.447803,138.220985L110.536661,138.279654L110.673139,138.420802L110.792186,138.626999L110.846185,138.815765L110.852565,138.922053L110.835135,138.987102L110.776466,139.075961L110.693987,139.12358L110.587699,139.129959L110.52265,139.11253L110.433792,139.053861L110.297315,138.912713L110.178267,138.706516L110.124268,138.51775L110.117888,138.411461L110.135318,138.346413L110.193987,138.257554M110.860196,137.98289L110.877626,137.917841L110.936295,137.828983L111.142491,137.709935L111.24878,137.703555L111.313828,137.720985L111.402687,137.779654L111.450306,137.862133L111.480495,138.00966L111.271338,138.790246L111.807449,138.480722M111.916698,137.812804L112.205373,137.646138M112.590995,138.028341L112.178602,138.266437L111.678602,137.400411L112.090995,137.162316M112.803572,138.015582L113.463401,137.63463M112.99826,136.638506L113.493132,136.352792M113.745696,137.361675L113.245696,136.495649M113.946765,136.090887L114.111722,135.995649L114.21801,135.989269L114.348108,136.024129L114.484585,136.165277L114.651252,136.453952L114.705251,136.642719L114.670391,136.772816L114.611722,136.861675L114.446765,136.956913L114.340477,136.963292L114.210379,136.928433L114.073901,136.787285L113.907235,136.49861L113.853236,136.309843L113.888096,136.179746L113.946765,136.090887M115.230311,136.504532L115.395269,136.409294L115.453938,136.320435L115.471368,136.255386L115.482418,136.084049L115.428419,135.895283L115.237943,135.565368L115.149084,135.506699L115.084035,135.489269L114.977747,135.495649L114.81279,135.590887L114.754121,135.679746L114.736691,135.744794L114.743071,135.851083L114.862119,136.057279L114.950977,136.115948L115.016026,136.133378L115.122314,136.126998L115.287271,136.03176L115.34594,135.942902L115.36337,135.877853L115.35699,135.771565M115.520238,135.292413L115.537668,135.227365L115.596337,135.138506L115.802533,135.019459L115.908822,135.013079L115.97387,135.030509L116.062729,135.089178L116.110348,135.171656L116.140537,135.319184L115.93138,136.09977L116.467491,135.790246", "val": 1}, {"thickness": 0.15, "svgpath": "M106.551445,137.138962L106.956207,137.840031L107.045065,137.8987L107.110114,137.916129L107.216402,137.90975L107.38136,137.814512L107.440029,137.725653L107.457458,137.660604L107.451079,137.554316L107.046317,136.853248M107.46509,136.721441L107.482519,136.656392L107.541188,136.567534L107.747385,136.448486L107.853673,136.442106L107.918722,136.459536L108.00758,136.518205L108.055199,136.600684L108.085389,136.748211L107.876231,137.528797L108.412342,137.219273"}, {"type": "segment", "start": [106.826, 139.630695], "end": [109.857089, 137.880695], "width": 0.1}, {"type": "arc", "start": [107.483865, 137.230151], "radius": 2.48, "startangle": 105.0, "endangle": 240.0, "width": 0.1}, {"type": "arc", "start": [107.483865, 137.230151], "radius": 2.48, "startangle": -120.0, "endangle": 15.0, "width": 0.1}, {"thickness": 0.15, "svgpath": "M101.291133,140.530477L101.005418,140.035605M101.148275,140.283041L102.014301,139.783041L101.842964,139.771991L101.712866,139.737131L101.624008,139.678462M102.297054,140.939451L101.719704,141.272784M102.082769,140.568297L101.629136,140.830202L101.570467,140.91906L101.576847,141.025348L101.648275,141.149066L101.737134,141.207735L101.802183,141.225165M102.578098,141.711948L102.411432,141.423272M101.957799,141.685177L102.823825,141.185177L103.06192,141.59757", "val": 1}, {"thickness": 0.06, "svgpath": "M103.063157,140.11774L103.037137,140.110768L102.99207,140.070805L102.973022,140.037813L102.960947,139.978802L102.974891,139.926763L102.998358,139.89122L103.054817,139.836629L103.104304,139.808057L103.179811,139.786458L103.222326,139.783906L103.274365,139.79785L103.319433,139.837813L103.33848,139.870805L103.350556,139.929816L103.343584,139.955835M103.548004,140.23371L103.509909,140.167728L103.474365,140.14426L103.448346,140.137288L103.379811,140.132868L103.304304,140.154468L103.172339,140.230658L103.148871,140.266201L103.141899,140.292221L103.144451,140.334736L103.182546,140.400719L103.21809,140.424187L103.244109,140.431159L103.286624,140.428607L103.369103,140.380988L103.392571,140.345444L103.399543,140.319425L103.396991,140.276909L103.358895,140.210927L103.323352,140.187459L103.297333,140.180487L103.254817,140.183039"}, {"type": "segment", "start": [103.167463, 139.210739], "end": [103.967463, 140.596379], "width": 0.1}, {"type": "segment", "start": [102.474643, 139.610739], "end": [103.167463, 139.210739], "width": 0.1}, {"type": "segment", "start": [103.967463, 140.596379], "end": [103.274643, 140.996379], "width": 0.1}, {"type": "segment", "start": [103.274643, 140.996379], "end": [102.474643, 139.610739], "width": 0.1}, {"thickness": 0.15, "svgpath": "M109.474294,122.712444L109.521913,122.617206L109.521913,122.42673L109.474294,122.331492L109.379055,122.283873L109.331436,122.283873L109.236198,122.331492L109.188579,122.42673L109.188579,122.569587L109.14096,122.664825L109.045722,122.712444L108.998103,122.712444L108.902865,122.664825L108.855246,122.569587L108.855246,122.42673L108.902865,122.331492M109.521913,121.42673L108.521913,121.42673M109.474294,121.42673L109.521913,121.521968L109.521913,121.712444L109.474294,121.807682L109.426674,121.855301L109.331436,121.90292L109.045722,121.90292L108.950484,121.855301L108.902865,121.807682L108.855246,121.712444L108.855246,121.521968L108.902865,121.42673M108.855246,120.950539L109.855246,120.950539M108.902865,120.950539L108.855246,120.855301L108.855246,120.664825L108.902865,120.569587L108.950484,120.521968L109.045722,120.474349L109.331436,120.474349L109.426674,120.521968L109.474294,120.569587L109.521913,120.664825L109.521913,120.855301L109.474294,120.950539M108.950484,119.90292L108.902865,119.998158L108.855246,120.045777L108.760008,120.093396L108.712389,120.093396L108.617151,120.045777L108.569532,119.998158L108.521913,119.90292L108.521913,119.712444L108.569532,119.617206L108.617151,119.569587L108.712389,119.521968L108.760008,119.521968L108.855246,119.569587L108.902865,119.617206L108.950484,119.712444L108.950484,119.90292L108.998103,119.998158L109.045722,120.045777L109.14096,120.093396L109.331436,120.093396L109.426674,120.045777L109.474294,119.998158L109.521913,119.90292L109.521913,119.712444L109.474294,119.617206L109.426674,119.569587L109.331436,119.521968L109.14096,119.521968L109.045722,119.569587L108.998103,119.617206L108.950484,119.712444M109.521913,119.188634L108.855246,118.664825M108.855246,119.188634L109.521913,118.664825M109.521913,118.37911L108.855246,117.855301M108.855246,118.37911L109.521913,117.855301", "val": 1}, {"thickness": 0.15, "svgpath": "M116.482685,135.547252L115.905335,135.880586M116.693552,135.15058L115.955915,135.301526L116.265439,135.837637M116.249718,136.286599L116.232289,136.351648L116.16724,136.334218L116.18467,136.269169L116.249718,136.286599L116.16724,136.334218M117.223741,136.164132L117.557074,136.741482L116.476763,136.870329M116.881525,137.571397L117.747551,137.071397M117.259059,137.463399L117.072001,137.901311M117.649352,137.567978L117.128961,137.42854", "val": 1}, {"thickness": 0.08, "svgpath": "M114.977132,137.117552L115.099995,136.854167M114.834275,136.870117L115.267288,136.620117L115.362526,136.785074L115.365716,136.838218L115.357001,136.870742L115.327666,136.915171L115.265807,136.950886L115.212663,136.954076L115.180139,136.945361L115.13571,136.916026L115.040472,136.751069M115.215227,137.529945L115.07237,137.28251M115.143799,137.406228L115.576812,137.156228L115.491143,137.150702L115.426094,137.133273L115.381665,137.103938M115.453322,137.942338L115.310465,137.694902M115.381894,137.81862L115.814907,137.56862L115.729238,137.563095L115.664189,137.545665L115.61976,137.516331"}, {"type": "segment", "start": [115.293298, 138.460868], "end": [114.293298, 136.728818], "width": 0.1}, {"type": "segment", "start": [116.37583, 137.835868], "end": [115.293298, 138.460868], "width": 0.1}, {"type": "segment", "start": [114.293298, 136.728818], "end": [115.37583, 136.103818], "width": 0.1}, {"type": "segment", "start": [115.37583, 136.103818], "end": [116.37583, 137.835868], "width": 0.1}, {"thickness": 0.15, "svgpath": "M118.211681,134.541074L117.634331,134.874408M118.422548,134.144402L117.684911,134.295348L117.994435,134.831459M117.978714,135.280421L117.961285,135.34547L117.896236,135.32804L117.913666,135.262991L117.978714,135.280421L117.896236,135.32804M118.952737,135.157954L119.28607,135.735304L118.205759,135.864151M118.610521,136.565219L119.476547,136.065219M118.988055,136.457221L118.800997,136.895133M119.378348,136.5618L118.857957,136.422362", "val": 1}, {"thickness": 0.08, "svgpath": "M116.706128,136.111374L116.828991,135.847989M116.563271,135.863939L116.996284,135.613939L117.091522,135.778896L117.094712,135.83204L117.085997,135.864564L117.056662,135.908993L116.994803,135.944708L116.941659,135.947898L116.909135,135.939183L116.864706,135.909848L116.769468,135.744891M116.944223,136.523767L116.801366,136.276332M116.872795,136.40005L117.305808,136.15005L117.220139,136.144524L117.15509,136.127095L117.110661,136.09776M117.531998,136.541822L117.555807,136.583062L117.558997,136.636206L117.550282,136.66873L117.520948,136.713159L117.450374,136.781398L117.347276,136.840922L117.252892,136.867921L117.199748,136.871111L117.167224,136.862396L117.122795,136.833062L117.098985,136.791822L117.095795,136.738678L117.10451,136.706154L117.133845,136.661725L117.204419,136.593486L117.307517,136.533962L117.4019,136.506963L117.455044,136.503773L117.487569,136.512488L117.531998,136.541822"}, {"type": "segment", "start": [117.022294, 137.45469], "end": [116.022294, 135.72264], "width": 0.1}, {"type": "segment", "start": [118.104826, 136.82969], "end": [117.022294, 137.45469], "width": 0.1}, {"type": "segment", "start": [116.022294, 135.72264], "end": [117.104826, 135.09764], "width": 0.1}, {"type": "segment", "start": [117.104826, 135.09764], "end": [118.104826, 136.82969], "width": 0.1}, {"thickness": 0.15, "svgpath": "M77.349509,118.42482L77.016176,117.948629M76.778081,118.42482L76.778081,117.42482L77.159033,117.42482L77.254271,117.472439L77.30189,117.520058L77.349509,117.615296L77.349509,117.758153L77.30189,117.853391L77.254271,117.90101L77.159033,117.948629L76.778081,117.948629", "val": 1}, {"thickness": 0.08, "svgpath": "M76.956652,119.84715L76.789986,119.609055M76.670938,119.84715L76.670938,119.34715L76.861414,119.34715L76.909033,119.37096L76.932843,119.394769L76.956652,119.442388L76.956652,119.513817L76.932843,119.561436L76.909033,119.585245L76.861414,119.609055L76.670938,119.609055M77.147129,119.394769L77.170938,119.37096L77.218557,119.34715L77.337605,119.34715L77.385224,119.37096L77.409033,119.394769L77.432843,119.442388L77.432843,119.490007L77.409033,119.561436L77.123319,119.84715L77.432843,119.84715"}, {"type": "segment", "start": [78.039986, 120.245001], "end": [76.039986, 120.245001], "width": 0.1}, {"type": "segment", "start": [78.039986, 118.995001], "end": [78.039986, 120.245001], "width": 0.1}, {"type": "segment", "start": [76.039986, 120.245001], "end": [76.039986, 118.995001], "width": 0.1}, {"type": "segment", "start": [76.039986, 118.995001], "end": [78.039986, 118.995001], "width": 0.1}, {"thickness": 0.15, "svgpath": "M112.685279,134.43689L112.62023,134.41946L112.507562,134.319551L112.459943,134.237073L112.429754,134.089545L112.464613,133.959448L112.523282,133.870589L112.66443,133.734112L112.788148,133.662683L112.976915,133.608685L113.083203,133.602305L113.2133,133.637164L113.325968,133.737073L113.373587,133.819551L113.403777,133.967079L113.386347,134.032128M112.888514,134.97938L112.882135,134.873092L112.899564,134.808043L112.958233,134.719185L113.205669,134.576328L113.311957,134.569948L113.377006,134.587378L113.465865,134.646047L113.537293,134.769765L113.543673,134.876053L113.526243,134.941102L113.467574,135.02996L113.220138,135.172817L113.11385,135.179197L113.048801,135.161767L112.959943,135.103098L112.888514,134.97938M113.846817,135.305876L113.269467,135.639209M113.764338,135.353495L113.829387,135.370925L113.918246,135.429594L113.989674,135.553312L113.996054,135.6596L113.937385,135.748458L113.483752,136.010363M114.299198,136.089423L113.721848,136.422756M114.216719,136.137042L114.281768,136.154472L114.370627,136.213141L114.442055,136.336859L114.448435,136.443147L114.389766,136.532005L113.936133,136.79391M113.972703,137.047726L114.353655,137.707554M115.516445,137.531089L115.564064,137.613568L115.570444,137.719856L115.553014,137.784905L115.494345,137.873763L115.353197,138.010241L115.147,138.129288L114.958234,138.183287L114.851946,138.189667L114.786897,138.172237L114.698038,138.113568L114.650419,138.031089L114.64404,137.924801L114.661469,137.859752L114.720138,137.770894L114.861286,137.634417L115.067483,137.515369L115.256249,137.46137L115.362538,137.45499L115.427586,137.47242L115.516445,137.531089M115.293277,139.144551L115.007562,138.649679M115.150419,138.897115L116.016445,138.397115L115.845108,138.386065L115.71501,138.351205L115.626152,138.292536M115.459943,139.433226L116.299198,139.553525M116.037293,139.099892L115.721848,139.886858M116.873588,139.88173L116.921207,139.964209L116.927587,140.070497L116.910157,140.135546L116.851488,140.224404L116.71034,140.360881L116.504143,140.479929L116.315377,140.533928L116.209089,140.540307L116.14404,140.522878L116.055181,140.464209L116.007562,140.38173L116.001183,140.275442L116.018612,140.210393L116.077281,140.121535L116.218429,139.985057L116.424626,139.86601L116.613392,139.812011L116.719681,139.805631L116.784729,139.823061L116.873588,139.88173M117.180151,141.079379L116.6028,141.412713M117.391018,140.682707L116.65338,140.833653L116.962904,141.369764", "val": 1}, {"thickness": 0.15, "svgpath": "M108.987071,140.258911L109.344214,140.8775L109.374403,141.025028L109.339543,141.155125L109.239635,141.267793L109.157156,141.315412M109.405844,140.127103L109.423274,140.062055L109.481943,139.973196L109.688139,139.854149L109.794427,139.847769L109.859476,139.865199L109.948334,139.923868L109.995954,140.006346L110.026143,140.153874L109.816985,140.93446L110.353096,140.624936"}, {"type": "segment", "start": [106.333854, 143.886737], "end": [105.466428, 143.654311], "width": 0.1}, {"type": "segment", "start": [114.582746, 139.124237], "end": [106.333854, 143.886737], "width": 0.1}, {"type": "segment", "start": [105.466428, 143.654311], "end": [104.513928, 142.004533], "width": 0.1}, {"type": "segment", "start": [104.513928, 142.004533], "end": [113.312746, 136.924533], "width": 0.1}, {"type": "segment", "start": [113.312746, 136.924533], "end": [114.582746, 139.124237], "width": 0.1}, {"thickness": 0.15, "svgpath": "M90.219827,112.036067L90.326115,112.029687L90.491072,111.934449L90.549741,111.845591L90.543361,111.739303L90.519552,111.698063L90.430694,111.639394L90.324405,111.645774L90.200687,111.717203L90.094399,111.723582L90.005541,111.664913L89.981731,111.623674L89.975352,111.517386L90.034021,111.428527L90.157739,111.357099L90.264027,111.350719M91.357098,111.434449L90.857098,110.568424M91.333288,111.39321L91.274619,111.482068L91.109662,111.577306L91.003374,111.583686L90.938325,111.566256L90.849466,111.507587L90.706609,111.260151L90.70023,111.153863L90.717659,111.088814L90.776328,110.999956L90.941286,110.904718L91.047574,110.898338M91.436157,110.619003L91.936157,111.485029M91.459967,110.660243L91.518636,110.571384L91.683593,110.476146L91.789881,110.469767L91.85493,110.487196L91.943789,110.545865L92.086646,110.793301L92.093025,110.899589L92.075596,110.964638L92.016927,111.053497L91.851969,111.148735L91.745681,111.155114M92.391041,110.177672L92.284753,110.184052L92.219704,110.166622L92.130846,110.107953L92.107036,110.066714L92.100657,109.960426L92.118086,109.895377L92.176756,109.806519L92.341713,109.711281L92.448001,109.704901L92.51305,109.722331L92.601908,109.781L92.625718,109.822239L92.632097,109.928527L92.614668,109.993576L92.555998,110.082434L92.391041,110.177672L92.332372,110.266531L92.314942,110.33158L92.321322,110.437868L92.41656,110.602825L92.505419,110.661494L92.570467,110.678924L92.676756,110.672544L92.841713,110.577306L92.900382,110.488448L92.917812,110.423399L92.911432,110.317111L92.816194,110.152154L92.727335,110.093484L92.662287,110.076055L92.555998,110.082434M93.295345,110.315401L93.415644,109.476146M92.962012,109.738051L93.748977,110.053497M93.996413,109.910639L94.116713,109.071384M93.66308,109.333289L94.450046,109.648735", "val": 1}, {"thickness": 0.15, "svgpath": "M85.095249,104.219319L85.428583,104.796669M84.698577,104.008452L84.849523,104.746089L85.385634,104.436565M85.834596,104.452286L85.899645,104.469715L85.882215,104.534764L85.817166,104.517334L85.834596,104.452286L85.882215,104.534764M85.712129,103.478263L86.289479,103.14493L86.418326,104.225241M87.119394,103.820479L86.619394,102.954453M87.011396,103.442945L87.449308,103.630003M87.115975,103.052652L86.976537,103.573043", "val": 1}, {"thickness": 0.08, "svgpath": "M85.221746,102.74794L84.95836,102.625077M84.97431,102.890797L84.72431,102.457785L84.889267,102.362547L84.942411,102.359357L84.974936,102.368072L85.019365,102.397406L85.055079,102.459265L85.058269,102.512409L85.049554,102.544934L85.020219,102.589363L84.855262,102.684601M85.342899,102.100642L85.260421,102.148261L85.231086,102.19269L85.222371,102.225215L85.216846,102.310883L85.243846,102.405266L85.339084,102.570224L85.383513,102.599558L85.416037,102.608273L85.469182,102.605083L85.55166,102.557464L85.580995,102.513035L85.58971,102.480511L85.58652,102.427366L85.526996,102.324268L85.482567,102.294934L85.450042,102.286219L85.396898,102.289409L85.31442,102.337028L85.285085,102.381457L85.27637,102.413981L85.27956,102.467125"}, {"type": "segment", "start": [84.001815, 102.468291], "end": [85.733865, 101.468291], "width": 0.1}, {"type": "segment", "start": [84.626815, 103.550823], "end": [84.001815, 102.468291], "width": 0.1}, {"type": "segment", "start": [85.733865, 101.468291], "end": [86.358865, 102.550823], "width": 0.1}, {"type": "segment", "start": [86.358865, 102.550823], "end": [84.626815, 103.550823], "width": 0.1}], "B": [{"thickness": 0.15, "svgpath": "M115.081605,130.433032L115.129224,130.480652L115.272081,130.528271L115.367319,130.528271L115.510176,130.480652L115.605414,130.385413L115.653033,130.290175L115.700652,130.099699L115.700652,129.956842L115.653033,129.766366L115.605414,129.671128L115.510176,129.57589L115.367319,129.528271L115.272081,129.528271L115.129224,129.57589L115.081605,129.623509M114.510176,130.528271L114.605414,130.480652L114.653033,130.433032L114.700652,130.337794L114.700652,130.05208L114.653033,129.956842L114.605414,129.909223L114.510176,129.861604L114.367319,129.861604L114.272081,129.909223L114.224462,129.956842L114.176843,130.05208L114.176843,130.337794L114.224462,130.433032L114.272081,130.480652L114.367319,130.528271L114.510176,130.528271M113.748271,129.861604L113.748271,130.528271M113.748271,129.956842L113.700652,129.909223L113.605414,129.861604L113.462557,129.861604L113.367319,129.909223L113.3197,130.004461L113.3197,130.528271M112.843509,129.861604L112.843509,130.528271M112.843509,129.956842L112.79589,129.909223L112.700652,129.861604L112.557795,129.861604L112.462557,129.909223L112.414938,130.004461L112.414938,130.528271M112.176843,130.623509L111.414938,130.623509M110.986366,129.528271L110.891128,129.528271L110.79589,129.57589L110.748271,129.623509L110.700652,129.718747L110.653033,129.909223L110.653033,130.147318L110.700652,130.337794L110.748271,130.433032L110.79589,130.480652L110.891128,130.528271L110.986366,130.528271L111.081604,130.480652L111.129223,130.433032L111.176842,130.337794L111.224461,130.147318L111.224461,129.909223L111.176842,129.718747L111.129223,129.623509L111.081604,129.57589L110.986366,129.528271M110.27208,129.623509L110.224461,129.57589L110.129223,129.528271L109.891128,129.528271L109.79589,129.57589L109.748271,129.623509L109.700652,129.718747L109.700652,129.813985L109.748271,129.956842L110.319699,130.528271L109.700652,130.528271M109.367318,130.528271L108.843509,129.861604M109.367318,129.861604L108.843509,130.528271M108.27208,129.528271L108.176842,129.528271L108.081604,129.57589L108.033985,129.623509L107.986366,129.718747L107.938747,129.909223L107.938747,130.147318L107.986366,130.337794L108.033985,130.433032L108.081604,130.480652L108.176842,130.528271L108.27208,130.528271L108.367318,130.480652L108.414937,130.433032L108.462556,130.337794L108.510175,130.147318L108.510175,129.909223L108.462556,129.718747L108.414937,129.623509L108.367318,129.57589L108.27208,129.528271M107.033985,129.528271L107.510175,129.528271L107.557794,130.004461L107.510175,129.956842L107.414937,129.909223L107.176842,129.909223L107.081604,129.956842L107.033985,130.004461L106.986366,130.099699L106.986366,130.337794L107.033985,130.433032L107.081604,130.480652L107.176842,130.528271L107.414937,130.528271L107.510175,130.480652L107.557794,130.433032M106.79589,130.623509L106.033985,130.623509M105.605413,129.528271L105.414937,129.528271L105.319699,129.57589L105.224461,129.671128L105.176842,129.861604L105.176842,130.194937L105.224461,130.385413L105.319699,130.480652L105.414937,130.528271L105.605413,130.528271L105.700651,130.480652L105.795889,130.385413L105.843508,130.194937L105.843508,129.861604L105.795889,129.671128L105.700651,129.57589L105.605413,129.528271M104.319699,130.528271L104.319699,129.528271M104.319699,130.480652L104.414937,130.528271L104.605413,130.528271L104.700651,130.480652L104.74827,130.433032L104.795889,130.337794L104.795889,130.05208L104.74827,129.956842L104.700651,129.909223L104.605413,129.861604L104.414937,129.861604L104.319699,129.909223M103.414937,130.528271L103.414937,129.528271M103.414937,130.480652L103.510175,130.528271L103.700651,130.528271L103.795889,130.480652L103.843508,130.433032L103.891127,130.337794L103.891127,130.05208L103.843508,129.956842L103.795889,129.909223L103.700651,129.861604L103.510175,129.861604L103.414937,129.909223M103.176842,130.623509L102.414937,130.623509M102.176841,130.004461L101.843508,130.004461M101.700651,130.528271L102.176841,130.528271L102.176841,129.528271L101.700651,129.528271M101.367317,129.861604L101.129222,130.528271L100.891127,129.861604M100.129222,130.480652L100.22446,130.528271L100.414936,130.528271L100.510174,130.480652L100.557793,130.385413L100.557793,130.004461L100.510174,129.909223L100.414936,129.861604L100.22446,129.861604L100.129222,129.909223L100.081603,130.004461L100.081603,130.099699L100.557793,130.194937M99.653031,129.861604L99.653031,130.528271M99.653031,129.956842L99.605412,129.909223L99.510174,129.861604L99.367317,129.861604L99.272079,129.909223L99.22446,130.004461L99.22446,130.528271", "val": 1}, {"thickness": 0.15, "svgpath": "M106.893566,125.505118L107.607851,125.505118L107.750708,125.457499L107.845947,125.362261L107.893566,125.219404L107.893566,125.124166M107.893566,126.505118L107.893566,125.93369M107.893566,126.219404L106.893566,126.219404L107.036423,126.124166L107.131661,126.028928L107.17928,125.93369"}, {"type": "segment", "start": [109.143747, 129.013452], "end": [109.143747, 123.515952], "width": 0.1}, {"type": "segment", "start": [109.143747, 123.515952], "end": [108.291247, 122.663452], "width": 0.1}, {"type": "segment", "start": [108.291247, 122.663452], "end": [105.733747, 122.663452], "width": 0.1}, {"type": "segment", "start": [105.733747, 129.013452], "end": [109.143747, 129.013452], "width": 0.1}, {"type": "segment", "start": [105.733747, 122.663452], "end": [105.733747, 129.013452], "width": 0.1}]}}, "footprints": [{"ref": "H3", "bbox": {"pos": [101.962216, 114.07682], "relpos": [-2.375, -2.375], "size": [4.75, 4.75], "angle": 0.0}, "pads": [{"layers": ["F", "B"], "pos": [101.962216, 114.07682], "size": [2.1, 2.1], "angle": 0.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.1, 2.1], "offset": [0.0, 0.0], "pin1": 1}], "drawings": [], "layer": "F"}, {"ref": "H1", "bbox": {"pos": [102.782728, 127.027368], "relpos": [-2.375, -2.375], "size": [4.75, 4.75], "angle": 0.0}, "pads": [{"layers": ["F", "B"], "pos": [102.782728, 127.027368], "size": [2.1, 2.1], "angle": 0.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.1, 2.1], "offset": [0.0, 0.0], "pin1": 1}], "drawings": [], "layer": "F"}, {"ref": "H2", "bbox": {"pos": [90.112309, 119.712101], "relpos": [-2.375, -2.375], "size": [4.75, 4.75], "angle": 0.0}, "pads": [{"layers": ["F", "B"], "pos": [90.112309, 119.712101], "size": [2.1, 2.1], "angle": 0.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.1, 2.1], "offset": [0.0, 0.0], "pin1": 1}], "drawings": [], "layer": "F"}, {"ref": "SDP3", "bbox": {"pos": [89.810588, 134.108368], "relpos": [-13.5, -8.81], "size": [27.0, 18.12], "angle": -30.0}, "pads": [{"layers": ["F", "B"], "pos": [79.418283, 128.108368], "size": [3.0, 3.0], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [82.422706, 124.704555], "size": [3.0, 3.0], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [78.697706, 131.156444], "size": [1.524, 1.524], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [77.222706, 133.711219], "size": [3.0, 3.0], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [102.24847, 134.765324], "size": [3.0, 3.0], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [100.92347, 137.060292], "size": [1.524, 1.524], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [96.44847, 144.811219], "size": [3.0, 3.0], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [100.202893, 140.108368], "size": [3.0, 3.0], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [89.301613, 136.989938], "size": [1.524, 1.524], "angle": 330.0, "shape": "rect", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [87.569563, 135.989938], "size": [1.524, 1.524], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F", "B"], "pos": [91.033664, 137.989938], "size": [1.524, 1.524], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [85.837512, 134.989938], "size": [1.524, 1.524], "angle": 330.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R7", "bbox": {"pos": [119.210773, 122.298131], "relpos": [-1.875, -0.975], "size": [3.75, 1.95], "angle": 90.0}, "pads": [{"layers": ["F"], "pos": [119.210773, 123.298131], "size": [1.2, 1.4], "angle": 90.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [119.210773, 121.298131], "size": [1.2, 1.4], "angle": 90.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "C7", "bbox": {"pos": [104.574824, 139.324872], "relpos": [-1.675, -0.755], "size": [3.35, 1.51], "angle": -60.0}, "pads": [{"layers": ["F"], "pos": [104.143574, 138.577925], "size": [1.075, 0.95], "angle": 300.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [105.006074, 140.071819], "size": [1.075, 0.95], "angle": 300.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R8", "bbox": {"pos": [119.211809, 118.366759], "relpos": [-1.875, -0.975], "size": [3.75, 1.95], "angle": -90.0}, "pads": [{"layers": ["F"], "pos": [119.211809, 117.366759], "size": [1.2, 1.4], "angle": 270.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [119.211809, 119.366759], "size": [1.2, 1.4], "angle": 270.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "U1", "bbox": {"pos": [99.245126, 121.290065], "relpos": [-3.875, -3.525], "size": [7.75, 7.05], "angle": -120.0}, "pads": [{"layers": ["F"], "pos": [103.2095, 120.273567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [98.143252, 117.348567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [95.280752, 122.306563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [95.843668, 122.631563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [96.406585, 122.956563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [96.969501, 123.281563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [97.532418, 123.606563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [98.095334, 123.931563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [98.658251, 124.256563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [99.221167, 124.581563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [99.784084, 124.906563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [102.646584, 119.948567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [100.347, 125.231563], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [102.083667, 119.623567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [101.520751, 119.298567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [100.957834, 118.973567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [100.394918, 118.648567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [99.832001, 118.323567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [99.269085, 117.998567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}, {"layers": ["F"], "pos": [98.706168, 117.673567], "size": [1.475, 0.4], "angle": 240.0, "shape": "roundrect", "radius": 0.1, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "C3", "bbox": {"pos": [94.153073, 118.309757], "relpos": [-1.675, -0.755], "size": [3.35, 1.51], "angle": -120.0}, "pads": [{"layers": ["F"], "pos": [94.584323, 117.56281], "size": [1.075, 0.95], "angle": 240.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [93.721823, 119.056704], "size": [1.075, 0.95], "angle": 240.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R5", "bbox": {"pos": [88.573577, 100.532298], "relpos": [-1.875, -0.975], "size": [3.75, 1.95], "angle": -150.0}, "pads": [{"layers": ["F"], "pos": [89.439602, 100.032298], "size": [1.2, 1.4], "angle": 210.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [87.707552, 101.032298], "size": [1.2, 1.4], "angle": 210.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R3", "bbox": {"pos": [85.473203, 137.633742], "relpos": [-1.875, -0.975], "size": [3.75, 1.95], "angle": -30.0}, "pads": [{"layers": ["F"], "pos": [84.607178, 137.133742], "size": [1.2, 1.4], "angle": 330.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [86.339228, 138.133742], "size": [1.2, 1.4], "angle": 330.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "C1", "bbox": {"pos": [95.50408, 119.089756], "relpos": [-1.675, -0.755], "size": [3.35, 1.51], "angle": -120.0}, "pads": [{"layers": ["F"], "pos": [95.93533, 118.342809], "size": [1.075, 0.95], "angle": 240.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [95.07283, 119.836703], "size": [1.075, 0.95], "angle": 240.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R4", "bbox": {"pos": [88.937302, 139.633744], "relpos": [-1.875, -0.975], "size": [3.75, 1.95], "angle": 150.0}, "pads": [{"layers": ["F"], "pos": [89.803327, 140.133744], "size": [1.2, 1.4], "angle": 150.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [88.071277, 139.133744], "size": [1.2, 1.4], "angle": 150.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "D2", "bbox": {"pos": [77.202244, 121.669456], "relpos": [-1.92, -1.02], "size": [3.795, 2.04], "angle": 180.0}, "pads": [{"layers": ["F"], "pos": [78.227244, 121.669456], "size": [1.15, 1.4], "angle": 180.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [76.177244, 121.669456], "size": [1.15, 1.4], "angle": 180.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "C2", "bbox": {"pos": [95.939392, 116.490529], "relpos": [-1.675, -0.755], "size": [3.35, 1.51], "angle": 150.0}, "pads": [{"layers": ["F"], "pos": [96.686339, 116.921779], "size": [1.075, 0.95], "angle": 150.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [95.192445, 116.059279], "size": [1.075, 0.95], "angle": 150.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "U2", "bbox": {"pos": [106.384013, 137.865151], "relpos": [-1.485, -2.755], "size": [5.51, 4.79], "angle": 30.0}, "pads": [{"layers": ["F", "B"], "pos": [106.384013, 137.865151], "size": [1.05, 1.5], "angle": 30.0, "shape": "rect", "type": "th", "drillshape": "circle", "drillsize": [0.75, 0.75], "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F", "B"], "pos": [107.483865, 137.230151], "size": [1.05, 1.5], "angle": 30.0, "shape": "oval", "type": "th", "drillshape": "circle", "drillsize": [0.75, 0.75], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [108.583718, 136.595151], "size": [1.05, 1.5], "angle": 30.0, "shape": "oval", "type": "th", "drillshape": "circle", "drillsize": [0.75, 0.75], "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "C6", "bbox": {"pos": [103.221053, 140.103559], "relpos": [-1.675, -0.755], "size": [3.35, 1.51], "angle": -60.0}, "pads": [{"layers": ["F"], "pos": [102.789803, 139.356612], "size": [1.075, 0.95], "angle": 300.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [103.652303, 140.850506], "size": [1.075, 0.95], "angle": 300.0, "shape": "roundrect", "radius": 0.2375, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "SDP1", "bbox": {"pos": [113.667094, 120.307683], "relpos": [-13.5, -8.81], "size": [27.0, 18.12], "angle": 90.0}, "pads": [{"layers": ["F", "B"], "pos": [113.667094, 132.307683], "size": [3.0, 3.0], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [109.217094, 131.407683], "size": [3.0, 3.0], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [116.667094, 131.407683], "size": [1.524, 1.524], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [119.617094, 131.407683], "size": [3.0, 3.0], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [108.017094, 109.207683], "size": [3.0, 3.0], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [110.667094, 109.207683], "size": [1.524, 1.524], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [119.617094, 109.207683], "size": [3.0, 3.0], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [113.667094, 108.307683], "size": [3.0, 3.0], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [116.417094, 119.307683], "size": [1.524, 1.524], "angle": 90.0, "shape": "rect", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [116.417094, 121.307683], "size": [1.524, 1.524], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F", "B"], "pos": [116.417094, 117.307683], "size": [1.524, 1.524], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [116.417094, 123.307683], "size": [1.524, 1.524], "angle": 90.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R11", "bbox": {"pos": [115.334564, 137.282343], "relpos": [-1.875, -0.975], "size": [3.75, 1.95], "angle": 120.0}, "pads": [{"layers": ["F"], "pos": [115.834564, 138.148368], "size": [1.2, 1.4], "angle": 120.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [114.834564, 136.416318], "size": [1.2, 1.4], "angle": 120.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R10", "bbox": {"pos": [117.06356, 136.276165], "relpos": [-1.875, -0.975], "size": [3.75, 1.95], "angle": 120.0}, "pads": [{"layers": ["F"], "pos": [117.56356, 137.14219], "size": [1.2, 1.4], "angle": 120.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [116.56356, 135.41014], "size": [1.2, 1.4], "angle": 120.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R2", "bbox": {"pos": [77.039986, 119.620001], "relpos": [-1.705, -0.975], "size": [3.41, 1.95], "angle": 180.0}, "pads": [{"layers": ["F"], "pos": [77.952486, 119.620001], "size": [1.025, 1.4], "angle": 180.0, "shape": "roundrect", "radius": 0.249998, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [76.127486, 119.620001], "size": [1.025, 1.4], "angle": 180.0, "shape": "roundrect", "radius": 0.249998, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "J2", "bbox": {"pos": [106.24878, 142.469385], "relpos": [-1.825, -1.825], "size": [3.65, 11.25], "angle": 120.0}, "pads": [{"layers": ["F", "B"], "pos": [106.24878, 142.469385], "size": [1.7, 1.7], "angle": 120.0, "shape": "rect", "type": "th", "drillshape": "circle", "drillsize": [1.0, 1.0], "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F", "B"], "pos": [108.448485, 141.199385], "size": [1.7, 1.7], "angle": 120.0, "shape": "oval", "type": "th", "drillshape": "circle", "drillsize": [1.0, 1.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [110.648189, 139.929385], "size": [1.7, 1.7], "angle": 120.0, "shape": "oval", "type": "th", "drillshape": "circle", "drillsize": [1.0, 1.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [112.847894, 138.659385], "size": [1.7, 1.7], "angle": 120.0, "shape": "oval", "type": "th", "drillshape": "circle", "drillsize": [1.0, 1.0], "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "SDP2", "bbox": {"pos": [89.798812, 106.497324], "relpos": [-13.5, -8.81], "size": [27.0, 18.12], "angle": -150.0}, "pads": [{"layers": ["F", "B"], "pos": [100.191117, 100.497324], "size": [3.0, 3.0], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [101.636694, 104.801137], "size": [3.0, 3.0], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [97.911694, 98.349248], "size": [1.524, 1.524], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [96.436694, 95.794473], "size": [3.0, 3.0], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [83.01093, 116.940368], "size": [3.0, 3.0], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [81.68593, 114.6454], "size": [1.524, 1.524], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [77.21093, 106.894473], "size": [3.0, 3.0], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [79.406507, 112.497324], "size": [3.0, 3.0], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [2.0, 2.0], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [87.557787, 104.615754], "size": [1.524, 1.524], "angle": 210.0, "shape": "rect", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [89.289837, 103.615754], "size": [1.524, 1.524], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F", "B"], "pos": [85.825736, 105.615754], "size": [1.524, 1.524], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [91.021888, 102.615754], "size": [1.524, 1.524], "angle": 210.0, "shape": "circle", "type": "th", "drillshape": "circle", "drillsize": [0.8, 0.8], "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "R6", "bbox": {"pos": [85.18034, 102.509557], "relpos": [-1.875, -0.975], "size": [3.75, 1.95], "angle": 30.0}, "pads": [{"layers": ["F"], "pos": [84.314315, 103.009557], "size": [1.2, 1.4], "angle": 30.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F"], "pos": [86.046365, 102.009557], "size": [1.2, 1.4], "angle": 30.0, "shape": "roundrect", "radius": 0.249999, "type": "smd", "offset": [0.0, 0.0]}], "drawings": [], "layer": "F"}, {"ref": "J1", "bbox": {"pos": [108.073747, 123.298452], "relpos": [-1.625, -6.275], "size": [4.5, 7.45], "angle": 180.0}, "pads": [{"layers": ["F", "B"], "pos": [108.073747, 123.298452], "size": [1.0, 1.0], "angle": 180.0, "shape": "roundrect", "radius": 0.25, "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0], "pin1": 1}, {"layers": ["F", "B"], "pos": [106.803747, 128.378452], "size": [1.0, 1.0], "angle": 180.0, "shape": "roundrect", "radius": 0.25, "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [106.803747, 123.298452], "size": [1.0, 1.0], "angle": 180.0, "shape": "roundrect", "radius": 0.25, "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [108.073747, 124.568452], "size": [1.0, 1.0], "angle": 180.0, "shape": "custom", "polygons": [[[0.5, 0.5], [-0.5, 0.5], [-0.5, -0.5], [0.5, -0.5]]], "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [106.803747, 124.568452], "size": [1.0, 1.0], "angle": 180.0, "shape": "roundrect", "radius": 0.25, "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [108.073747, 125.838452], "size": [1.0, 1.0], "angle": 180.0, "shape": "custom", "polygons": [[[0.5, 0.5], [-0.5, 0.5], [-0.5, -0.5], [0.5, -0.5]]], "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [106.803747, 125.838452], "size": [1.0, 1.0], "angle": 180.0, "shape": "roundrect", "radius": 0.25, "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [108.073747, 127.108452], "size": [1.0, 1.0], "angle": 180.0, "shape": "roundrect", "radius": 0.25, "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [106.803747, 127.108452], "size": [1.0, 1.0], "angle": 180.0, "shape": "roundrect", "radius": 0.25, "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}, {"layers": ["F", "B"], "pos": [108.073747, 128.378452], "size": [1.0, 1.0], "angle": 180.0, "shape": "custom", "polygons": [[[0.5, 0.5], [-0.5, 0.5], [-0.5, -0.5], [0.5, -0.5]]], "type": "th", "drillshape": "circle", "drillsize": [0.65, 0.65], "offset": [0.0, 0.0]}], "drawings": [], "layer": "B"}], "metadata": {"title": "_autosave-working", "revision": "", "company": "", "date": "2023-09-27 17:29:20"}, "bom": {"both": [[["C1", 11], ["C2", 14]], [["C6", 16], ["C7", 5]], [["C3", 8]], [["R3", 10], ["R4", 12], ["R5", 9], ["R6", 23], ["R7", 4], ["R8", 6], ["R10", 19], ["R11", 18]], [["R2", 20]], [["D2", 13]], [["U1", 7]], [["U2", 15]], [["SDP1", 17], ["SDP2", 22], ["SDP3", 3]], [["J1", 24]], [["J2", 21]]], "skipped": [0, 1, 2], "fields": {"3": ["sdp8xx", "sdp8xx"], "4": ["4.7k", "R_0805_2012Metric_Pad1.20x1.40mm_HandSolder"], "5": ["1uF", "C_0603_1608Metric_Pad1.08x0.95mm_HandSolder"], "6": ["4.7k", "R_0805_2012Metric_Pad1.20x1.40mm_HandSolder"], "7": ["STM32F042F6Px", "TSSOP-20_4.4x6.5mm_P0.65mm"], "8": ["4.7uF", "C_0603_1608Metric_Pad1.08x0.95mm_HandSolder"], "9": ["4.7k", "R_0805_2012Metric_Pad1.20x1.40mm_HandSolder"], "10": ["4.7k", "R_0805_2012Metric_Pad1.20x1.40mm_HandSolder"], "11": ["100nF", "C_0603_1608Metric_Pad1.08x0.95mm_HandSolder"], "12": ["4.7k", "R_0805_2012Metric_Pad1.20x1.40mm_HandSolder"], "13": ["LED", "D_0805_2012Metric_Pad1.15x1.40mm_HandSolder"], "14": ["100nF", "C_0603_1608Metric_Pad1.08x0.95mm_HandSolder"], "15": ["MCP1700-3302E_TO92", "TO-92_Inline"], "16": ["1uF", "C_0603_1608Metric_Pad1.08x0.95mm_HandSolder"], "17": ["sdp8xx", "sdp8xx"], "18": ["4.7k", "R_0805_2012Metric_Pad1.20x1.40mm_HandSolder"], "19": ["4.7k", "R_0805_2012Metric_Pad1.20x1.40mm_HandSolder"], "20": ["R", "R_0805_2012Metric"], "21": ["Conn_01x04", "PinHeader_1x04_P2.54mm_Vertical"], "22": ["sdp8xx", "sdp8xx"], "23": ["4.7k", "R_0805_2012Metric_Pad1.20x1.40mm_HandSolder"], "24": ["Conn_02x05_Odd_Even", "PinHeader_2x05_P1.27mm_Vertical"]}, "F": [[["C1", 11], ["C2", 14]], [["C6", 16], ["C7", 5]], [["C3", 8]], [["R3", 10], ["R4", 12], ["R5", 9], ["R6", 23], ["R7", 4], ["R8", 6], ["R10", 19], ["R11", 18]], [["R2", 20]], [["D2", 13]], [["U1", 7]], [["U2", 15]], [["SDP1", 17], ["SDP2", 22], ["SDP3", 3]], [["J2", 21]]], "B": [[["J1", 24]]]}, "font_data": {}, "ibom_version": "v2.6.0"}
///////////////////////////////////////////////

///////////////////////////////////////////////
/* Utility functions */

var storagePrefix = 'KiCad_HTML_BOM__' + pcbdata.metadata.title + '__' +
  pcbdata.metadata.revision + '__#';
var storage;

function initStorage(key) {
  try {
    window.localStorage.getItem("blank");
    storage = window.localStorage;
  } catch (e) {
    // localStorage not available
  }
  if (!storage) {
    try {
      window.sessionStorage.getItem("blank");
      storage = window.sessionStorage;
    } catch (e) {
      // sessionStorage also not available
    }
  }
}

function readStorage(key) {
  if (storage) {
    return storage.getItem(storagePrefix + key);
  } else {
    return null;
  }
}

function writeStorage(key, value) {
  if (storage) {
    storage.setItem(storagePrefix + key, value);
  }
}

function fancyDblClickHandler(el, onsingle, ondouble) {
  return function () {
    if (el.getAttribute("data-dblclick") == null) {
      el.setAttribute("data-dblclick", 1);
      setTimeout(function () {
        if (el.getAttribute("data-dblclick") == 1) {
          onsingle();
        }
        el.removeAttribute("data-dblclick");
      }, 200);
    } else {
      el.removeAttribute("data-dblclick");
      ondouble();
    }
  }
}

function smoothScrollToRow(rowid) {
  document.getElementById(rowid).scrollIntoView({
    behavior: "smooth",
    block: "center",
    inline: "nearest"
  });
}

function focusInputField(input) {
  input.scrollIntoView(false);
  input.focus();
  input.select();
}

function saveBomTable(output) {
  var text = '';
  for (var node of bomhead.childNodes[0].childNodes) {
    if (node.firstChild) {
      text += (output == 'csv' ? `"${node.firstChild.nodeValue}"` : node.firstChild.nodeValue);
    }
    if (node != bomhead.childNodes[0].lastChild) {
      text += (output == 'csv' ? ',' : '\t');
    }
  }
  text += '\n';
  for (var row of bombody.childNodes) {
    for (var cell of row.childNodes) {
      let val = '';
      for (var node of cell.childNodes) {
        if (node.nodeName == "INPUT") {
          if (node.checked) {
            val += '✓';
          }
        } else if ((node.nodeName == "MARK") || (node.nodeName == "A")) {
          val += node.firstChild.nodeValue;
        } else {
          val += node.nodeValue;
        }
      }
      if (output == 'csv') {
        val = val.replace(/\"/g, '\"\"'); // pair of double-quote characters
        if (isNumeric(val)) {
          val = +val;                     // use number
        } else {
          val = `"${val}"`;               // enclosed within double-quote
        }
      }
      text += val;
      if (cell != row.lastChild) {
        text += (output == 'csv' ? ',' : '\t');
      }
    }
    text += '\n';
  }

  if (output != 'clipboard') {
    // To file: csv or txt
    var blob = new Blob([text], {
      type: `text/${output}`
    });
    saveFile(`${pcbdata.metadata.title}.${output}`, blob);
  } else {
    // To clipboard
    var textArea = document.createElement("textarea");
    textArea.classList.add('clipboard-temp');
    textArea.value = text;

    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();

    try {
      if (document.execCommand('copy')) {
        console.log('Bom copied to clipboard.');
      }
    } catch (err) {
      console.log('Can not copy to clipboard.');
    }

    document.body.removeChild(textArea);
  }
}

function isNumeric(str) {
  /* https://stackoverflow.com/a/175787 */
  return (typeof str != "string" ? false : !isNaN(str) && !isNaN(parseFloat(str)));
}

function removeGutterNode(node) {
  for (var i = 0; i < node.childNodes.length; i++) {
    if (node.childNodes[i].classList &&
      node.childNodes[i].classList.contains("gutter")) {
      node.removeChild(node.childNodes[i]);
      break;
    }
  }
}

function cleanGutters() {
  removeGutterNode(document.getElementById("bot"));
  removeGutterNode(document.getElementById("canvasdiv"));
}

var units = {
  prefixes: {
    giga: ["G", "g", "giga", "Giga", "GIGA"],
    mega: ["M", "mega", "Mega", "MEGA"],
    kilo: ["K", "k", "kilo", "Kilo", "KILO"],
    milli: ["m", "milli", "Milli", "MILLI"],
    micro: ["U", "u", "micro", "Micro", "MICRO", "μ", "µ"], // different utf8 μ
    nano: ["N", "n", "nano", "Nano", "NANO"],
    pico: ["P", "p", "pico", "Pico", "PICO"],
  },
  unitsShort: ["R", "r", "Ω", "F", "f", "H", "h"],
  unitsLong: [
    "OHM", "Ohm", "ohm", "ohms",
    "FARAD", "Farad", "farad",
    "HENRY", "Henry", "henry"
  ],
  getMultiplier: function (s) {
    if (this.prefixes.giga.includes(s)) return 1e9;
    if (this.prefixes.mega.includes(s)) return 1e6;
    if (this.prefixes.kilo.includes(s)) return 1e3;
    if (this.prefixes.milli.includes(s)) return 1e-3;
    if (this.prefixes.micro.includes(s)) return 1e-6;
    if (this.prefixes.nano.includes(s)) return 1e-9;
    if (this.prefixes.pico.includes(s)) return 1e-12;
    return 1;
  },
  valueRegex: null,
}

function initUtils() {
  var allPrefixes = units.prefixes.giga
    .concat(units.prefixes.mega)
    .concat(units.prefixes.kilo)
    .concat(units.prefixes.milli)
    .concat(units.prefixes.micro)
    .concat(units.prefixes.nano)
    .concat(units.prefixes.pico);
  var allUnits = units.unitsShort.concat(units.unitsLong);
  units.valueRegex = new RegExp("^([0-9\.]+)" +
    "\\s*(" + allPrefixes.join("|") + ")?" +
    "(" + allUnits.join("|") + ")?" +
    "(\\b.*)?$", "");
  units.valueAltRegex = new RegExp("^([0-9]*)" +
    "(" + units.unitsShort.join("|") + ")?" +
    "([GgMmKkUuNnPp])?" +
    "([0-9]*)" +
    "(\\b.*)?$", "");
  if (config.fields.includes("Value")) {
    var index = config.fields.indexOf("Value");
    pcbdata.bom["parsedValues"] = {};
    for (var id in pcbdata.bom.fields) {
      pcbdata.bom.parsedValues[id] = parseValue(pcbdata.bom.fields[id][index])
    }
  }
}

function parseValue(val, ref) {
  var inferUnit = (unit, ref) => {
    if (unit) {
      unit = unit.toLowerCase();
      if (unit == 'Ω' || unit == "ohm" || unit == "ohms") {
        unit = 'r';
      }
      unit = unit[0];
    } else {
      ref = /^([a-z]+)\d+$/i.exec(ref);
      if (ref) {
        ref = ref[1].toLowerCase();
        if (ref == "c") unit = 'f';
        else if (ref == "l") unit = 'h';
        else if (ref == "r" || ref == "rv") unit = 'r';
        else unit = null;
      }
    }
    return unit;
  };
  val = val.replace(/,/g, "");
  var match = units.valueRegex.exec(val);
  var unit;
  if (match) {
    val = parseFloat(match[1]);
    if (match[2]) {
      val = val * units.getMultiplier(match[2]);
    }
    unit = inferUnit(match[3], ref);
    if (!unit) return null;
    else return {
      val: val,
      unit: unit,
      extra: match[4],
    }
  }
  match = units.valueAltRegex.exec(val);
  if (match && (match[1] || match[4])) {
    val = parseFloat(match[1] + "." + match[4]);
    if (match[3]) {
      val = val * units.getMultiplier(match[3]);
    }
    unit = inferUnit(match[2], ref);
    if (!unit) return null;
    else return {
      val: val,
      unit: unit,
      extra: match[5],
    }
  }
  return null;
}

function valueCompare(a, b, stra, strb) {
  if (a === null && b === null) {
    // Failed to parse both values, compare them as strings.
    if (stra != strb) return stra > strb ? 1 : -1;
    else return 0;
  } else if (a === null) {
    return 1;
  } else if (b === null) {
    return -1;
  } else {
    if (a.unit != b.unit) return a.unit > b.unit ? 1 : -1;
    else if (a.val != b.val) return a.val > b.val ? 1 : -1;
    else if (a.extra != b.extra) return a.extra > b.extra ? 1 : -1;
    else return 0;
  }
}

function validateSaveImgDimension(element) {
  var valid = false;
  var intValue = 0;
  if (/^[1-9]\d*$/.test(element.value)) {
    intValue = parseInt(element.value);
    if (intValue <= 16000) {
      valid = true;
    }
  }
  if (valid) {
    element.classList.remove("invalid");
  } else {
    element.classList.add("invalid");
  }
  return intValue;
}

function saveImage(layer) {
  var width = validateSaveImgDimension(document.getElementById("render-save-width"));
  var height = validateSaveImgDimension(document.getElementById("render-save-height"));
  var bgcolor = null;
  if (!document.getElementById("render-save-transparent").checked) {
    var style = getComputedStyle(topmostdiv);
    bgcolor = style.getPropertyValue("background-color");
  }
  if (!width || !height) return;

  // Prepare image
  var canvas = document.createElement("canvas");
  var layerdict = {
    transform: {
      x: 0,
      y: 0,
      s: 1,
      panx: 0,
      pany: 0,
      zoom: 1,
    },
    bg: canvas,
    fab: canvas,
    silk: canvas,
    highlight: canvas,
    layer: layer,
  }
  // Do the rendering
  recalcLayerScale(layerdict, width, height);
  prepareLayer(layerdict);
  clearCanvas(canvas, bgcolor);
  drawBackground(layerdict, false);
  drawHighlightsOnLayer(layerdict, false);

  // Save image
  var imgdata = canvas.toDataURL("image/png");

  var filename = pcbdata.metadata.title;
  if (pcbdata.metadata.revision) {
    filename += `.${pcbdata.metadata.revision}`;
  }
  filename += `.${layer}.png`;
  saveFile(filename, dataURLtoBlob(imgdata));
}

function saveSettings() {
  var data = {
    type: "InteractiveHtmlBom settings",
    version: 1,
    pcbmetadata: pcbdata.metadata,
    settings: settings,
  }
  var blob = new Blob([JSON.stringify(data, null, 4)], {
    type: "application/json"
  });
  saveFile(`${pcbdata.metadata.title}.settings.json`, blob);
}

function loadSettings() {
  var input = document.createElement("input");
  input.type = "file";
  input.accept = ".settings.json";
  input.onchange = function (e) {
    var file = e.target.files[0];
    var reader = new FileReader();
    reader.onload = readerEvent => {
      var content = readerEvent.target.result;
      var newSettings;
      try {
        newSettings = JSON.parse(content);
      } catch (e) {
        alert("Selected file is not InteractiveHtmlBom settings file.");
        return;
      }
      if (newSettings.type != "InteractiveHtmlBom settings") {
        alert("Selected file is not InteractiveHtmlBom settings file.");
        return;
      }
      var metadataMatches = newSettings.hasOwnProperty("pcbmetadata");
      if (metadataMatches) {
        for (var k in pcbdata.metadata) {
          if (!newSettings.pcbmetadata.hasOwnProperty(k) || newSettings.pcbmetadata[k] != pcbdata.metadata[k]) {
            metadataMatches = false;
          }
        }
      }
      if (!metadataMatches) {
        var currentMetadata = JSON.stringify(pcbdata.metadata, null, 4);
        var fileMetadata = JSON.stringify(newSettings.pcbmetadata, null, 4);
        if (!confirm(
          `Settins file metadata does not match current metadata.\n\n` +
          `Page metadata:\n${currentMetadata}\n\n` +
          `Settings file metadata:\n${fileMetadata}\n\n` +
          `Press OK if you would like to import settings anyway.`)) {
          return;
        }
      }
      overwriteSettings(newSettings.settings);
    }
    reader.readAsText(file, 'UTF-8');
  }
  input.click();
}

function resetSettings() {
  if (!confirm(
    `This will reset all checkbox states and other settings.\n\n` +
    `Press OK if you want to continue.`)) {
    return;
  }
  if (storage) {
    var keys = [];
    for (var i = 0; i < storage.length; i++) {
      var key = storage.key(i);
      if (key.startsWith(storagePrefix)) keys.push(key);
    }
    for (var key of keys) storage.removeItem(key);
  }
  location.reload();
}

function overwriteSettings(newSettings) {
  initDone = false;
  Object.assign(settings, newSettings);
  writeStorage("bomlayout", settings.bomlayout);
  writeStorage("bommode", settings.bommode);
  writeStorage("canvaslayout", settings.canvaslayout);
  writeStorage("bomCheckboxes", settings.checkboxes.join(","));
  document.getElementById("bomCheckboxes").value = settings.checkboxes.join(",");
  for (var checkbox of settings.checkboxes) {
    writeStorage("checkbox_" + checkbox, settings.checkboxStoredRefs[checkbox]);
  }
  writeStorage("markWhenChecked", settings.markWhenChecked);
  padsVisible(settings.renderPads);
  document.getElementById("padsCheckbox").checked = settings.renderPads;
  fabricationVisible(settings.renderFabrication);
  document.getElementById("fabricationCheckbox").checked = settings.renderFabrication;
  silkscreenVisible(settings.renderSilkscreen);
  document.getElementById("silkscreenCheckbox").checked = settings.renderSilkscreen;
  referencesVisible(settings.renderReferences);
  document.getElementById("referencesCheckbox").checked = settings.renderReferences;
  valuesVisible(settings.renderValues);
  document.getElementById("valuesCheckbox").checked = settings.renderValues;
  tracksVisible(settings.renderTracks);
  document.getElementById("tracksCheckbox").checked = settings.renderTracks;
  zonesVisible(settings.renderZones);
  document.getElementById("zonesCheckbox").checked = settings.renderZones;
  dnpOutline(settings.renderDnpOutline);
  document.getElementById("dnpOutlineCheckbox").checked = settings.renderDnpOutline;
  setRedrawOnDrag(settings.redrawOnDrag);
  document.getElementById("dragCheckbox").checked = settings.redrawOnDrag;
  setDarkMode(settings.darkMode);
  document.getElementById("darkmodeCheckbox").checked = settings.darkMode;
  setHighlightPin1(settings.highlightpin1);
  document.forms.highlightpin1.highlightpin1.value = settings.highlightpin1;
  writeStorage("boardRotation", settings.boardRotation);
  document.getElementById("boardRotation").value = settings.boardRotation / 5;
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
  setOffsetBackRotation(settings.offsetBackRotation);
  document.getElementById("offsetBackRotationCheckbox").checked = settings.offsetBackRotation;
  initDone = true;
  prepCheckboxes();
  changeBomLayout(settings.bomlayout);
}

function saveFile(filename, blob) {
  var link = document.createElement("a");
  var objurl = URL.createObjectURL(blob);
  link.download = filename;
  link.href = objurl;
  link.click();
}

function dataURLtoBlob(dataurl) {
  var arr = dataurl.split(','),
    mime = arr[0].match(/:(.*?);/)[1],
    bstr = atob(arr[1]),
    n = bstr.length,
    u8arr = new Uint8Array(n);
  while (n--) {
    u8arr[n] = bstr.charCodeAt(n);
  }
  return new Blob([u8arr], {
    type: mime
  });
}

var settings = {
  canvaslayout: "FB",
  bomlayout: "left-right",
  bommode: "grouped",
  checkboxes: [],
  checkboxStoredRefs: {},
  darkMode: false,
  highlightpin1: "none",
  redrawOnDrag: true,
  boardRotation: 0,
  offsetBackRotation: false,
  renderPads: true,
  renderReferences: true,
  renderValues: true,
  renderSilkscreen: true,
  renderFabrication: true,
  renderDnpOutline: false,
  renderTracks: true,
  renderZones: true,
  columnOrder: [],
  hiddenColumns: [],
  netColors: {},
}

function initDefaults() {
  settings.bomlayout = readStorage("bomlayout");
  if (settings.bomlayout === null) {
    settings.bomlayout = config.bom_view;
  }
  if (!['bom-only', 'left-right', 'top-bottom'].includes(settings.bomlayout)) {
    settings.bomlayout = config.bom_view;
  }
  settings.bommode = readStorage("bommode");
  if (settings.bommode === null) {
    settings.bommode = "grouped";
  }
  if (settings.bommode == "netlist" && !pcbdata.nets) {
    settings.bommode = "grouped";
  }
  if (!["grouped", "ungrouped", "netlist"].includes(settings.bommode)) {
    settings.bommode = "grouped";
  }
  settings.canvaslayout = readStorage("canvaslayout");
  if (settings.canvaslayout === null) {
    settings.canvaslayout = config.layer_view;
  }
  var bomCheckboxes = readStorage("bomCheckboxes");
  if (bomCheckboxes === null) {
    bomCheckboxes = config.checkboxes;
  }
  settings.checkboxes = bomCheckboxes.split(",").filter((e) => e);
  document.getElementById("bomCheckboxes").value = bomCheckboxes;

  var highlightpin1 = readStorage("highlightpin1") || config.highlight_pin1;
  if (highlightpin1 === "false") highlightpin1 = "none";
  if (highlightpin1 === "true") highlightpin1 = "all";
  setHighlightPin1(highlightpin1);
  document.forms.highlightpin1.highlightpin1.value = highlightpin1;

  settings.markWhenChecked = readStorage("markWhenChecked") || "";
  populateMarkWhenCheckedOptions();

  function initBooleanSetting(storageString, def, elementId, func) {
    var b = readStorage(storageString);
    if (b === null) {
      b = def;
    } else {
      b = (b == "true");
    }
    document.getElementById(elementId).checked = b;
    func(b);
  }

  initBooleanSetting("padsVisible", config.show_pads, "padsCheckbox", padsVisible);
  initBooleanSetting("fabricationVisible", config.show_fabrication, "fabricationCheckbox", fabricationVisible);
  initBooleanSetting("silkscreenVisible", config.show_silkscreen, "silkscreenCheckbox", silkscreenVisible);
  initBooleanSetting("referencesVisible", true, "referencesCheckbox", referencesVisible);
  initBooleanSetting("valuesVisible", true, "valuesCheckbox", valuesVisible);
  if ("tracks" in pcbdata) {
    initBooleanSetting("tracksVisible", true, "tracksCheckbox", tracksVisible);
    initBooleanSetting("zonesVisible", true, "zonesCheckbox", zonesVisible);
  } else {
    document.getElementById("tracksAndZonesCheckboxes").style.display = "none";
    tracksVisible(false);
    zonesVisible(false);
  }
  initBooleanSetting("dnpOutline", false, "dnpOutlineCheckbox", dnpOutline);
  initBooleanSetting("redrawOnDrag", config.redraw_on_drag, "dragCheckbox", setRedrawOnDrag);
  initBooleanSetting("darkmode", config.dark_mode, "darkmodeCheckbox", setDarkMode);

  var fields = ["checkboxes", "References"].concat(config.fields).concat(["Quantity"]);
  var hcols = JSON.parse(readStorage("hiddenColumns"));
  if (hcols === null) {
    hcols = [];
  }
  settings.hiddenColumns = hcols.filter(e => fields.includes(e));

  var cord = JSON.parse(readStorage("columnOrder"));
  if (cord === null) {
    cord = fields;
  } else {
    cord = cord.filter(e => fields.includes(e));
    if (cord.length != fields.length)
      cord = fields;
  }
  settings.columnOrder = cord;

  settings.boardRotation = readStorage("boardRotation");
  if (settings.boardRotation === null) {
    settings.boardRotation = config.board_rotation * 5;
  } else {
    settings.boardRotation = parseInt(settings.boardRotation);
  }
  document.getElementById("boardRotation").value = settings.boardRotation / 5;
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
  initBooleanSetting("offsetBackRotation", config.offset_back_rotation, "offsetBackRotationCheckbox", setOffsetBackRotation);

  settings.netColors = JSON.parse(readStorage("netColors")) || {};
}

// Helper classes for user js callbacks.

const IBOM_EVENT_TYPES = {
  ALL: "all",
  HIGHLIGHT_EVENT: "highlightEvent",
  CHECKBOX_CHANGE_EVENT: "checkboxChangeEvent",
  BOM_BODY_CHANGE_EVENT: "bomBodyChangeEvent",
}

const EventHandler = {
  callbacks: {},
  init: function () {
    for (eventType of Object.values(IBOM_EVENT_TYPES))
      this.callbacks[eventType] = [];
  },
  registerCallback: function (eventType, callback) {
    this.callbacks[eventType].push(callback);
  },
  emitEvent: function (eventType, eventArgs) {
    event = {
      eventType: eventType,
      args: eventArgs,
    }
    var callback;
    for (callback of this.callbacks[eventType])
      callback(event);
    for (callback of this.callbacks[IBOM_EVENT_TYPES.ALL])
      callback(event);
  }
}
EventHandler.init();

///////////////////////////////////////////////

///////////////////////////////////////////////
/* PCB rendering code */

var emptyContext2d = document.createElement("canvas").getContext("2d");

function deg2rad(deg) {
  return deg * Math.PI / 180;
}

function calcFontPoint(linepoint, text, offsetx, offsety, tilt) {
  var point = [
    linepoint[0] * text.width + offsetx,
    linepoint[1] * text.height + offsety
  ];
  // This approximates pcbnew behavior with how text tilts depending on horizontal justification
  point[0] -= (linepoint[1] + 0.5 * (1 + text.justify[0])) * text.height * tilt;
  return point;
}

function drawText(ctx, text, color) {
  if ("ref" in text && !settings.renderReferences) return;
  if ("val" in text && !settings.renderValues) return;
  ctx.save();
  ctx.fillStyle = color;
  ctx.strokeStyle = color;
  ctx.lineCap = "round";
  ctx.lineJoin = "round";
  ctx.lineWidth = text.thickness;
  if ("svgpath" in text) {
    ctx.stroke(new Path2D(text.svgpath));
    ctx.restore();
    return;
  }
  if ("polygons" in text) {
    ctx.fill(getPolygonsPath(text));
    ctx.restore();
    return;
  }
  ctx.translate(...text.pos);
  ctx.translate(text.thickness * 0.5, 0);
  var angle = -text.angle;
  if (text.attr.includes("mirrored")) {
    ctx.scale(-1, 1);
    angle = -angle;
  }
  var tilt = 0;
  if (text.attr.includes("italic")) {
    tilt = 0.125;
  }
  var interline = text.height * 1.5 + text.thickness;
  var txt = text.text.split("\n");
  // KiCad ignores last empty line.
  if (txt[txt.length - 1] == '') txt.pop();
  ctx.rotate(deg2rad(angle));
  var offsety = (1 - text.justify[1]) / 2 * text.height; // One line offset
  offsety -= (txt.length - 1) * (text.justify[1] + 1) / 2 * interline; // Multiline offset
  for (var i in txt) {
    var lineWidth = text.thickness + interline / 2 * tilt;
    for (var j = 0; j < txt[i].length; j++) {
      if (txt[i][j] == '\t') {
        var fourSpaces = 4 * pcbdata.font_data[' '].w * text.width;
        lineWidth += fourSpaces - lineWidth % fourSpaces;
      } else {
        if (txt[i][j] == '~') {
          j++;
          if (j == txt[i].length)
            break;
        }
        lineWidth += pcbdata.font_data[txt[i][j]].w * text.width;
      }
    }
    var offsetx = -lineWidth * (text.justify[0] + 1) / 2;
    var inOverbar = false;
    for (var j = 0; j < txt[i].length; j++) {
      if (config.kicad_text_formatting) {
        if (txt[i][j] == '\t') {
          var fourSpaces = 4 * pcbdata.font_data[' '].w * text.width;
          offsetx += fourSpaces - offsetx % fourSpaces;
          continue;
        } else if (txt[i][j] == '~') {
          j++;
          if (j == txt[i].length)
            break;
          if (txt[i][j] != '~') {
            inOverbar = !inOverbar;
          }
        }
      }
      var glyph = pcbdata.font_data[txt[i][j]];
      if (inOverbar) {
        var overbarStart = [offsetx, -text.height * 1.4 + offsety];
        var overbarEnd = [offsetx + text.width * glyph.w, overbarStart[1]];

        if (!lastHadOverbar) {
          overbarStart[0] += text.height * 1.4 * tilt;
          lastHadOverbar = true;
        }
        ctx.beginPath();
        ctx.moveTo(...overbarStart);
        ctx.lineTo(...overbarEnd);
        ctx.stroke();
      } else {
        lastHadOverbar = false;
      }
      for (var line of glyph.l) {
        ctx.beginPath();
        ctx.moveTo(...calcFontPoint(line[0], text, offsetx, offsety, tilt));
        for (var k = 1; k < line.length; k++) {
          ctx.lineTo(...calcFontPoint(line[k], text, offsetx, offsety, tilt));
        }
        ctx.stroke();
      }
      offsetx += glyph.w * text.width;
    }
    offsety += interline;
  }
  ctx.restore();
}

function drawedge(ctx, scalefactor, edge, color) {
  ctx.strokeStyle = color;
  ctx.fillStyle = color;
  ctx.lineWidth = Math.max(1 / scalefactor, edge.width);
  ctx.lineCap = "round";
  ctx.lineJoin = "round";
  if ("svgpath" in edge) {
    ctx.stroke(new Path2D(edge.svgpath));
  } else {
    ctx.beginPath();
    if (edge.type == "segment") {
      ctx.moveTo(...edge.start);
      ctx.lineTo(...edge.end);
    }
    if (edge.type == "rect") {
      ctx.moveTo(...edge.start);
      ctx.lineTo(edge.start[0], edge.end[1]);
      ctx.lineTo(...edge.end);
      ctx.lineTo(edge.end[0], edge.start[1]);
      ctx.lineTo(...edge.start);
    }
    if (edge.type == "arc") {
      ctx.arc(
        ...edge.start,
        edge.radius,
        deg2rad(edge.startangle),
        deg2rad(edge.endangle));
    }
    if (edge.type == "circle") {
      ctx.arc(
        ...edge.start,
        edge.radius,
        0, 2 * Math.PI);
      ctx.closePath();
    }
    if (edge.type == "curve") {
      ctx.moveTo(...edge.start);
      ctx.bezierCurveTo(...edge.cpa, ...edge.cpb, ...edge.end);
    }
    if("filled" in edge && edge.filled)
      ctx.fill();
    else
      ctx.stroke();
  }
}

function getChamferedRectPath(size, radius, chamfpos, chamfratio) {
  // chamfpos is a bitmask, left = 1, right = 2, bottom left = 4, bottom right = 8
  var path = new Path2D();
  var width = size[0];
  var height = size[1];
  var x = width * -0.5;
  var y = height * -0.5;
  var chamfOffset = Math.min(width, height) * chamfratio;
  path.moveTo(x, 0);
  if (chamfpos & 4) {
    path.lineTo(x, y + height - chamfOffset);
    path.lineTo(x + chamfOffset, y + height);
    path.lineTo(0, y + height);
  } else {
    path.arcTo(x, y + height, x + width, y + height, radius);
  }
  if (chamfpos & 8) {
    path.lineTo(x + width - chamfOffset, y + height);
    path.lineTo(x + width, y + height - chamfOffset);
    path.lineTo(x + width, 0);
  } else {
    path.arcTo(x + width, y + height, x + width, y, radius);
  }
  if (chamfpos & 2) {
    path.lineTo(x + width, y + chamfOffset);
    path.lineTo(x + width - chamfOffset, y);
    path.lineTo(0, y);
  } else {
    path.arcTo(x + width, y, x, y, radius);
  }
  if (chamfpos & 1) {
    path.lineTo(x + chamfOffset, y);
    path.lineTo(x, y + chamfOffset);
    path.lineTo(x, 0);
  } else {
    path.arcTo(x, y, x, y + height, radius);
  }
  path.closePath();
  return path;
}

function getOblongPath(size) {
  return getChamferedRectPath(size, Math.min(size[0], size[1]) / 2, 0, 0);
}

function getPolygonsPath(shape) {
  if (shape.path2d) {
    return shape.path2d;
  }
  if ("svgpath" in shape) {
    shape.path2d = new Path2D(shape.svgpath);
  } else {
    var path = new Path2D();
    for (var polygon of shape.polygons) {
      path.moveTo(...polygon[0]);
      for (var i = 1; i < polygon.length; i++) {
        path.lineTo(...polygon[i]);
      }
      path.closePath();
    }
    shape.path2d = path;
  }
  return shape.path2d;
}

function drawPolygonShape(ctx, scalefactor, shape, color) {
  ctx.save();
  if (!("svgpath" in shape)) {
    ctx.translate(...shape.pos);
    ctx.rotate(deg2rad(-shape.angle));
  }
  if("filled" in shape && !shape.filled) {
    ctx.strokeStyle = color;
    ctx.lineWidth = Math.max(1 / scalefactor, shape.width);
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    ctx.stroke(getPolygonsPath(shape));
  } else {
    ctx.fillStyle = color;
    ctx.fill(getPolygonsPath(shape));
  }
  ctx.restore();
}

function drawDrawing(ctx, scalefactor, drawing, color) {
  if (["segment", "arc", "circle", "curve", "rect"].includes(drawing.type)) {
    drawedge(ctx, scalefactor, drawing, color);
  } else if (drawing.type == "polygon") {
    drawPolygonShape(ctx, scalefactor, drawing, color);
  } else {
    drawText(ctx, drawing, color);
  }
}

function getCirclePath(radius) {
  var path = new Path2D();
  path.arc(0, 0, radius, 0, 2 * Math.PI);
  path.closePath();
  return path;
}

function getCachedPadPath(pad) {
  if (!pad.path2d) {
    // if path2d is not set, build one and cache it on pad object
    if (pad.shape == "rect") {
      pad.path2d = new Path2D();
      pad.path2d.rect(...pad.size.map(c => -c * 0.5), ...pad.size);
    } else if (pad.shape == "oval") {
      pad.path2d = getOblongPath(pad.size);
    } else if (pad.shape == "circle") {
      pad.path2d = getCirclePath(pad.size[0] / 2);
    } else if (pad.shape == "roundrect") {
      pad.path2d = getChamferedRectPath(pad.size, pad.radius, 0, 0);
    } else if (pad.shape == "chamfrect") {
      pad.path2d = getChamferedRectPath(pad.size, pad.radius, pad.chamfpos, pad.chamfratio)
    } else if (pad.shape == "custom") {
      pad.path2d = getPolygonsPath(pad);
    }
  }
  return pad.path2d;
}

function drawPad(ctx, pad, color, outline) {
  ctx.save();
  ctx.translate(...pad.pos);
  ctx.rotate(-deg2rad(pad.angle));
  if (pad.offset) {
    ctx.translate(...pad.offset);
  }
  ctx.fillStyle = color;
  ctx.strokeStyle = color;
  var path = getCachedPadPath(pad);
  if (outline) {
    ctx.stroke(path);
  } else {
    ctx.fill(path);
  }
  ctx.restore();
}

function drawPadHole(ctx, pad, padHoleColor) {
  if (pad.type != "th") return;
  ctx.save();
  ctx.translate(...pad.pos);
  ctx.rotate(-deg2rad(pad.angle));
  ctx.fillStyle = padHoleColor;
  if (pad.drillshape == "oblong") {
    ctx.fill(getOblongPath(pad.drillsize));
  } else {
    ctx.fill(getCirclePath(pad.drillsize[0] / 2));
  }
  ctx.restore();
}

function drawFootprint(ctx, layer, scalefactor, footprint, colors, highlight, outline) {
  if (highlight) {
    // draw bounding box
    if (footprint.layer == layer) {
      ctx.save();
      ctx.globalAlpha = 0.2;
      ctx.translate(...footprint.bbox.pos);
      ctx.rotate(deg2rad(-footprint.bbox.angle));
      ctx.translate(...footprint.bbox.relpos);
      ctx.fillStyle = colors.pad;
      ctx.fillRect(0, 0, ...footprint.bbox.size);
      ctx.globalAlpha = 1;
      ctx.strokeStyle = colors.pad;
      ctx.lineWidth = 3 / scalefactor;
      ctx.strokeRect(0, 0, ...footprint.bbox.size);
      ctx.restore();
    }
  }
  // draw drawings
  for (var drawing of footprint.drawings) {
    if (drawing.layer == layer) {
      drawDrawing(ctx, scalefactor, drawing.drawing, colors.pad);
    }
  }
  ctx.lineWidth = 3 / scalefactor;
  // draw pads
  if (settings.renderPads) {
    for (var pad of footprint.pads) {
      if (pad.layers.includes(layer)) {
        drawPad(ctx, pad, colors.pad, outline);
        if (pad.pin1 &&
          (settings.highlightpin1 == "all" ||
            settings.highlightpin1 == "selected" && highlight)) {
          drawPad(ctx, pad, colors.outline, true);
        }
      }
    }
    for (var pad of footprint.pads) {
      drawPadHole(ctx, pad, colors.padHole);
    }
  }
}

function drawEdgeCuts(canvas, scalefactor) {
  var ctx = canvas.getContext("2d");
  var edgecolor = getComputedStyle(topmostdiv).getPropertyValue('--pcb-edge-color');
  for (var edge of pcbdata.edges) {
    drawDrawing(ctx, scalefactor, edge, edgecolor);
  }
}

function drawFootprints(canvas, layer, scalefactor, highlight) {
  var ctx = canvas.getContext("2d");
  ctx.lineWidth = 3 / scalefactor;
  var style = getComputedStyle(topmostdiv);

  var colors = {
    pad: style.getPropertyValue('--pad-color'),
    padHole: style.getPropertyValue('--pad-hole-color'),
    outline: style.getPropertyValue('--pin1-outline-color'),
  }

  for (var i = 0; i < pcbdata.footprints.length; i++) {
    var mod = pcbdata.footprints[i];
    var outline = settings.renderDnpOutline && pcbdata.bom.skipped.includes(i);
    var h = highlightedFootprints.includes(i);
    var d = markedFootprints.has(i);
    if (highlight) {
      if(h && d) {
        colors.pad = style.getPropertyValue('--pad-color-highlight-both');
        colors.outline = style.getPropertyValue('--pin1-outline-color-highlight-both');
      } else if (h) {
        colors.pad = style.getPropertyValue('--pad-color-highlight');
        colors.outline = style.getPropertyValue('--pin1-outline-color-highlight');
      } else if (d) {
        colors.pad = style.getPropertyValue('--pad-color-highlight-marked');
        colors.outline = style.getPropertyValue('--pin1-outline-color-highlight-marked');
      }
    }
    if( h || d || !highlight) {
      drawFootprint(ctx, layer, scalefactor, mod, colors, highlight, outline);
    }
  }
}

function drawBgLayer(layername, canvas, layer, scalefactor, edgeColor, polygonColor, textColor) {
  var ctx = canvas.getContext("2d");
  for (var d of pcbdata.drawings[layername][layer]) {
    if (["segment", "arc", "circle", "curve", "rect"].includes(d.type)) {
      drawedge(ctx, scalefactor, d, edgeColor);
    } else if (d.type == "polygon") {
      drawPolygonShape(ctx, scalefactor, d, polygonColor);
    } else {
      drawText(ctx, d, textColor);
    }
  }
}

function drawTracks(canvas, layer, defaultColor, highlight) {
  ctx = canvas.getContext("2d");
  ctx.lineCap = "round";
  for (var track of pcbdata.tracks[layer]) {
    if (highlight && highlightedNet != track.net) continue;
    ctx.strokeStyle = highlight ? defaultColor : settings.netColors[track.net] || defaultColor;
    ctx.lineWidth = track.width;
    ctx.beginPath();
    if ('radius' in track) {
      ctx.arc(
        ...track.center,
        track.radius,
        deg2rad(track.startangle),
        deg2rad(track.endangle));
    } else {
      ctx.moveTo(...track.start);
      ctx.lineTo(...track.end);
    }
    ctx.stroke();
  }
}

function drawZones(canvas, layer, defaultColor, highlight) {
  ctx = canvas.getContext("2d");
  ctx.lineJoin = "round";
  for (var zone of pcbdata.zones[layer]) {
    if (highlight && highlightedNet != zone.net) continue;
    ctx.strokeStyle = highlight ? defaultColor : settings.netColors[zone.net] || defaultColor;
    ctx.fillStyle = highlight ? defaultColor : settings.netColors[zone.net] || defaultColor;
    if (!zone.path2d) {
      zone.path2d = getPolygonsPath(zone);
    }
    ctx.fill(zone.path2d, zone.fillrule || "nonzero");
    if (zone.width > 0) {
      ctx.lineWidth = zone.width;
      ctx.stroke(zone.path2d);
    }
  }
}

function clearCanvas(canvas, color = null) {
  var ctx = canvas.getContext("2d");
  ctx.save();
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  if (color) {
    ctx.fillStyle = color;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
  } else {
    if (!window.matchMedia("print").matches)
      ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
  ctx.restore();
}

function drawNets(canvas, layer, highlight) {
  var style = getComputedStyle(topmostdiv);
  if (settings.renderTracks) {
    var trackColor = style.getPropertyValue(highlight ? '--track-color-highlight' : '--track-color');
    drawTracks(canvas, layer, trackColor, highlight);
  }
  if (settings.renderZones) {
    var zoneColor = style.getPropertyValue(highlight ? '--zone-color-highlight' : '--zone-color');
    drawZones(canvas, layer, zoneColor, highlight);
  }
  if (highlight && settings.renderPads) {
    var padColor = style.getPropertyValue('--pad-color-highlight');
    var padHoleColor = style.getPropertyValue('--pad-hole-color');
    var ctx = canvas.getContext("2d");
    for (var footprint of pcbdata.footprints) {
      // draw pads
      var padDrawn = false;
      for (var pad of footprint.pads) {
        if (highlightedNet != pad.net) continue;
        if (pad.layers.includes(layer)) {
          drawPad(ctx, pad, padColor, false);
          padDrawn = true;
        }
      }
      if (padDrawn) {
        // redraw all pad holes because some pads may overlap
        for (var pad of footprint.pads) {
          drawPadHole(ctx, pad, padHoleColor);
        }
      }
    }
  }
}

function drawHighlightsOnLayer(canvasdict, clear = true) {
  if (clear) {
    clearCanvas(canvasdict.highlight);
  }
  if (markedFootprints.size > 0 || highlightedFootprints.length > 0) {
    drawFootprints(canvasdict.highlight, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom, true);
  }
  if (highlightedNet !== null) {
    drawNets(canvasdict.highlight, canvasdict.layer, true);
  }
}

function drawHighlights() {
  drawHighlightsOnLayer(allcanvas.front);
  drawHighlightsOnLayer(allcanvas.back);
}

function drawBackground(canvasdict, clear = true) {
  if (clear) {
    clearCanvas(canvasdict.bg);
    clearCanvas(canvasdict.fab);
    clearCanvas(canvasdict.silk);
  }

  drawNets(canvasdict.bg, canvasdict.layer, false);
  drawFootprints(canvasdict.bg, canvasdict.layer,
    canvasdict.transform.s * canvasdict.transform.zoom, false);

  drawEdgeCuts(canvasdict.bg, canvasdict.transform.s * canvasdict.transform.zoom);

  var style = getComputedStyle(topmostdiv);
  var edgeColor = style.getPropertyValue('--silkscreen-edge-color');
  var polygonColor = style.getPropertyValue('--silkscreen-polygon-color');
  var textColor = style.getPropertyValue('--silkscreen-text-color');
  if (settings.renderSilkscreen) {
    drawBgLayer(
      "silkscreen", canvasdict.silk, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom,
      edgeColor, polygonColor, textColor);
  }
  edgeColor = style.getPropertyValue('--fabrication-edge-color');
  polygonColor = style.getPropertyValue('--fabrication-polygon-color');
  textColor = style.getPropertyValue('--fabrication-text-color');
  if (settings.renderFabrication) {
    drawBgLayer(
      "fabrication", canvasdict.fab, canvasdict.layer,
      canvasdict.transform.s * canvasdict.transform.zoom,
      edgeColor, polygonColor, textColor);
  }
}

function prepareCanvas(canvas, flip, transform) {
  var ctx = canvas.getContext("2d");
  ctx.setTransform(1, 0, 0, 1, 0, 0);
  ctx.scale(transform.zoom, transform.zoom);
  ctx.translate(transform.panx, transform.pany);
  if (flip) {
    ctx.scale(-1, 1);
  }
  ctx.translate(transform.x, transform.y);
  ctx.rotate(deg2rad(settings.boardRotation + (flip && settings.offsetBackRotation ? - 180 : 0)));
  ctx.scale(transform.s, transform.s);
}

function prepareLayer(canvasdict) {
  var flip = (canvasdict.layer === "B");
  for (var c of ["bg", "fab", "silk", "highlight"]) {
    prepareCanvas(canvasdict[c], flip, canvasdict.transform);
  }
}

function rotateVector(v, angle) {
  angle = deg2rad(angle);
  return [
    v[0] * Math.cos(angle) - v[1] * Math.sin(angle),
    v[0] * Math.sin(angle) + v[1] * Math.cos(angle)
  ];
}

function applyRotation(bbox, flip) {
  var corners = [
    [bbox.minx, bbox.miny],
    [bbox.minx, bbox.maxy],
    [bbox.maxx, bbox.miny],
    [bbox.maxx, bbox.maxy],
  ];
  corners = corners.map((v) => rotateVector(v, settings.boardRotation + (flip && settings.offsetBackRotation ? - 180 : 0)));
  return {
    minx: corners.reduce((a, v) => Math.min(a, v[0]), Infinity),
    miny: corners.reduce((a, v) => Math.min(a, v[1]), Infinity),
    maxx: corners.reduce((a, v) => Math.max(a, v[0]), -Infinity),
    maxy: corners.reduce((a, v) => Math.max(a, v[1]), -Infinity),
  }
}

function recalcLayerScale(layerdict, width, height) {
  var flip = (layerdict.layer === "B");
  var bbox = applyRotation(pcbdata.edges_bbox, flip);
  var scalefactor = 0.98 * Math.min(
    width / (bbox.maxx - bbox.minx),
    height / (bbox.maxy - bbox.miny)
  );
  if (scalefactor < 0.1) {
    scalefactor = 1;
  }
  layerdict.transform.s = scalefactor;
  if (flip) {
    layerdict.transform.x = -((bbox.maxx + bbox.minx) * scalefactor + width) * 0.5;
  } else {
    layerdict.transform.x = -((bbox.maxx + bbox.minx) * scalefactor - width) * 0.5;
  }
  layerdict.transform.y = -((bbox.maxy + bbox.miny) * scalefactor - height) * 0.5;
  for (var c of ["bg", "fab", "silk", "highlight"]) {
    canvas = layerdict[c];
    canvas.width = width;
    canvas.height = height;
    canvas.style.width = (width / devicePixelRatio) + "px";
    canvas.style.height = (height / devicePixelRatio) + "px";
  }
}

function redrawCanvas(layerdict) {
  prepareLayer(layerdict);
  drawBackground(layerdict);
  drawHighlightsOnLayer(layerdict);
}

function resizeCanvas(layerdict) {
  var canvasdivid = {
    "F": "frontcanvas",
    "B": "backcanvas"
  } [layerdict.layer];
  var width = document.getElementById(canvasdivid).clientWidth * devicePixelRatio;
  var height = document.getElementById(canvasdivid).clientHeight * devicePixelRatio;
  recalcLayerScale(layerdict, width, height);
  redrawCanvas(layerdict);
}

function resizeAll() {
  resizeCanvas(allcanvas.front);
  resizeCanvas(allcanvas.back);
}

function pointWithinDistanceToSegment(x, y, x1, y1, x2, y2, d) {
  var A = x - x1;
  var B = y - y1;
  var C = x2 - x1;
  var D = y2 - y1;

  var dot = A * C + B * D;
  var len_sq = C * C + D * D;
  var dx, dy;
  if (len_sq == 0) {
    // start and end of the segment coincide
    dx = x - x1;
    dy = y - y1;
  } else {
    var param = dot / len_sq;
    var xx, yy;
    if (param < 0) {
      xx = x1;
      yy = y1;
    } else if (param > 1) {
      xx = x2;
      yy = y2;
    } else {
      xx = x1 + param * C;
      yy = y1 + param * D;
    }
    dx = x - xx;
    dy = y - yy;
  }
  return dx * dx + dy * dy <= d * d;
}

function modulo(n, mod) {
  return ((n % mod) + mod) % mod;
}

function pointWithinDistanceToArc(x, y, xc, yc, radius, startangle, endangle, d) {
  var dx = x - xc;
  var dy = y - yc;
  var r_sq = dx * dx + dy * dy;
  var rmin = Math.max(0, radius - d);
  var rmax = radius + d;

  if (r_sq < rmin * rmin || r_sq > rmax * rmax)
    return false;

  var angle1 = modulo(deg2rad(startangle), 2 * Math.PI);
  var dx1 = xc + radius * Math.cos(angle1) - x;
  var dy1 = yc + radius * Math.sin(angle1) - y;
  if (dx1 * dx1 + dy1 * dy1 <= d * d)
    return true;

  var angle2 = modulo(deg2rad(endangle), 2 * Math.PI);
  var dx2 = xc + radius * Math.cos(angle2) - x;
  var dy2 = yc + radius * Math.sin(angle2) - y;
  if (dx2 * dx2 + dy2 * dy2 <= d * d)
    return true;

  var angle = modulo(Math.atan2(dy, dx), 2 * Math.PI);
  if (angle1 > angle2)
    return (angle >= angle2 || angle <= angle1);
  else
    return (angle >= angle1 && angle <= angle2);
}

function pointWithinPad(x, y, pad) {
  var v = [x - pad.pos[0], y - pad.pos[1]];
  v = rotateVector(v, pad.angle);
  if (pad.offset) {
    v[0] -= pad.offset[0];
    v[1] -= pad.offset[1];
  }
  return emptyContext2d.isPointInPath(getCachedPadPath(pad), ...v);
}

function netHitScan(layer, x, y) {
  // Check track segments
  if (settings.renderTracks && pcbdata.tracks) {
    for (var track of pcbdata.tracks[layer]) {
      if ('radius' in track) {
        if (pointWithinDistanceToArc(x, y, ...track.center, track.radius, track.startangle, track.endangle, track.width / 2)) {
          return track.net;
        }
      } else {
        if (pointWithinDistanceToSegment(x, y, ...track.start, ...track.end, track.width / 2)) {
          return track.net;
        }
      }
    }
  }
  // Check pads
  if (settings.renderPads) {
    for (var footprint of pcbdata.footprints) {
      for (var pad of footprint.pads) {
        if (pad.layers.includes(layer) && pointWithinPad(x, y, pad)) {
          return pad.net;
        }
      }
    }
  }
  return null;
}

function pointWithinFootprintBbox(x, y, bbox) {
  var v = [x - bbox.pos[0], y - bbox.pos[1]];
  v = rotateVector(v, bbox.angle);
  return bbox.relpos[0] <= v[0] && v[0] <= bbox.relpos[0] + bbox.size[0] &&
    bbox.relpos[1] <= v[1] && v[1] <= bbox.relpos[1] + bbox.size[1];
}

function bboxHitScan(layer, x, y) {
  var result = [];
  for (var i = 0; i < pcbdata.footprints.length; i++) {
    var footprint = pcbdata.footprints[i];
    if (footprint.layer == layer) {
      if (pointWithinFootprintBbox(x, y, footprint.bbox)) {
        result.push(i);
      }
    }
  }
  return result;
}

function handlePointerDown(e, layerdict) {
  if (e.button != 0 && e.button != 1) {
    return;
  }
  e.preventDefault();
  e.stopPropagation();

  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  layerdict.pointerStates[e.pointerId] = {
    distanceTravelled: 0,
    lastX: e.offsetX,
    lastY: e.offsetY,
    downTime: Date.now(),
  };
}

function handleMouseClick(e, layerdict) {
  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  var x = e.offsetX;
  var y = e.offsetY;
  var t = layerdict.transform;
  var flip = layerdict.layer === "B";
  if (flip) {
    x = (devicePixelRatio * x / t.zoom - t.panx + t.x) / -t.s;
  } else {
    x = (devicePixelRatio * x / t.zoom - t.panx - t.x) / t.s;
  }
  y = (devicePixelRatio * y / t.zoom - t.y - t.pany) / t.s;
  var v = rotateVector([x, y], -settings.boardRotation + (flip && settings.offsetBackRotation ? - 180 : 0));
  if ("nets" in pcbdata) {
    var net = netHitScan(layerdict.layer, ...v);
    if (net !== highlightedNet) {
      netClicked(net);
    }
  }
  if (highlightedNet === null) {
    var footprints = bboxHitScan(layerdict.layer, ...v);
    if (footprints.length > 0) {
      footprintsClicked(footprints);
    }
  }
}

function handlePointerLeave(e, layerdict) {
  e.preventDefault();
  e.stopPropagation();

  if (!settings.redrawOnDrag) {
    redrawCanvas(layerdict);
  }

  delete layerdict.pointerStates[e.pointerId];
}

function resetTransform(layerdict) {
  layerdict.transform.panx = 0;
  layerdict.transform.pany = 0;
  layerdict.transform.zoom = 1;
  redrawCanvas(layerdict);
}

function handlePointerUp(e, layerdict) {
  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  e.preventDefault();
  e.stopPropagation();

  if (e.button == 2) {
    // Reset pan and zoom on right click.
    resetTransform(layerdict);
    layerdict.anotherPointerTapped = false;
    return;
  }

  // We haven't necessarily had a pointermove event since the interaction started, so make sure we update this now
  var ptr = layerdict.pointerStates[e.pointerId];
  ptr.distanceTravelled += Math.abs(e.offsetX - ptr.lastX) + Math.abs(e.offsetY - ptr.lastY);

  if (e.button == 0 && ptr.distanceTravelled < 10 && Date.now() - ptr.downTime <= 500) {
    if (Object.keys(layerdict.pointerStates).length == 1) {
      if (layerdict.anotherPointerTapped) {
        // This is the second pointer coming off of a two-finger tap
        resetTransform(layerdict);
      } else {
        // This is just a regular tap
        handleMouseClick(e, layerdict);
      }
      layerdict.anotherPointerTapped = false;
    } else {
      // This is the first finger coming off of what could become a two-finger tap
      layerdict.anotherPointerTapped = true;
    }
  } else {
    if (!settings.redrawOnDrag) {
      redrawCanvas(layerdict);
    }
    layerdict.anotherPointerTapped = false;
  }

  delete layerdict.pointerStates[e.pointerId];
}

function handlePointerMove(e, layerdict) {
  if (!layerdict.pointerStates.hasOwnProperty(e.pointerId)) {
    return;
  }
  e.preventDefault();
  e.stopPropagation();

  if (!e.hasOwnProperty("offsetX")) {
    // The polyfill doesn't set this properly
    e.offsetX = e.pageX - e.currentTarget.offsetLeft;
    e.offsetY = e.pageY - e.currentTarget.offsetTop;
  }

  var thisPtr = layerdict.pointerStates[e.pointerId];

  var dx = e.offsetX - thisPtr.lastX;
  var dy = e.offsetY - thisPtr.lastY;

  // If this number is low on pointer up, we count the action as a click
  thisPtr.distanceTravelled += Math.abs(dx) + Math.abs(dy);

  if (Object.keys(layerdict.pointerStates).length == 1) {
    // This is a simple drag
    layerdict.transform.panx += devicePixelRatio * dx / layerdict.transform.zoom;
    layerdict.transform.pany += devicePixelRatio * dy / layerdict.transform.zoom;
  } else if (Object.keys(layerdict.pointerStates).length == 2) {
    var otherPtr = Object.values(layerdict.pointerStates).filter((ptr) => ptr != thisPtr)[0];

    var oldDist = Math.sqrt(Math.pow(thisPtr.lastX - otherPtr.lastX, 2) + Math.pow(thisPtr.lastY - otherPtr.lastY, 2));
    var newDist = Math.sqrt(Math.pow(e.offsetX - otherPtr.lastX, 2) + Math.pow(e.offsetY - otherPtr.lastY, 2));

    var scaleFactor = newDist / oldDist;

    if (scaleFactor != NaN) {
      layerdict.transform.zoom *= scaleFactor;

      var zoomd = (1 - scaleFactor) / layerdict.transform.zoom;
      layerdict.transform.panx += devicePixelRatio * otherPtr.lastX * zoomd;
      layerdict.transform.pany += devicePixelRatio * otherPtr.lastY * zoomd;
    }
  }

  thisPtr.lastX = e.offsetX;
  thisPtr.lastY = e.offsetY;

  if (settings.redrawOnDrag) {
    redrawCanvas(layerdict);
  }
}

function handleMouseWheel(e, layerdict) {
  e.preventDefault();
  e.stopPropagation();
  var t = layerdict.transform;
  var wheeldelta = e.deltaY;
  if (e.deltaMode == 1) {
    // FF only, scroll by lines
    wheeldelta *= 30;
  } else if (e.deltaMode == 2) {
    wheeldelta *= 300;
  }
  var m = Math.pow(1.1, -wheeldelta / 40);
  // Limit amount of zoom per tick.
  if (m > 2) {
    m = 2;
  } else if (m < 0.5) {
    m = 0.5;
  }
  t.zoom *= m;
  var zoomd = (1 - m) / t.zoom;
  t.panx += devicePixelRatio * e.offsetX * zoomd;
  t.pany += devicePixelRatio * e.offsetY * zoomd;
  redrawCanvas(layerdict);
}

function addMouseHandlers(div, layerdict) {
  div.addEventListener("pointerdown", function(e) {
    handlePointerDown(e, layerdict);
  });
  div.addEventListener("pointermove", function(e) {
    handlePointerMove(e, layerdict);
  });
  div.addEventListener("pointerup", function(e) {
    handlePointerUp(e, layerdict);
  });
  var pointerleave = function(e) {
    handlePointerLeave(e, layerdict);
  }
  div.addEventListener("pointercancel", pointerleave);
  div.addEventListener("pointerleave", pointerleave);
  div.addEventListener("pointerout", pointerleave);

  div.onwheel = function(e) {
    handleMouseWheel(e, layerdict);
  }
  for (var element of [div, layerdict.bg, layerdict.fab, layerdict.silk, layerdict.highlight]) {
    element.addEventListener("contextmenu", function(e) {
      e.preventDefault();
    }, false);
  }
}

function setRedrawOnDrag(value) {
  settings.redrawOnDrag = value;
  writeStorage("redrawOnDrag", value);
}

function setBoardRotation(value) {
  settings.boardRotation = value * 5;
  writeStorage("boardRotation", settings.boardRotation);
  document.getElementById("rotationDegree").textContent = settings.boardRotation;
  resizeAll();
}

function setOffsetBackRotation(value) {
  settings.offsetBackRotation = value;
  writeStorage("offsetBackRotation", value);
  resizeAll();
}

function initRender() {
  allcanvas = {
    front: {
      transform: {
        x: 0,
        y: 0,
        s: 1,
        panx: 0,
        pany: 0,
        zoom: 1,
      },
      pointerStates: {},
      anotherPointerTapped: false,
      bg: document.getElementById("F_bg"),
      fab: document.getElementById("F_fab"),
      silk: document.getElementById("F_slk"),
      highlight: document.getElementById("F_hl"),
      layer: "F",
    },
    back: {
      transform: {
        x: 0,
        y: 0,
        s: 1,
        panx: 0,
        pany: 0,
        zoom: 1,
      },
      pointerStates: {},
      anotherPointerTapped: false,
      bg: document.getElementById("B_bg"),
      fab: document.getElementById("B_fab"),
      silk: document.getElementById("B_slk"),
      highlight: document.getElementById("B_hl"),
      layer: "B",
    }
  };
  addMouseHandlers(document.getElementById("frontcanvas"), allcanvas.front);
  addMouseHandlers(document.getElementById("backcanvas"), allcanvas.back);
}

///////////////////////////////////////////////

///////////////////////////////////////////////
/*
 * Table reordering via Drag'n'Drop
 * Inspired by: https://htmldom.dev/drag-and-drop-table-column
 */

function setBomHandlers() {

  const bom = document.getElementById('bomtable');

  let dragName;
  let placeHolderElements;
  let draggingElement;
  let forcePopulation;
  let xOffset;
  let yOffset;
  let wasDragged;

  const mouseUpHandler = function(e) {
    // Delete dragging element
    draggingElement.remove();

    // Make BOM selectable again
    bom.style.removeProperty("userSelect");

    // Remove listeners
    document.removeEventListener('mousemove', mouseMoveHandler);
    document.removeEventListener('mouseup', mouseUpHandler);

    if (wasDragged) {
      // Redraw whole BOM
      populateBomTable();
    }
  }

  const mouseMoveHandler = function(e) {
    // Notice the dragging
    wasDragged = true;

    // Make the dragged element visible
    draggingElement.style.removeProperty("display");

    // Set elements position to mouse position
    draggingElement.style.left = `${e.screenX - xOffset}px`;
    draggingElement.style.top = `${e.screenY - yOffset}px`;

    // Forced redrawing of BOM table
    if (forcePopulation) {
      forcePopulation = false;
      // Copy array
      phe = Array.from(placeHolderElements);
      // populate BOM table again
      populateBomHeader(dragName, phe);
      populateBomBody(dragName, phe);
    }

    // Set up array of hidden columns
    var hiddenColumns = Array.from(settings.hiddenColumns);
    // In the ungrouped mode, quantity don't exist
    if (settings.bommode === "ungrouped")
      hiddenColumns.push("Quantity");
    // If no checkbox fields can be found, we consider them hidden
    if (settings.checkboxes.length == 0)
      hiddenColumns.push("checkboxes");

    // Get table headers and group them into checkboxes, extrafields and normal headers
    const bh = document.getElementById("bomhead");
    headers = Array.from(bh.querySelectorAll("th"))
    headers.shift() // numCol is not part of the columnOrder
    headerGroups = []
    lastCompoundClass = null;
    for (i = 0; i < settings.columnOrder.length; i++) {
      cElem = settings.columnOrder[i];
      if (hiddenColumns.includes(cElem)) {
        // Hidden columns appear as a dummy element
        headerGroups.push([]);
        continue;
      }
      elem = headers.filter(e => getColumnOrderName(e) === cElem)[0];
      if (elem.classList.contains("bom-checkbox")) {
        if (lastCompoundClass === "bom-checkbox") {
          cbGroup = headerGroups.pop();
          cbGroup.push(elem);
          headerGroups.push(cbGroup);
        } else {
          lastCompoundClass = "bom-checkbox";
          headerGroups.push([elem])
        }
      } else {
        headerGroups.push([elem])
      }
    }

    // Copy settings.columnOrder
    var columns = Array.from(settings.columnOrder)

    // Set up array with indices of hidden columns
    var hiddenIndices = hiddenColumns.map(e => settings.columnOrder.indexOf(e));
    var dragIndex = columns.indexOf(dragName);
    var swapIndex = dragIndex;
    var swapDone = false;

    // Check if the current dragged element is swapable with the left or right element
    if (dragIndex > 0) {
      // Get left headers boundingbox
      swapIndex = dragIndex - 1;
      while (hiddenIndices.includes(swapIndex) && swapIndex > 0)
        swapIndex--;
      if (!hiddenIndices.includes(swapIndex)) {
        box = getBoundingClientRectFromMultiple(headerGroups[swapIndex]);
        if (e.clientX < box.left + window.scrollX + (box.width / 2)) {
          swapElement = columns[dragIndex];
          columns.splice(dragIndex, 1);
          columns.splice(swapIndex, 0, swapElement);
          forcePopulation = true;
          swapDone = true;
        }
      }
    }
    if ((!swapDone) && dragIndex < headerGroups.length - 1) {
      // Get right headers boundingbox
      swapIndex = dragIndex + 1;
      while (hiddenIndices.includes(swapIndex))
        swapIndex++;
      if (swapIndex < headerGroups.length) {
        box = getBoundingClientRectFromMultiple(headerGroups[swapIndex]);
        if (e.clientX > box.left + window.scrollX + (box.width / 2)) {
          swapElement = columns[dragIndex];
          columns.splice(dragIndex, 1);
          columns.splice(swapIndex, 0, swapElement);
          forcePopulation = true;
          swapDone = true;
        }
      }
    }

    // Write back change to storage
    if (swapDone) {
      settings.columnOrder = columns
      writeStorage("columnOrder", JSON.stringify(columns));
    }

  }

  const mouseDownHandler = function(e) {
    var target = e.target;
    if (target.tagName.toLowerCase() != "td")
      target = target.parentElement;

    // Used to check if a dragging has ever happened
    wasDragged = false;

    // Create new element which will be displayed as the dragged column
    draggingElement = document.createElement("div")
    draggingElement.classList.add("dragging");
    draggingElement.style.display = "none";
    draggingElement.style.position = "absolute";
    draggingElement.style.overflow = "hidden";

    // Get bomhead and bombody elements
    const bh = document.getElementById("bomhead");
    const bb = document.getElementById("bombody");

    // Get all compound headers for the current column
    var compoundHeaders;
    if (target.classList.contains("bom-checkbox")) {
      compoundHeaders = Array.from(bh.querySelectorAll("th.bom-checkbox"));
    } else {
      compoundHeaders = [target];
    }

    // Create new table which will display the column
    var newTable = document.createElement("table");
    newTable.classList.add("bom");
    newTable.style.background = "white";
    draggingElement.append(newTable);

    // Create new header element
    var newHeader = document.createElement("thead");
    newTable.append(newHeader);

    // Set up array for storing all placeholder elements
    placeHolderElements = [];

    // Add all compound headers to the new thead element and placeholders
    compoundHeaders.forEach(function(h) {
      clone = cloneElementWithDimensions(h);
      newHeader.append(clone);
      placeHolderElements.push(clone);
    });

    // Create new body element
    var newBody = document.createElement("tbody");
    newTable.append(newBody);

    // Get indices for compound headers
    var idxs = compoundHeaders.map(e => getBomTableHeaderIndex(e));

    // For each row in the BOM body...
    var rows = bb.querySelectorAll("tr");
    rows.forEach(function(row) {
      // ..get the cells for the compound column
      const tds = row.querySelectorAll("td");
      var copytds = idxs.map(i => tds[i]);
      // Add them to the new element and the placeholders
      var newRow = document.createElement("tr");
      copytds.forEach(function(td) {
        clone = cloneElementWithDimensions(td);
        newRow.append(clone);
        placeHolderElements.push(clone);
      });
      newBody.append(newRow);
    });

    // Compute width for compound header
    var width = compoundHeaders.reduce((acc, x) => acc + x.clientWidth, 0);
    draggingElement.style.width = `${width}px`;

    // Insert the new dragging element and disable selection on BOM
    bom.insertBefore(draggingElement, null);
    bom.style.userSelect = "none";

    // Determine the mouse position offset
    xOffset = e.screenX - compoundHeaders.reduce((acc, x) => Math.min(acc, x.offsetLeft), compoundHeaders[0].offsetLeft);
    yOffset = e.screenY - compoundHeaders[0].offsetTop;

    // Get name for the column in settings.columnOrder
    dragName = getColumnOrderName(target);

    // Change text and class for placeholder elements
    placeHolderElements = placeHolderElements.map(function(e) {
      newElem = cloneElementWithDimensions(e);
      newElem.textContent = "";
      newElem.classList.add("placeholder");
      return newElem;
    });

    // On next mouse move, the whole BOM needs to be redrawn to show the placeholders
    forcePopulation = true;

    // Add listeners for move and up on mouse
    document.addEventListener('mousemove', mouseMoveHandler);
    document.addEventListener('mouseup', mouseUpHandler);
  }

  // In netlist mode, there is nothing to reorder
  if (settings.bommode === "netlist")
    return;

  // Add mouseDownHandler to every column except the numCol
  bom.querySelectorAll("th")
    .forEach(function(head) {
      if (!head.classList.contains("numCol")) {
        head.onmousedown = mouseDownHandler;
      }
    });

}

function getBoundingClientRectFromMultiple(elements) {
  var elems = Array.from(elements);

  if (elems.length == 0)
    return null;

  var box = elems.shift()
    .getBoundingClientRect();

  elems.forEach(function(elem) {
    var elembox = elem.getBoundingClientRect();
    box.left = Math.min(elembox.left, box.left);
    box.top = Math.min(elembox.top, box.top);
    box.width += elembox.width;
    box.height = Math.max(elembox.height, box.height);
  });

  return box;
}

function cloneElementWithDimensions(elem) {
  var newElem = elem.cloneNode(true);
  newElem.style.height = window.getComputedStyle(elem).height;
  newElem.style.width = window.getComputedStyle(elem).width;
  return newElem;
}

function getBomTableHeaderIndex(elem) {
  const bh = document.getElementById('bomhead');
  const ths = Array.from(bh.querySelectorAll("th"));
  return ths.indexOf(elem);
}

function getColumnOrderName(elem) {
  var cname = elem.getAttribute("col_name");
  if (cname === "bom-checkbox")
    return "checkboxes";
  else
    return cname;
}

function resizableGrid(tablehead) {
  var cols = tablehead.firstElementChild.children;
  var rowWidth = tablehead.offsetWidth;

  for (var i = 1; i < cols.length; i++) {
    if (cols[i].classList.contains("bom-checkbox"))
      continue;
    cols[i].style.width = ((cols[i].clientWidth - paddingDiff(cols[i])) * 100 / rowWidth) + '%';
  }

  for (var i = 1; i < cols.length - 1; i++) {
    var div = document.createElement('div');
    div.className = "column-width-handle";
    cols[i].appendChild(div);
    setListeners(div);
  }

  function setListeners(div) {
    var startX, curCol, nxtCol, curColWidth, nxtColWidth, rowWidth;

    div.addEventListener('mousedown', function(e) {
      e.preventDefault();
      e.stopPropagation();

      curCol = e.target.parentElement;
      nxtCol = curCol.nextElementSibling;
      startX = e.pageX;

      var padding = paddingDiff(curCol);

      rowWidth = curCol.parentElement.offsetWidth;
      curColWidth = curCol.clientWidth - padding;
      nxtColWidth = nxtCol.clientWidth - padding;
    });

    document.addEventListener('mousemove', function(e) {
      if (startX) {
        var diffX = e.pageX - startX;
        diffX = -Math.min(-diffX, curColWidth - 20);
        diffX = Math.min(diffX, nxtColWidth - 20);

        curCol.style.width = ((curColWidth + diffX) * 100 / rowWidth) + '%';
        nxtCol.style.width = ((nxtColWidth - diffX) * 100 / rowWidth) + '%';
        console.log(`${curColWidth + nxtColWidth} ${(curColWidth + diffX) * 100 / rowWidth + (nxtColWidth - diffX) * 100 / rowWidth}`);
      }
    });

    document.addEventListener('mouseup', function(e) {
      curCol = undefined;
      nxtCol = undefined;
      startX = undefined;
      nxtColWidth = undefined;
      curColWidth = undefined
    });
  }

  function paddingDiff(col) {

    if (getStyleVal(col, 'box-sizing') == 'border-box') {
      return 0;
    }

    var padLeft = getStyleVal(col, 'padding-left');
    var padRight = getStyleVal(col, 'padding-right');
    return (parseInt(padLeft) + parseInt(padRight));

  }

  function getStyleVal(elm, css) {
    return (window.getComputedStyle(elm, null).getPropertyValue(css))
  }
}

///////////////////////////////////////////////

///////////////////////////////////////////////
/* DOM manipulation and misc code */

var bomsplit;
var canvassplit;
var initDone = false;
var bomSortFunction = null;
var currentSortColumn = null;
var currentSortOrder = null;
var currentHighlightedRowId;
var highlightHandlers = [];
var footprintIndexToHandler = {};
var netsToHandler = {};
var markedFootprints = new Set();
var highlightedFootprints = [];
var highlightedNet = null;
var lastClicked;

function dbg(html) {
  dbgdiv.innerHTML = html;
}

function redrawIfInitDone() {
  if (initDone) {
    redrawCanvas(allcanvas.front);
    redrawCanvas(allcanvas.back);
  }
}

function padsVisible(value) {
  writeStorage("padsVisible", value);
  settings.renderPads = value;
  redrawIfInitDone();
}

function referencesVisible(value) {
  writeStorage("referencesVisible", value);
  settings.renderReferences = value;
  redrawIfInitDone();
}

function valuesVisible(value) {
  writeStorage("valuesVisible", value);
  settings.renderValues = value;
  redrawIfInitDone();
}

function tracksVisible(value) {
  writeStorage("tracksVisible", value);
  settings.renderTracks = value;
  redrawIfInitDone();
}

function zonesVisible(value) {
  writeStorage("zonesVisible", value);
  settings.renderZones = value;
  redrawIfInitDone();
}

function dnpOutline(value) {
  writeStorage("dnpOutline", value);
  settings.renderDnpOutline = value;
  redrawIfInitDone();
}

function setDarkMode(value) {
  if (value) {
    topmostdiv.classList.add("dark");
  } else {
    topmostdiv.classList.remove("dark");
  }
  writeStorage("darkmode", value);
  settings.darkMode = value;
  redrawIfInitDone();
  if (initDone) {
    populateBomTable();
  }
}

function setShowBOMColumn(field, value) {
  if (field === "references") {
    var rl = document.getElementById("reflookup");
    rl.disabled = !value;
    if (!value) {
      rl.value = "";
      updateRefLookup("");
    }
  }

  var n = settings.hiddenColumns.indexOf(field);
  if (value) {
    if (n != -1) {
      settings.hiddenColumns.splice(n, 1);
    }
  } else {
    if (n == -1) {
      settings.hiddenColumns.push(field);
    }
  }

  writeStorage("hiddenColumns", JSON.stringify(settings.hiddenColumns));

  if (initDone) {
    populateBomTable();
  }

  redrawIfInitDone();
}


function setFullscreen(value) {
  if (value) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
}

function fabricationVisible(value) {
  writeStorage("fabricationVisible", value);
  settings.renderFabrication = value;
  redrawIfInitDone();
}

function silkscreenVisible(value) {
  writeStorage("silkscreenVisible", value);
  settings.renderSilkscreen = value;
  redrawIfInitDone();
}

function setHighlightPin1(value) {
  writeStorage("highlightpin1", value);
  settings.highlightpin1 = value;
  redrawIfInitDone();
}

function getStoredCheckboxRefs(checkbox) {
  function convert(ref) {
    var intref = parseInt(ref);
    if (isNaN(intref)) {
      for (var i = 0; i < pcbdata.footprints.length; i++) {
        if (pcbdata.footprints[i].ref == ref) {
          return i;
        }
      }
      return -1;
    } else {
      return intref;
    }
  }
  if (!(checkbox in settings.checkboxStoredRefs)) {
    var val = readStorage("checkbox_" + checkbox);
    settings.checkboxStoredRefs[checkbox] = val ? val : "";
  }
  if (!settings.checkboxStoredRefs[checkbox]) {
    return new Set();
  } else {
    return new Set(settings.checkboxStoredRefs[checkbox].split(",").map(r => convert(r)).filter(a => a >= 0));
  }
}

function getCheckboxState(checkbox, references) {
  var storedRefsSet = getStoredCheckboxRefs(checkbox);
  var currentRefsSet = new Set(references.map(r => r[1]));
  // Get difference of current - stored
  var difference = new Set(currentRefsSet);
  for (ref of storedRefsSet) {
    difference.delete(ref);
  }
  if (difference.size == 0) {
    // All the current refs are stored
    return "checked";
  } else if (difference.size == currentRefsSet.size) {
    // None of the current refs are stored
    return "unchecked";
  } else {
    // Some of the refs are stored
    return "indeterminate";
  }
}

function setBomCheckboxState(checkbox, element, references) {
  var state = getCheckboxState(checkbox, references);
  element.checked = (state == "checked");
  element.indeterminate = (state == "indeterminate");
}

function createCheckboxChangeHandler(checkbox, references, row) {
  return function () {
    refsSet = getStoredCheckboxRefs(checkbox);
    var markWhenChecked = settings.markWhenChecked == checkbox;
    eventArgs = {
      checkbox: checkbox,
      refs: references,
    }
    if (this.checked) {
      // checkbox ticked
      for (var ref of references) {
        refsSet.add(ref[1]);
      }
      if (markWhenChecked) {
        row.classList.add("checked");
        for (var ref of references) {
          markedFootprints.add(ref[1]);
        }
        drawHighlights();
      }
      eventArgs.state = 'checked';
    } else {
      // checkbox unticked
      for (var ref of references) {
        refsSet.delete(ref[1]);
      }
      if (markWhenChecked) {
        row.classList.remove("checked");
        for (var ref of references) {
          markedFootprints.delete(ref[1]);
        }
        drawHighlights();
      }
      eventArgs.state = 'unchecked';
    }
    settings.checkboxStoredRefs[checkbox] = [...refsSet].join(",");
    writeStorage("checkbox_" + checkbox, settings.checkboxStoredRefs[checkbox]);
    updateCheckboxStats(checkbox);
    EventHandler.emitEvent(IBOM_EVENT_TYPES.CHECKBOX_CHANGE_EVENT, eventArgs);
  }
}

function clearHighlightedFootprints() {
  if (currentHighlightedRowId) {
    document.getElementById(currentHighlightedRowId).classList.remove("highlighted");
    currentHighlightedRowId = null;
    highlightedFootprints = [];
    highlightedNet = null;
  }
}

function createRowHighlightHandler(rowid, refs, net) {
  return function () {
    if (currentHighlightedRowId) {
      if (currentHighlightedRowId == rowid) {
        return;
      }
      document.getElementById(currentHighlightedRowId).classList.remove("highlighted");
    }
    document.getElementById(rowid).classList.add("highlighted");
    currentHighlightedRowId = rowid;
    highlightedFootprints = refs ? refs.map(r => r[1]) : [];
    highlightedNet = net;
    drawHighlights();
    EventHandler.emitEvent(
      IBOM_EVENT_TYPES.HIGHLIGHT_EVENT, {
      rowid: rowid,
      refs: refs,
      net: net
    });
  }
}

function updateNetColors() {
  writeStorage("netColors", JSON.stringify(settings.netColors));
  redrawIfInitDone();
}

function netColorChangeHandler(net) {
  return (event) => {
    settings.netColors[net] = event.target.value;
    updateNetColors();
  }
}

function netColorRightClick(net) {
  return (event) => {
    if(event.button == 2) {
      event.preventDefault();
      event.stopPropagation();

      var style = getComputedStyle(topmostdiv);
      var defaultNetColor = style.getPropertyValue('--track-color').trim();
      event.target.value = defaultNetColor;
      delete settings.netColors[net];
      updateNetColors();
    }
  }
}

function entryMatches(entry) {
  if (settings.bommode == "netlist") {
    // entry is just a net name
    return entry.toLowerCase().indexOf(filter) >= 0;
  }
  // check refs
  if (!settings.hiddenColumns.includes("references")) {
    for (var ref of entry) {
      if (ref[0].toLowerCase().indexOf(filter) >= 0) {
        return true;
      }
    }
  }
  // check fields
  for (var i in config.fields) {
    var f = config.fields[i];
    if (!settings.hiddenColumns.includes(f)) {
      for (var ref of entry) {
        if (String(pcbdata.bom.fields[ref[1]][i]).toLowerCase().indexOf(filter) >= 0) {
          return true;
        }
      }
    }
  }
  return false;
}

function findRefInEntry(entry) {
  return entry.filter(r => r[0].toLowerCase() == reflookup);
}

function highlightFilter(s) {
  if (!filter) {
    return s;
  }
  var parts = s.toLowerCase().split(filter);
  if (parts.length == 1) {
    return s;
  }
  var r = "";
  var pos = 0;
  for (var i in parts) {
    if (i > 0) {
      r += '<mark class="highlight">' +
        s.substring(pos, pos + filter.length) +
        '</mark>';
      pos += filter.length;
    }
    r += s.substring(pos, pos + parts[i].length);
    pos += parts[i].length;
  }
  return r;
}

function checkboxSetUnsetAllHandler(checkboxname) {
  return function () {
    var checkboxnum = 0;
    while (checkboxnum < settings.checkboxes.length &&
      settings.checkboxes[checkboxnum].toLowerCase() != checkboxname.toLowerCase()) {
      checkboxnum++;
    }
    if (checkboxnum >= settings.checkboxes.length) {
      return;
    }
    var allset = true;
    var checkbox;
    var row;
    for (row of bombody.childNodes) {
      checkbox = row.childNodes[checkboxnum + 1].childNodes[0];
      if (!checkbox.checked || checkbox.indeterminate) {
        allset = false;
        break;
      }
    }
    for (row of bombody.childNodes) {
      checkbox = row.childNodes[checkboxnum + 1].childNodes[0];
      checkbox.checked = !allset;
      checkbox.indeterminate = false;
      checkbox.onchange();
    }
  }
}

function createColumnHeader(name, cls, comparator, is_checkbox = false) {
  var th = document.createElement("TH");
  th.innerHTML = name;
  th.classList.add(cls);
  if (is_checkbox)
    th.setAttribute("col_name", "bom-checkbox");
  else
    th.setAttribute("col_name", name);
  var span = document.createElement("SPAN");
  span.classList.add("sortmark");
  span.classList.add("none");
  th.appendChild(span);
  var spacer = document.createElement("div");
  spacer.className = "column-spacer";
  th.appendChild(spacer);
  spacer.onclick = function () {
    if (currentSortColumn && th !== currentSortColumn) {
      // Currently sorted by another column
      currentSortColumn.childNodes[1].classList.remove(currentSortOrder);
      currentSortColumn.childNodes[1].classList.add("none");
      currentSortColumn = null;
      currentSortOrder = null;
    }
    if (currentSortColumn && th === currentSortColumn) {
      // Already sorted by this column
      if (currentSortOrder == "asc") {
        // Sort by this column, descending order
        bomSortFunction = function (a, b) {
          return -comparator(a, b);
        }
        currentSortColumn.childNodes[1].classList.remove("asc");
        currentSortColumn.childNodes[1].classList.add("desc");
        currentSortOrder = "desc";
      } else {
        // Unsort
        bomSortFunction = null;
        currentSortColumn.childNodes[1].classList.remove("desc");
        currentSortColumn.childNodes[1].classList.add("none");
        currentSortColumn = null;
        currentSortOrder = null;
      }
    } else {
      // Sort by this column, ascending order
      bomSortFunction = comparator;
      currentSortColumn = th;
      currentSortColumn.childNodes[1].classList.remove("none");
      currentSortColumn.childNodes[1].classList.add("asc");
      currentSortOrder = "asc";
    }
    populateBomBody();
  }
  if (is_checkbox) {
    spacer.onclick = fancyDblClickHandler(
      spacer, spacer.onclick, checkboxSetUnsetAllHandler(name));
  }
  return th;
}

function populateBomHeader(placeHolderColumn = null, placeHolderElements = null) {
  while (bomhead.firstChild) {
    bomhead.removeChild(bomhead.firstChild);
  }
  var tr = document.createElement("TR");
  var th = document.createElement("TH");
  th.classList.add("numCol");

  var vismenu = document.createElement("div");
  vismenu.id = "vismenu";
  vismenu.classList.add("menu");

  var visbutton = document.createElement("div");
  visbutton.classList.add("visbtn");
  visbutton.classList.add("hideonprint");

  var viscontent = document.createElement("div");
  viscontent.classList.add("menu-content");
  viscontent.id = "vismenu-content";

  settings.columnOrder.forEach(column => {
    if (typeof column !== "string")
      return;

    // Skip empty columns
    if (column === "checkboxes" && settings.checkboxes.length == 0)
      return;
    else if (column === "Quantity" && settings.bommode == "ungrouped")
      return;

    var label = document.createElement("label");
    label.classList.add("menu-label");

    var input = document.createElement("input");
    input.classList.add("visibility_checkbox");
    input.type = "checkbox";
    input.onchange = function (e) {
      setShowBOMColumn(column, e.target.checked)
    };
    input.checked = !(settings.hiddenColumns.includes(column));

    label.appendChild(input);
    if (column.length > 0)
      label.append(column[0].toUpperCase() + column.slice(1));

    viscontent.appendChild(label);
  });

  viscontent.childNodes[0].classList.add("menu-label-top");

  vismenu.appendChild(visbutton);
  if (settings.bommode != "netlist") {
    vismenu.appendChild(viscontent);
    th.appendChild(vismenu);
  }
  tr.appendChild(th);

  var checkboxCompareClosure = function (checkbox) {
    return (a, b) => {
      var stateA = getCheckboxState(checkbox, a);
      var stateB = getCheckboxState(checkbox, b);
      if (stateA > stateB) return -1;
      if (stateA < stateB) return 1;
      return 0;
    }
  }
  var stringFieldCompareClosure = function (fieldIndex) {
    return (a, b) => {
      var fa = pcbdata.bom.fields[a[0][1]][fieldIndex];
      var fb = pcbdata.bom.fields[b[0][1]][fieldIndex];
      if (fa != fb) return fa > fb ? 1 : -1;
      else return 0;
    }
  }
  var referenceRegex = /(?<prefix>[^0-9]+)(?<number>[0-9]+)/;
  var compareRefs = (a, b) => {
    var ra = referenceRegex.exec(a);
    var rb = referenceRegex.exec(b);
    if (ra === null || rb === null) {
      if (a != b) return a > b ? 1 : -1;
      return 0;
    } else {
      if (ra.groups.prefix != rb.groups.prefix) {
        return ra.groups.prefix > rb.groups.prefix ? 1 : -1;
      }
      if (ra.groups.number != rb.groups.number) {
        return parseInt(ra.groups.number) > parseInt(rb.groups.number) ? 1 : -1;
      }
      return 0;
    }
  }
  if (settings.bommode == "netlist") {
    tr.appendChild(createColumnHeader("Net name", "bom-netname", (a, b) => {
      if (a > b) return -1;
      if (a < b) return 1;
      return 0;
    }));
    tr.appendChild(createColumnHeader("Color", "bom-color", (a, b) => {
      return 0;
    }));
  } else {
    // Filter hidden columns
    var columns = settings.columnOrder.filter(e => !settings.hiddenColumns.includes(e));
    var valueIndex = config.fields.indexOf("Value");
    var footprintIndex = config.fields.indexOf("Footprint");
    columns.forEach((column) => {
      if (column === placeHolderColumn) {
        var n = 1;
        if (column === "checkboxes")
          n = settings.checkboxes.length;
        for (i = 0; i < n; i++) {
          td = placeHolderElements.shift();
          tr.appendChild(td);
        }
        return;
      } else if (column === "checkboxes") {
        for (var checkbox of settings.checkboxes) {
          th = createColumnHeader(
            checkbox, "bom-checkbox", checkboxCompareClosure(checkbox), true);
          tr.appendChild(th);
        }
      } else if (column === "References") {
        tr.appendChild(createColumnHeader("References", "references", (a, b) => {
          var i = 0;
          while (i < a.length && i < b.length) {
            if (a[i] != b[i]) return compareRefs(a[i][0], b[i][0]);
            i++;
          }
          return a.length - b.length;
        }));
      } else if (column === "Value") {
        tr.appendChild(createColumnHeader("Value", "value", (a, b) => {
          var ra = a[0][1], rb = b[0][1];
          return valueCompare(
            pcbdata.bom.parsedValues[ra], pcbdata.bom.parsedValues[rb],
            pcbdata.bom.fields[ra][valueIndex], pcbdata.bom.fields[rb][valueIndex]);
        }));
        return;
      } else if (column === "Footprint") {
        tr.appendChild(createColumnHeader(
          "Footprint", "footprint", stringFieldCompareClosure(footprintIndex)));
      } else if (column === "Quantity" && settings.bommode == "grouped") {
        tr.appendChild(createColumnHeader("Quantity", "quantity", (a, b) => {
          return a.length - b.length;
        }));
      } else {
        // Other fields
        var i = config.fields.indexOf(column);
        if (i < 0)
          return;
        tr.appendChild(createColumnHeader(
          column, `field${i + 1}`, stringFieldCompareClosure(i)));
      }
    });
  }
  bomhead.appendChild(tr);
}

function populateBomBody(placeholderColumn = null, placeHolderElements = null) {
  const urlRegex = /^(https?:\/\/[^\s\/$.?#][^\s]*|file:\/\/([a-zA-Z]:|\/)[^\x00]+)$/;
  while (bom.firstChild) {
    bom.removeChild(bom.firstChild);
  }
  highlightHandlers = [];
  footprintIndexToHandler = {};
  netsToHandler = {};
  currentHighlightedRowId = null;
  var first = true;
  var style = getComputedStyle(topmostdiv);
  var defaultNetColor = style.getPropertyValue('--track-color').trim();
  if (settings.bommode == "netlist") {
    bomtable = pcbdata.nets.slice();
  } else {
    switch (settings.canvaslayout) {
      case 'F':
        bomtable = pcbdata.bom.F.slice();
        break;
      case 'FB':
        bomtable = pcbdata.bom.both.slice();
        break;
      case 'B':
        bomtable = pcbdata.bom.B.slice();
        break;
    }
    if (settings.bommode == "ungrouped") {
      // expand bom table
      expandedTable = []
      for (var bomentry of bomtable) {
        for (var ref of bomentry) {
          expandedTable.push([ref]);
        }
      }
      bomtable = expandedTable;
    }
  }
  if (bomSortFunction) {
    bomtable = bomtable.sort(bomSortFunction);
  }
  for (var i in bomtable) {
    var bomentry = bomtable[i];
    if (filter && !entryMatches(bomentry)) {
      continue;
    }
    var references = null;
    var netname = null;
    var tr = document.createElement("TR");
    var td = document.createElement("TD");
    var rownum = +i + 1;
    tr.id = "bomrow" + rownum;
    td.textContent = rownum;
    tr.appendChild(td);
    if (settings.bommode == "netlist") {
      netname = bomentry;
      td = document.createElement("TD");
      td.innerHTML = highlightFilter(netname ? netname : "&lt;no net&gt;");
      tr.appendChild(td);
      var color = settings.netColors[netname] || defaultNetColor;
      td = document.createElement("TD");
      var colorBox = document.createElement("INPUT");
      colorBox.type = "color";
      colorBox.value = color;
      colorBox.onchange = netColorChangeHandler(netname);
      colorBox.onmouseup = netColorRightClick(netname);
      colorBox.oncontextmenu = (e) => e.preventDefault();
      td.appendChild(colorBox);
      td.classList.add("color-column");
      tr.appendChild(td);
    } else {
      if (reflookup) {
        references = findRefInEntry(bomentry);
        if (references.length == 0) {
          continue;
        }
      } else {
        references = bomentry;
      }
      // Filter hidden columns
      var columns = settings.columnOrder.filter(e => !settings.hiddenColumns.includes(e));
      columns.forEach((column) => {
        if (column === placeholderColumn) {
          var n = 1;
          if (column === "checkboxes")
            n = settings.checkboxes.length;
          for (i = 0; i < n; i++) {
            td = placeHolderElements.shift();
            tr.appendChild(td);
          }
          return;
        } else if (column === "checkboxes") {
          for (var checkbox of settings.checkboxes) {
            if (checkbox) {
              td = document.createElement("TD");
              var input = document.createElement("input");
              input.type = "checkbox";
              input.onchange = createCheckboxChangeHandler(checkbox, references, tr);
              setBomCheckboxState(checkbox, input, references);
              if (input.checked && settings.markWhenChecked == checkbox) {
                tr.classList.add("checked");
              }
              td.appendChild(input);
              tr.appendChild(td);
            }
          }
        } else if (column === "References") {
          td = document.createElement("TD");
          td.innerHTML = highlightFilter(references.map(r => r[0]).join(", "));
          tr.appendChild(td);
        } else if (column === "Quantity" && settings.bommode == "grouped") {
          // Quantity
          td = document.createElement("TD");
          td.textContent = references.length;
          tr.appendChild(td);
        } else {
          // All the other fields
          var field_index = config.fields.indexOf(column)
          if (field_index < 0)
            return;
          var valueSet = new Set();
          references.map(r => r[1]).forEach((id) => valueSet.add(pcbdata.bom.fields[id][field_index]));
          td = document.createElement("TD");
          var output = new Array();
          for (let item of valueSet) {
            const visible = highlightFilter(String(item));
            if (typeof item === 'string' && item.match(urlRegex)) {
              output.push(`<a href="${item}" target="_blank">${visible}</a>`);
            } else {
              output.push(visible);
            }
          }
          td.innerHTML = output.join(", ");
          tr.appendChild(td);
        }
      });
    }
    bom.appendChild(tr);
    var handler = createRowHighlightHandler(tr.id, references, netname);
    tr.onmousemove = handler;
    highlightHandlers.push({
      id: tr.id,
      handler: handler,
    });
    if (references !== null) {
      for (var refIndex of references.map(r => r[1])) {
        footprintIndexToHandler[refIndex] = handler;
      }
    }
    if (netname !== null) {
      netsToHandler[netname] = handler;
    }
    if ((filter || reflookup) && first) {
      handler();
      first = false;
    }
  }
  EventHandler.emitEvent(
    IBOM_EVENT_TYPES.BOM_BODY_CHANGE_EVENT, {
    filter: filter,
    reflookup: reflookup,
    checkboxes: settings.checkboxes,
    bommode: settings.bommode,
  });
}

function highlightPreviousRow() {
  if (!currentHighlightedRowId) {
    highlightHandlers[highlightHandlers.length - 1].handler();
  } else {
    if (highlightHandlers.length > 1 &&
      highlightHandlers[0].id == currentHighlightedRowId) {
      highlightHandlers[highlightHandlers.length - 1].handler();
    } else {
      for (var i = 0; i < highlightHandlers.length - 1; i++) {
        if (highlightHandlers[i + 1].id == currentHighlightedRowId) {
          highlightHandlers[i].handler();
          break;
        }
      }
    }
  }
  smoothScrollToRow(currentHighlightedRowId);
}

function highlightNextRow() {
  if (!currentHighlightedRowId) {
    highlightHandlers[0].handler();
  } else {
    if (highlightHandlers.length > 1 &&
      highlightHandlers[highlightHandlers.length - 1].id == currentHighlightedRowId) {
      highlightHandlers[0].handler();
    } else {
      for (var i = 1; i < highlightHandlers.length; i++) {
        if (highlightHandlers[i - 1].id == currentHighlightedRowId) {
          highlightHandlers[i].handler();
          break;
        }
      }
    }
  }
  smoothScrollToRow(currentHighlightedRowId);
}

function populateBomTable() {
  populateBomHeader();
  populateBomBody();
  setBomHandlers();
  resizableGrid(bomhead);
}

function footprintsClicked(footprintIndexes) {
  var lastClickedIndex = footprintIndexes.indexOf(lastClicked);
  for (var i = 1; i <= footprintIndexes.length; i++) {
    var refIndex = footprintIndexes[(lastClickedIndex + i) % footprintIndexes.length];
    if (refIndex in footprintIndexToHandler) {
      lastClicked = refIndex;
      footprintIndexToHandler[refIndex]();
      smoothScrollToRow(currentHighlightedRowId);
      break;
    }
  }
}

function netClicked(net) {
  if (net in netsToHandler) {
    netsToHandler[net]();
    smoothScrollToRow(currentHighlightedRowId);
  } else {
    clearHighlightedFootprints();
    highlightedNet = net;
    drawHighlights();
  }
}

function updateFilter(input) {
  filter = input.toLowerCase();
  populateBomTable();
}

function updateRefLookup(input) {
  reflookup = input.toLowerCase();
  populateBomTable();
}

function changeCanvasLayout(layout) {
  document.getElementById("fl-btn").classList.remove("depressed");
  document.getElementById("fb-btn").classList.remove("depressed");
  document.getElementById("bl-btn").classList.remove("depressed");
  switch (layout) {
    case 'F':
      document.getElementById("fl-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.collapse(1);
      }
      break;
    case 'B':
      document.getElementById("bl-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.collapse(0);
      }
      break;
    default:
      document.getElementById("fb-btn").classList.add("depressed");
      if (settings.bomlayout != "bom-only") {
        canvassplit.setSizes([50, 50]);
      }
  }
  settings.canvaslayout = layout;
  writeStorage("canvaslayout", layout);
  resizeAll();
  changeBomMode(settings.bommode);
}

function populateMetadata() {
  document.getElementById("title").innerHTML = pcbdata.metadata.title;
  document.getElementById("revision").innerHTML = "Rev: " + pcbdata.metadata.revision;
  document.getElementById("company").innerHTML = pcbdata.metadata.company;
  document.getElementById("filedate").innerHTML = pcbdata.metadata.date;
  if (pcbdata.metadata.title != "") {
    document.title = pcbdata.metadata.title + " BOM";
  }
  // Calculate board stats
  var fp_f = 0,
    fp_b = 0,
    pads_f = 0,
    pads_b = 0,
    pads_th = 0;
  for (var i = 0; i < pcbdata.footprints.length; i++) {
    if (pcbdata.bom.skipped.includes(i)) continue;
    var mod = pcbdata.footprints[i];
    if (mod.layer == "F") {
      fp_f++;
    } else {
      fp_b++;
    }
    for (var pad of mod.pads) {
      if (pad.type == "th") {
        pads_th++;
      } else {
        if (pad.layers.includes("F")) {
          pads_f++;
        }
        if (pad.layers.includes("B")) {
          pads_b++;
        }
      }
    }
  }
  document.getElementById("stats-components-front").innerHTML = fp_f;
  document.getElementById("stats-components-back").innerHTML = fp_b;
  document.getElementById("stats-components-total").innerHTML = fp_f + fp_b;
  document.getElementById("stats-groups-front").innerHTML = pcbdata.bom.F.length;
  document.getElementById("stats-groups-back").innerHTML = pcbdata.bom.B.length;
  document.getElementById("stats-groups-total").innerHTML = pcbdata.bom.both.length;
  document.getElementById("stats-smd-pads-front").innerHTML = pads_f;
  document.getElementById("stats-smd-pads-back").innerHTML = pads_b;
  document.getElementById("stats-smd-pads-total").innerHTML = pads_f + pads_b;
  document.getElementById("stats-th-pads").innerHTML = pads_th;
  // Update version string
  document.getElementById("github-link").innerHTML = "InteractiveHtmlBom&nbsp;" +
    /^v\d+\.\d+/.exec(pcbdata.ibom_version)[0];
}

function changeBomLayout(layout) {
  document.getElementById("bom-btn").classList.remove("depressed");
  document.getElementById("lr-btn").classList.remove("depressed");
  document.getElementById("tb-btn").classList.remove("depressed");
  switch (layout) {
    case 'bom-only':
      document.getElementById("bom-btn").classList.add("depressed");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      document.getElementById("frontcanvas").style.display = "none";
      document.getElementById("backcanvas").style.display = "none";
      document.getElementById("bot").style.height = "";
      break;
    case 'top-bottom':
      document.getElementById("tb-btn").classList.add("depressed");
      document.getElementById("frontcanvas").style.display = "";
      document.getElementById("backcanvas").style.display = "";
      document.getElementById("bot").style.height = "calc(100% - 80px)";
      document.getElementById("bomdiv").classList.remove("split-horizontal");
      document.getElementById("canvasdiv").classList.remove("split-horizontal");
      document.getElementById("frontcanvas").classList.add("split-horizontal");
      document.getElementById("backcanvas").classList.add("split-horizontal");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      bomsplit = Split(['#bomdiv', '#canvasdiv'], {
        sizes: [50, 50],
        onDragEnd: resizeAll,
        direction: "vertical",
        gutterSize: 5
      });
      canvassplit = Split(['#frontcanvas', '#backcanvas'], {
        sizes: [50, 50],
        gutterSize: 5,
        onDragEnd: resizeAll
      });
      break;
    case 'left-right':
      document.getElementById("lr-btn").classList.add("depressed");
      document.getElementById("frontcanvas").style.display = "";
      document.getElementById("backcanvas").style.display = "";
      document.getElementById("bot").style.height = "calc(100% - 80px)";
      document.getElementById("bomdiv").classList.add("split-horizontal");
      document.getElementById("canvasdiv").classList.add("split-horizontal");
      document.getElementById("frontcanvas").classList.remove("split-horizontal");
      document.getElementById("backcanvas").classList.remove("split-horizontal");
      if (bomsplit) {
        bomsplit.destroy();
        bomsplit = null;
        canvassplit.destroy();
        canvassplit = null;
      }
      bomsplit = Split(['#bomdiv', '#canvasdiv'], {
        sizes: [50, 50],
        onDragEnd: resizeAll,
        gutterSize: 5
      });
      canvassplit = Split(['#frontcanvas', '#backcanvas'], {
        sizes: [50, 50],
        gutterSize: 5,
        direction: "vertical",
        onDragEnd: resizeAll
      });
  }
  settings.bomlayout = layout;
  writeStorage("bomlayout", layout);
  changeCanvasLayout(settings.canvaslayout);
}

function changeBomMode(mode) {
  document.getElementById("bom-grouped-btn").classList.remove("depressed");
  document.getElementById("bom-ungrouped-btn").classList.remove("depressed");
  document.getElementById("bom-netlist-btn").classList.remove("depressed");
  var chkbxs = document.getElementsByClassName("visibility_checkbox");

  switch (mode) {
    case 'grouped':
      document.getElementById("bom-grouped-btn").classList.add("depressed");
      for (var i = 0; i < chkbxs.length; i++) {
        chkbxs[i].disabled = false;
      }
      break;
    case 'ungrouped':
      document.getElementById("bom-ungrouped-btn").classList.add("depressed");
      for (var i = 0; i < chkbxs.length; i++) {
        chkbxs[i].disabled = false;
      }
      break;
    case 'netlist':
      document.getElementById("bom-netlist-btn").classList.add("depressed");
      for (var i = 0; i < chkbxs.length; i++) {
        chkbxs[i].disabled = true;
      }
  }

  writeStorage("bommode", mode);
  if (mode != settings.bommode) {
    settings.bommode = mode;
    bomSortFunction = null;
    currentSortColumn = null;
    currentSortOrder = null;
    clearHighlightedFootprints();
  }
  populateBomTable();
}

function focusFilterField() {
  focusInputField(document.getElementById("filter"));
}

function focusRefLookupField() {
  focusInputField(document.getElementById("reflookup"));
}

function toggleBomCheckbox(bomrowid, checkboxnum) {
  if (!bomrowid || checkboxnum > settings.checkboxes.length) {
    return;
  }
  var bomrow = document.getElementById(bomrowid);
  var checkbox = bomrow.childNodes[checkboxnum].childNodes[0];
  checkbox.checked = !checkbox.checked;
  checkbox.indeterminate = false;
  checkbox.onchange();
}

function checkBomCheckbox(bomrowid, checkboxname) {
  var checkboxnum = 0;
  while (checkboxnum < settings.checkboxes.length &&
    settings.checkboxes[checkboxnum].toLowerCase() != checkboxname.toLowerCase()) {
    checkboxnum++;
  }
  if (!bomrowid || checkboxnum >= settings.checkboxes.length) {
    return;
  }
  var bomrow = document.getElementById(bomrowid);
  var checkbox = bomrow.childNodes[checkboxnum + 1].childNodes[0];
  checkbox.checked = true;
  checkbox.indeterminate = false;
  checkbox.onchange();
}

function setBomCheckboxes(value) {
  writeStorage("bomCheckboxes", value);
  settings.checkboxes = value.split(",").map((e) => e.trim()).filter((e) => e);
  prepCheckboxes();
  populateMarkWhenCheckedOptions();
  setMarkWhenChecked(settings.markWhenChecked);
}

function setMarkWhenChecked(value) {
  writeStorage("markWhenChecked", value);
  settings.markWhenChecked = value;
  markedFootprints.clear();
  for (var ref of (value ? getStoredCheckboxRefs(value) : [])) {
    markedFootprints.add(ref);
  }
  populateBomTable();
  drawHighlights();
}

function prepCheckboxes() {
  var table = document.getElementById("checkbox-stats");
  while (table.childElementCount > 1) {
    table.removeChild(table.lastChild);
  }
  if (settings.checkboxes.length) {
    table.style.display = "";
  } else {
    table.style.display = "none";
  }
  for (var checkbox of settings.checkboxes) {
    var tr = document.createElement("TR");
    var td = document.createElement("TD");
    td.innerHTML = checkbox;
    tr.appendChild(td);
    td = document.createElement("TD");
    td.id = "checkbox-stats-" + checkbox;
    var progressbar = document.createElement("div");
    progressbar.classList.add("bar");
    td.appendChild(progressbar);
    var text = document.createElement("div");
    text.classList.add("text");
    td.appendChild(text);
    tr.appendChild(td);
    table.appendChild(tr);
    updateCheckboxStats(checkbox);
  }
}

function populateMarkWhenCheckedOptions() {
  var container = document.getElementById("markWhenCheckedContainer");

  if (settings.checkboxes.length == 0) {
    container.parentElement.style.display = "none";
    return;
  }

  container.innerHTML = '';
  container.parentElement.style.display = "inline-block";

  function createOption(name, displayName) {
    var id = "markWhenChecked-" + name;

    var div = document.createElement("div");
    div.classList.add("radio-container");

    var input = document.createElement("input");
    input.type = "radio";
    input.name = "markWhenChecked";
    input.value = name;
    input.id = id;
    input.onchange = () => setMarkWhenChecked(name);
    div.appendChild(input);

    // Preserve the selected element when the checkboxes change
    if (name == settings.markWhenChecked) {
      input.checked = true;
    }

    var label = document.createElement("label");
    label.innerHTML = displayName;
    label.htmlFor = id;
    div.appendChild(label);

    container.appendChild(div);
  }
  createOption("", "None");
  for (var checkbox of settings.checkboxes) {
    createOption(checkbox, checkbox);
  }
}

function updateCheckboxStats(checkbox) {
  var checked = getStoredCheckboxRefs(checkbox).size;
  var total = pcbdata.footprints.length - pcbdata.bom.skipped.length;
  var percent = checked * 100.0 / total;
  var td = document.getElementById("checkbox-stats-" + checkbox);
  td.firstChild.style.width = percent + "%";
  td.lastChild.innerHTML = checked + "/" + total + " (" + Math.round(percent) + "%)";
}

function constrain(number, min, max){
  return Math.min(Math.max(parseInt(number), min), max);
}

document.onkeydown = function (e) {
  switch (e.key) {
    case "n":
      if (document.activeElement.type == "text") {
        return;
      }
      if (currentHighlightedRowId !== null) {
        checkBomCheckbox(currentHighlightedRowId, "placed");
        highlightNextRow();
        e.preventDefault();
      }
      break;
    case "ArrowUp":
      highlightPreviousRow();
      e.preventDefault();
      break;
    case "ArrowDown":
      highlightNextRow();
      e.preventDefault();
      break;
    case "ArrowLeft":
    case "ArrowRight":
      if (document.activeElement.type != "text"){
        e.preventDefault();
        let boardRotationElement = document.getElementById("boardRotation")
        settings.boardRotation = parseInt(boardRotationElement.value);  // degrees / 5
        if (e.key == "ArrowLeft"){
            settings.boardRotation += 3;  // 15 degrees
        }
        else{
            settings.boardRotation -= 3;
        }
        settings.boardRotation = constrain(settings.boardRotation, boardRotationElement.min, boardRotationElement.max);
        boardRotationElement.value = settings.boardRotation
        setBoardRotation(settings.boardRotation);
      }
      break;
    default:
      break;
  }
  if (e.altKey) {
    switch (e.key) {
      case "f":
        focusFilterField();
        e.preventDefault();
        break;
      case "r":
        focusRefLookupField();
        e.preventDefault();
        break;
      case "z":
        changeBomLayout("bom-only");
        e.preventDefault();
        break;
      case "x":
        changeBomLayout("left-right");
        e.preventDefault();
        break;
      case "c":
        changeBomLayout("top-bottom");
        e.preventDefault();
        break;
      case "v":
        changeCanvasLayout("F");
        e.preventDefault();
        break;
      case "b":
        changeCanvasLayout("FB");
        e.preventDefault();
        break;
      case "n":
        changeCanvasLayout("B");
        e.preventDefault();
        break;
      default:
        break;
    }
    if (e.key >= '1' && e.key <= '9') {
      toggleBomCheckbox(currentHighlightedRowId, parseInt(e.key));
      e.preventDefault();
    }
  }
}

function hideNetlistButton() {
  document.getElementById("bom-ungrouped-btn").classList.remove("middle-button");
  document.getElementById("bom-ungrouped-btn").classList.add("right-most-button");
  document.getElementById("bom-netlist-btn").style.display = "none";
}

window.onload = function (e) {
  initUtils();
  initRender();
  initStorage();
  initDefaults();
  cleanGutters();
  populateMetadata();
  dbgdiv = document.getElementById("dbg");
  bom = document.getElementById("bombody");
  bomhead = document.getElementById("bomhead");
  filter = "";
  reflookup = "";
  if (!("nets" in pcbdata)) {
    hideNetlistButton();
  }
  initDone = true;
  setBomCheckboxes(document.getElementById("bomCheckboxes").value);
  // Triggers render
  changeBomLayout(settings.bomlayout);

  // Users may leave fullscreen without touching the checkbox. Uncheck.
  document.addEventListener('fullscreenchange', () => {
    if (!document.fullscreenElement)
      document.getElementById('fullscreenCheckbox').checked = false;
  });
}

window.onresize = resizeAll;
window.matchMedia("print").addListener(resizeAll);

///////////////////////////////////////////////

///////////////////////////////////////////////

///////////////////////////////////////////////
  </script>
</head>

<body>

<div id="topmostdiv" class="topmostdiv">
  <div id="top">
    <div style="float: right; height: 100%;">
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="menubtn"></button>
        <div class="menu-content">
          <label class="menu-label menu-label-top" style="width: calc(50% - 18px)">
            <input id="darkmodeCheckbox" type="checkbox" onchange="setDarkMode(this.checked)">
            Dark mode
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label menu-label-top" style="width: calc(50% - 17px); border-left: 0;">
            <input id="fullscreenCheckbox" type="checkbox" onchange="setFullscreen(this.checked)">
            Full Screen
          </label>
          <label class="menu-label" style="width: calc(50% - 18px)">
            <input id="fabricationCheckbox" type="checkbox" checked onchange="fabricationVisible(this.checked)">
            Fab layer
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
            <input id="silkscreenCheckbox" type="checkbox" checked onchange="silkscreenVisible(this.checked)">
            Silkscreen
          </label>
          <label class="menu-label" style="width: calc(50% - 18px)">
            <input id="referencesCheckbox" type="checkbox" checked onchange="referencesVisible(this.checked)">
            References
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
            <input id="valuesCheckbox" type="checkbox" checked onchange="valuesVisible(this.checked)">
            Values
          </label>
          <div id="tracksAndZonesCheckboxes">
            <label class="menu-label" style="width: calc(50% - 18px)">
              <input id="tracksCheckbox" type="checkbox" checked onchange="tracksVisible(this.checked)">
              Tracks
            </label><!-- This comment eats space! All of it!
            --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
              <input id="zonesCheckbox" type="checkbox" checked onchange="zonesVisible(this.checked)">
              Zones
            </label>
          </div>
          <label class="menu-label" style="width: calc(50% - 18px)">
            <input id="padsCheckbox" type="checkbox" checked onchange="padsVisible(this.checked)">
            Pads
          </label><!-- This comment eats space! All of it!
          --><label class="menu-label" style="width: calc(50% - 17px); border-left: 0;">
            <input id="dnpOutlineCheckbox" type="checkbox" checked onchange="dnpOutline(this.checked)">
            DNP outlined
          </label>
          <label class="menu-label">
            <input id="dragCheckbox" type="checkbox" checked onchange="setRedrawOnDrag(this.checked)">
            Continuous redraw on drag
          </label>
          <label class="menu-label">
            Highlight first pin
            <form id="highlightpin1">
              <div class="flexbox">
                <label>
                  <input type="radio" name="highlightpin1" value="none" onchange="setHighlightPin1('none')">
                  None
                </label>
                <label>
                  <input type="radio" name="highlightpin1" value="all" onchange="setHighlightPin1('all')">
                  All
                </label>
                <label>
                  <input type="radio" name="highlightpin1" value="selected" onchange="setHighlightPin1('selected')">
                  Selected
                </label>
              </div>
            </form>
          </label>
          <label class="menu-label">
            <span>Board rotation</span>
            <span style="float: right"><span id="rotationDegree">0</span>&#176;</span>
            <input id="boardRotation" type="range" min="-36" max="36" value="0" class="slider" oninput="setBoardRotation(this.value)">
          </label>
          <label class="menu-label">
            <input id="offsetBackRotationCheckbox" type="checkbox" onchange="setOffsetBackRotation(this.checked)">
            Offset back rotation
          </label>
          <label class="menu-label">
            <div style="margin-left: 5px">Bom checkboxes</div>
            <input id="bomCheckboxes" class="menu-textbox" type=text
                   oninput="setBomCheckboxes(this.value)">
          </label>
          <label class="menu-label">
            <div style="margin-left: 5px">Mark when checked</div>
            <div id="markWhenCheckedContainer"></div>
          </label>
          <label class="menu-label">
            <span class="shameless-plug">
              <span>Created using</span>
              <a id="github-link" target="blank" href="https://github.com/openscopeproject/InteractiveHtmlBom">InteractiveHtmlBom</a>
              <a target="blank" title="Mouse and keyboard help" href="https://github.com/openscopeproject/InteractiveHtmlBom/wiki/Usage#bom-page-mouse-actions" style="text-decoration: none;"><label class="help-link">?</label></a>
            </span>
          </label>
        </div>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="fl-btn" class="left-most-button" onclick="changeCanvasLayout('F')"
                title="Front only">F
        </button>
        <button id="fb-btn" class="middle-button" onclick="changeCanvasLayout('FB')"
                title="Front and Back">FB
        </button>
        <button id="bl-btn" class="right-most-button" onclick="changeCanvasLayout('B')"
                title="Back only">B
        </button>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="bom-btn" class="left-most-button" onclick="changeBomLayout('bom-only')"
                title="BOM only"></button>
        <button id="lr-btn" class="middle-button" onclick="changeBomLayout('left-right')"
                title="BOM left, drawings right"></button>
        <button id="tb-btn" class="right-most-button" onclick="changeBomLayout('top-bottom')"
                title="BOM top, drawings bot"></button>
      </div>
      <div class="button-container hideonprint"
           style="float: right; position: relative; top: 8px">
        <button id="bom-grouped-btn" class="left-most-button" onclick="changeBomMode('grouped')"
                title="Grouped BOM"></button>
        <button id="bom-ungrouped-btn" class="middle-button" onclick="changeBomMode('ungrouped')"
                title="Ungrouped BOM"></button>
        <button id="bom-netlist-btn" class="right-most-button" onclick="changeBomMode('netlist')"
                title="Netlist"></button>
      </div>
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="statsbtn"></button>
        <div class="menu-content">
          <table class="stats">
            <tbody>
              <tr>
                <td width="40%">Board stats</td>
                <td>Front</td>
                <td>Back</td>
                <td>Total</td>
              </tr>
              <tr>
                <td>Components</td>
                <td id="stats-components-front">~</td>
                <td id="stats-components-back">~</td>
                <td id="stats-components-total">~</td>
              </tr>
              <tr>
                <td>Groups</td>
                <td id="stats-groups-front">~</td>
                <td id="stats-groups-back">~</td>
                <td id="stats-groups-total">~</td>
              </tr>
              <tr>
                <td>SMD pads</td>
                <td id="stats-smd-pads-front">~</td>
                <td id="stats-smd-pads-back">~</td>
                <td id="stats-smd-pads-total">~</td>
              </tr>
              <tr>
                <td>TH pads</td>
                <td colspan=3 id="stats-th-pads">~</td>
              </tr>
            </tbody>
          </table>
          <table class="stats">
            <col width="40%"/><col />
            <tbody id="checkbox-stats">
              <tr>
                <td colspan=2 style="border-top: 0">Checkboxes</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="hideonprint menu" style="float: right; top: 8px;">
        <button class="iobtn"></button>
        <div class="menu-content">
          <div class="menu-label menu-label-top">
            <div style="margin-left: 5px;">Save board image</div>
            <div class="flexbox">
              <input id="render-save-width" class="menu-textbox" type="text" value="1000" placeholder="Width"
                  style="flex-grow: 1; width: 50px;" oninput="validateSaveImgDimension(this)">
              <span>X</span>
              <input id="render-save-height" class="menu-textbox" type="text" value="1000" placeholder="Height"
                  style="flex-grow: 1; width: 50px;" oninput="validateSaveImgDimension(this)">
            </div>
            <label>
              <input id="render-save-transparent" type="checkbox">
              Transparent background
            </label>
            <div class="flexbox">
              <button class="savebtn" onclick="saveImage('F')">Front</button>
              <button class="savebtn" onclick="saveImage('B')">Back</button>
            </div>
          </div>
          <div class="menu-label">
            <span style="margin-left: 5px;">Config and checkbox state</span>
            <div class="flexbox">
              <button class="savebtn" onclick="saveSettings()">Export</button>
              <button class="savebtn" onclick="loadSettings()">Import</button>
              <button class="savebtn" onclick="resetSettings()">Reset</button>
            </div>
          </div>
          <div class="menu-label">
            <span style="margin-left: 5px;">Save bom table as</span>
            <div class="flexbox">
              <button class="savebtn" onclick="saveBomTable('csv')">csv</button>
              <button class="savebtn" onclick="saveBomTable('txt')">txt</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="fileinfodiv" style="overflow: auto;">
      <table class="fileinfo">
        <tbody>
          <tr>
            <td id="title" class="title" style="width: 70%">
              Title
            </td>
            <td id="revision" class="title" style="width: 30%">
              Revision
            </td>
          </tr>
          <tr>
            <td id="company">
              Company
            </td>
            <td id="filedate">
              Date
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div id="bot" class="split" style="height: calc(100% - 80px)">
    <div id="bomdiv" class="split split-horizontal">
      <div style="width: 100%">
        <input id="reflookup" class="textbox searchbox reflookup hideonprint" type="text" placeholder="Ref lookup"
               oninput="updateRefLookup(this.value)">
        <input id="filter" class="textbox searchbox filter hideonprint" type="text" placeholder="Filter"
               oninput="updateFilter(this.value)">
        <div class="button-container hideonprint" style="float: left; margin: 0;">
          <button id="copy" title="Copy bom table to clipboard"
               onclick="saveBomTable('clipboard')"></button>
        </div>
      </div>
      <div id="dbg"></div>
      <table class="bom" id="bomtable">
        <thead id="bomhead">
        </thead>
        <tbody id="bombody">
        </tbody>
      </table>
    </div>
    <div id="canvasdiv" class="split split-horizontal">
      <div id="frontcanvas" class="split" touch-action="none" style="overflow: hidden">
        <div style="position: relative; width: 100%; height: 100%;">
          <canvas id="F_bg" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
          <canvas id="F_fab" style="position: absolute; left: 0; top: 0; z-index: 1;"></canvas>
          <canvas id="F_slk" style="position: absolute; left: 0; top: 0; z-index: 2;"></canvas>
          <canvas id="F_hl" style="position: absolute; left: 0; top: 0; z-index: 3;"></canvas>
        </div>
      </div>
      <div id="backcanvas" class="split" touch-action="none" style="overflow: hidden">
        <div style="position: relative; width: 100%; height: 100%;">
          <canvas id="B_bg" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>
          <canvas id="B_fab" style="position: absolute; left: 0; top: 0; z-index: 1;"></canvas>
          <canvas id="B_slk" style="position: absolute; left: 0; top: 0; z-index: 2;"></canvas>
          <canvas id="B_hl" style="position: absolute; left: 0; top: 0; z-index: 3;"></canvas>
        </div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
